<!DOCTYPE html><html lang="zh-CN"><head hexo-theme="https://github.com/volantis-x/hexo-theme-volantis/tree/5.0.0.alpha.3"><meta name="generator" content="Hexo 5.4.0"><meta charset="utf-8"><link rel="canonical" href="https://www.sizaif.com/posts/9959b7cc/"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta content="Sizaif&#39;s Blog" name="application-name"><meta content="Sizaif&#39;s Blog" name="apple-mobile-web-app-title"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="google-site-verification" content="2ch5e58GE7KkV0c1-Cc2VtH4jR8sGEuT8xtD6ou6Un8"><meta name="baidu-site-verification" content="code-fyaVc6pxBp"><link rel="preload" href="/css/style.css?time=1710817994317" as="style"><link rel="preload" href="https://cdn.jsdelivr.net/gh/inkss/common@1/fonts/canva/SentyGoldenBell.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="https://cdn.jsdelivr.net/gh/sizaif/blog-cdn@main/fonts/hytmr55.woff" as="font" type="font/woff" crossorigin="anonymous"><title>SEAL学习第一天-Bfv_basics使用用法 - Sizaif's Blog</title><meta name="keywords" content="Seal,同态加密,sizaif,程序猿"><meta name="description" content="@auther by sizaif  SEAL学习第一天： bfv_basics使用用法 @TOC bfv_basics 一 parms类  创建一个HE方案类 parms类需要的3个参数  poly_modulus_degree (degree of polynomial modulus 多项式模的次数); coeff_modulus ([ciphertext] coefficient mod"><meta property="og:type" content="article"><meta property="og:title" content="SEAL学习第一天-Bfv_basics使用用法"><meta property="og:url" content="https://www.sizaif.com/posts/9959b7cc/"><meta property="og:site_name" content="Sizaif&#39;s Blog"><meta property="og:description" content="@auther by sizaif  SEAL学习第一天： bfv_basics使用用法 @TOC bfv_basics 一 parms类  创建一个HE方案类 parms类需要的3个参数  poly_modulus_degree (degree of polynomial modulus 多项式模的次数); coeff_modulus ([ciphertext] coefficient mod"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png"><meta property="article:published_time" content="2021-08-11T14:01:34.000Z"><meta property="article:modified_time" content="2021-08-14T14:15:24.837Z"><meta property="article:author" content="sizaif"><meta property="article:tag" content="Seal"><meta property="article:tag" content="同态加密"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><style>#safearea{display:none}.post-story+.post-story,.post-wrapper+.post-wrapper,article+article{content-visibility:auto;contain-intrinsic-size:10px 500px}:root{--color-site-body:#f4f4f4;--color-site-bg:#f4f4f4;--color-site-inner:#fff;--color-site-footer:#2196f3;--color-card:#fff;--color-text:#444;--color-block:#f6f6f6;--color-inlinecode:#7c4dff;--color-codeblock:#f3e5f5;--color-h1:#3a3a3a;--color-h2:#3a3a3a;--color-h3:#333;--color-h4:#444;--color-h5:#555;--color-h6:#666;--color-p:#444;--color-list:#666;--color-list-hl:#36ac91;--color-meta:#888;--color-read-bkg:#e0d8c8;--color-read-post:#f8f1e2}*{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;outline:0;margin:0;padding:0}html{color:var(--color-text);width:100%;height:100%;font-family:hytmr,UbuntuMono,"Varela Round","PingFang SC","Microsoft YaHei",Helvetica,Arial,Menlo,Monaco,monospace,sans-serif;font-size:16px}html>::-webkit-scrollbar{height:4px;width:4px}html>::-webkit-scrollbar-track-piece{background:0 0}html>::-webkit-scrollbar-thumb{background:#44d7b6;cursor:pointer;border-radius:2px;-webkit-border-radius:2px}html>::-webkit-scrollbar-thumb:hover{background:#ff5722}body{background-color:var(--color-site-body);text-rendering:optimizelegibility;-webkit-tap-highlight-color:transparent;line-height:1.6;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body.modal-active{overflow:hidden}@media screen and (max-width:680px){body.modal-active{position:fixed;top:0;right:0;bottom:0;left:0}}a{color:#2196f3;cursor:pointer;text-decoration:none;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}a:hover{color:#ff5722}a:active,a:hover{outline:0}ol,ul{padding-left:0}ol li,ul li{list-style:none}header{display:-webkit-box;display:-moz-box;display:block}img{border:0;background:0 0;max-width:100%}svg:not(:root){overflow:hidden}hr{-moz-box-sizing:content-box;box-sizing:content-box;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;height:0;border:0;border-radius:1px;-webkit-border-radius:1px;border-bottom:1px solid rgba(68,68,68,.1)}button,input{color:inherit;font:inherit;margin:0}button{overflow:visible;text-transform:none;-webkit-appearance:button;cursor:pointer}@supports (backdrop-filter:blur(20px)){.blur{background:rgba(255,255,255,.9)!important;backdrop-filter:saturate(200%) blur(20px)}}.shadow{box-shadow:0 1px 2px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 1px 2px 0 rgba(0,0,0,.1)}.shadow.floatable{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.shadow.floatable:hover{box-shadow:0 2px 4px 0 rgba(0,0,0,.1),0 4px 8px 0 rgba(0,0,0,.1),0 8px 16px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.1),0 4px 8px 0 rgba(0,0,0,.1),0 8px 16px 0 rgba(0,0,0,.1)}#l_cover{min-height:64px}.cover-wrapper{top:0;left:0;max-width:100%;height:100vh;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-khtml-flex-wrap:nowrap;-moz-flex-wrap:nowrap;-o-flex-wrap:nowrap;-ms-flex-wrap:nowrap;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:vertical;-moz-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;align-self:center;align-content:center;color:var(--color-site-inner);padding:0 16px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;position:relative;overflow:hidden;margin-bottom:-100px}.cover-wrapper .cover-bg{position:absolute;width:100%;height:100%;background-position:center;background-size:cover;-webkit-background-size:cover;-moz-background-size:cover}.cover-wrapper .cover-bg.lazyload:not(.loaded){opacity:0;-webkit-opacity:0;-moz-opacity:0}.cover-wrapper .cover-bg.lazyload.loaded{animation-delay:0s;animation-duration:.5s;animation-fill-mode:forwards;animation-timing-function:ease-out;animation-name:fadeIn}@-moz-keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-webkit-keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-o-keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}.cover-wrapper .cover-body{z-index:1;position:relative;width:100%;height:100%}.cover-wrapper#full{height:calc(100vh + 100px);padding-bottom:100px}.cover-wrapper#half{max-height:640px;min-height:400px;height:calc(36vh - 64px + 200px)}.cover-wrapper #scroll-down{width:100%;height:64px;position:absolute;bottom:100px;text-align:center;cursor:pointer}.cover-wrapper #scroll-down .scroll-down-effects{color:#fff;font-size:24px;line-height:64px;position:absolute;width:24px;left:calc(50% - 12px);text-shadow:0 1px 2px rgba(0,0,0,.1);animation:scroll-down-effect 1.5s infinite;-webkit-animation:scroll-down-effect 1.5s infinite;-khtml-animation:scroll-down-effect 1.5s infinite;-moz-animation:scroll-down-effect 1.5s infinite;-o-animation:scroll-down-effect 1.5s infinite;-ms-animation:scroll-down-effect 1.5s infinite}@-moz-keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:.4;-moz-opacity:.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-webkit-keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:.4;-moz-opacity:.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-o-keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:.4;-moz-opacity:.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}@keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:.4;-moz-opacity:.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}.cover-wrapper .cover-body{margin-top:64px;margin-bottom:100px}.cover-wrapper .cover-body,.cover-wrapper .cover-body .bottom,.cover-wrapper .cover-body .top{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:vertical;-moz-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;justify-content:center;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-o-justify-content:center;-ms-justify-content:center;max-width:100%}.cover-wrapper .cover-body .bottom{margin-top:32px}.cover-wrapper .cover-body .title{font-family:SentyGoldenBell,"Varela Round","PingFang SC","Microsoft YaHei",Helvetica,Arial,Helvetica,monospace;font-size:3.125rem;line-height:1.2;text-shadow:0 1px 2px rgba(0,0,0,.1);text-align:center}.cover-wrapper .cover-body .subtitle{font-size:20px}.cover-wrapper .cover-body .logo{max-height:120px;max-width:calc(100% - 4 * 16px)}@media screen and (min-height:1024px){.cover-wrapper .cover-body .title{font-size:3rem}.cover-wrapper .cover-body .subtitle{font-size:1.05rem}.cover-wrapper .cover-body .logo{max-height:150px}}.cover-wrapper .cover-body .m_search{position:relative;max-width:calc(100% - 16px);width:320px;vertical-align:middle}.cover-wrapper .cover-body .m_search .form{position:relative;display:-webkit-box;display:-moz-box;display:block;width:100%}.cover-wrapper .cover-body .m_search .icon,.cover-wrapper .cover-body .m_search .input{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.cover-wrapper .cover-body .m_search .icon{position:absolute;display:-webkit-box;display:-moz-box;display:block;line-height:2.5rem;width:32px;top:0;left:5px;color:rgba(68,68,68,.75)}.cover-wrapper .cover-body .m_search .input{display:-webkit-box;display:-moz-box;display:block;height:2.5rem;width:100%;box-shadow:none;-webkit-box-shadow:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;font-size:.875rem;-webkit-appearance:none;padding-left:36px;border-radius:1.4rem;-webkit-border-radius:1.4rem;background:rgba(255,255,255,.6);backdrop-filter:blur(10px);border:none;color:var(--color-text)}@media screen and (max-width:500px){.cover-wrapper .cover-body .m_search .input{padding-left:36px}}.cover-wrapper .cover-body .m_search .input:hover{background:rgba(255,255,255,.8)}.cover-wrapper .cover-body .m_search .input:focus{background:#fff}.cover-wrapper .list-h{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;flex-wrap:wrap;-webkit-flex-wrap:wrap;-khtml-flex-wrap:wrap;-moz-flex-wrap:wrap;-o-flex-wrap:wrap;-ms-flex-wrap:wrap;align-items:stretch;border-radius:4px;-webkit-border-radius:4px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.cover-wrapper .list-h a{-webkit-box-flex:1;-moz-box-flex:1;-webkit-flex:1 0;-ms-flex:1 0;flex:1 0;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;font-weight:600}.cover-wrapper .list-h a img{display:-webkit-box;display:-moz-box;display:block;border-radius:2px;-webkit-border-radius:2px;margin:4px;min-width:40px;max-width:44px}@media screen and (max-width:768px){.cover-wrapper .list-h a img{min-width:36px;max-width:40px}}@media screen and (max-width:500px){.cover-wrapper .list-h a img{margin:2px 4px;min-width:32px;max-width:36px}}@media screen and (max-width:375px){.cover-wrapper .list-h a img{min-width:28px;max-width:32px}}.cover-wrapper{max-width:100%}.cover-wrapper.search .bottom .menu{margin-top:16px}.cover-wrapper.search .bottom .menu .list-h a{white-space:nowrap;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;align-items:baseline;padding:2px;margin:4px;color:var(--color-site-inner);opacity:.75;-webkit-opacity:.75;-moz-opacity:.75;text-shadow:0 1px 2px rgba(0,0,0,.05);border-bottom:2px solid transparent}.cover-wrapper.search .bottom .menu .list-h a i{margin-right:4px}.cover-wrapper.search .bottom .menu .list-h a p{font-size:.9375rem}.cover-wrapper.search .bottom .menu .list-h a.active,.cover-wrapper.search .bottom .menu .list-h a:active,.cover-wrapper.search .bottom .menu .list-h a:hover{opacity:1;-webkit-opacity:1;-moz-opacity:1;border-bottom:2px solid var(--color-site-inner)}.cover-wrapper.dock .menu,.cover-wrapper.featured .menu,.cover-wrapper.focus .menu{border-radius:6px;-webkit-border-radius:6px}.cover-wrapper.dock .menu .list-h a,.cover-wrapper.featured .menu .list-h a,.cover-wrapper.focus .menu .list-h a{-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:vertical;-moz-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;padding:12px;line-height:24px;border-radius:4px;-webkit-border-radius:4px;border-bottom:none;text-align:center;align-content:flex-end;color:rgba(68,68,68,.7);font-size:1.5rem}@media screen and (max-width:500px){.cover-wrapper.dock .menu .list-h a,.cover-wrapper.featured .menu .list-h a,.cover-wrapper.focus .menu .list-h a{padding:12px 8px}}.cover-wrapper.dock .menu .list-h a i,.cover-wrapper.featured .menu .list-h a i,.cover-wrapper.focus .menu .list-h a i{margin:8px}.cover-wrapper.dock .menu .list-h a p,.cover-wrapper.featured .menu .list-h a p,.cover-wrapper.focus .menu .list-h a p{font-size:.875rem}.cover-wrapper.dock .menu .list-h a.active,.cover-wrapper.featured .menu .list-h a.active,.cover-wrapper.focus .menu .list-h a.active{background:var(--color-card);backdrop-filter:none}.cover-wrapper.dock .menu .list-h a.active i,.cover-wrapper.dock .menu .list-h a.active i+p,.cover-wrapper.featured .menu .list-h a.active i,.cover-wrapper.featured .menu .list-h a.active i+p,.cover-wrapper.focus .menu .list-h a.active i,.cover-wrapper.focus .menu .list-h a.active i+p{color:#44d7b6}.cover-wrapper.dock .menu .list-h a.active img+p,.cover-wrapper.featured .menu .list-h a.active img+p,.cover-wrapper.focus .menu .list-h a.active img+p{color:var(--color-text)}.cover-wrapper.dock .menu .list-h a:hover,.cover-wrapper.featured .menu .list-h a:hover,.cover-wrapper.focus .menu .list-h a:hover{background:var(--color-card)}.cover-wrapper.dock .top{margin-bottom:48px}.cover-wrapper.dock .menu{background:rgba(255,255,255,.5);position:absolute;bottom:0;max-width:100%}.cover-wrapper.dock .menu .list-h{flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-khtml-flex-wrap:nowrap;-moz-flex-wrap:nowrap;-o-flex-wrap:nowrap;-ms-flex-wrap:nowrap;margin:4px}.cover-wrapper.dock .menu .list-h a+a{margin-left:4px}@media screen and (max-width:500px){.cover-wrapper.dock .menu .list-h{overflow-x:scroll}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar{height:0;width:0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-track-piece{background:0 0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb{background:#44d7b6;cursor:pointer;border-radius:0;-webkit-border-radius:0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb:hover{background:#ff5722}}@supports (backdrop-filter:blur(20px)){.cover-wrapper.dock .menu{background:rgba(255,255,255,.5);backdrop-filter:saturate(200%) blur(20px)}}@media (prefers-color-scheme:dark){:root{--color-mode:'dark'}:root:not([color-scheme]){--color-site-body:#000;--color-read-bkg:#222;--color-read-post:#333;--color-site-bg:#222;--color-site-inner:#eee;--color-site-footer:#aaa;--color-card:#333;--color-text:#eee;--color-block:#3a3a3a;--color-codeblock:#343a3c;--color-inlinecode:#d56d28;--color-h1:#eee;--color-h2:#eee;--color-h3:#ddd;--color-h4:#ddd;--color-h5:#ddd;--color-h6:#ddd;--color-p:#bbb;--color-list:#aaa;--color-list-hl:#69dfc4;--color-meta:#888;--color-link:#888}:root:not([color-scheme]) img{filter:brightness(70%)!important}:root:not([color-scheme]) #wrapper .title{color:var(--color-meta)!important}:root:not([color-scheme]) .l_header ul.nav-list-h>li>a,:root:not([color-scheme]) ul.list-v>li>a{color:var(--color-list)!important}:root:not([color-scheme]) .blur{background:var(--color-site-bg)!important}:root:not([color-scheme]) .nav-main .u-search-input{background:var(--color-card)!important}:root:not([color-scheme]) #l_main .article .prev-next>a{background:var(--color-block)!important}:root:not([color-scheme]) #l_main .article .prev-next>a:hover{background:var(--color-card)!important}:root:not([color-scheme]) .article blockquote{background:var(--color-block)!important}:root:not([color-scheme]) .article-title a{color:var(--color-h1)!important}:root:not([color-scheme]) details>summary{color:var(--color-p)!important;background:var(--color-site-bg)!important}:root:not([color-scheme]) details{border:1px solid var(--color-site-bg)!important;background:var(--color-site-bg)!important}:root:not([color-scheme]) #u-search .modal,:root:not([color-scheme]) #u-search .modal-body,:root:not([color-scheme]) #u-search .modal-header{background:var(--color-card)!important}:root:not([color-scheme]) #u-search .modal-body .modal-results .result:hover{background:var(--color-block)!important}}[color-scheme=dark]{--color-site-body:#000;--color-read-bkg:#222;--color-read-post:#333;--color-site-bg:#222;--color-site-inner:#eee;--color-site-footer:#aaa;--color-card:#333;--color-text:#eee;--color-block:#3a3a3a;--color-codeblock:#343a3c;--color-inlinecode:#d56d28;--color-h1:#eee;--color-h2:#eee;--color-h3:#ddd;--color-h4:#ddd;--color-h5:#ddd;--color-h6:#ddd;--color-p:#bbb;--color-list:#aaa;--color-list-hl:#69dfc4;--color-meta:#888;--color-link:#888}[color-scheme=dark] img{filter:brightness(70%)!important}[color-scheme=dark] #wrapper .title{color:var(--color-meta)!important}[color-scheme=dark] .l_header ul.nav-list-h>li>a,[color-scheme=dark] ul.list-v>li>a{color:var(--color-list)!important}[color-scheme=dark] .blur{background:var(--color-site-bg)!important}[color-scheme=dark] .nav-main .u-search-input{background:var(--color-card)!important}[color-scheme=dark] #l_main .article .prev-next>a{background:var(--color-block)!important}[color-scheme=dark] #l_main .article .prev-next>a:hover{background:var(--color-card)!important}[color-scheme=dark] .article blockquote{background:var(--color-block)!important}[color-scheme=dark] .article-title a{color:var(--color-h1)!important}[color-scheme=dark] details>summary{color:var(--color-p)!important;background:var(--color-site-bg)!important}[color-scheme=dark] details{border:1px solid var(--color-site-bg)!important;background:var(--color-site-bg)!important}[color-scheme=dark] #u-search .modal,[color-scheme=dark] #u-search .modal-body,[color-scheme=dark] #u-search .modal-header{background:var(--color-card)!important}[color-scheme=dark] #u-search .modal-body .modal-results .result:hover{background:var(--color-block)!important}@media screen and (max-width:500px){[color-scheme=dark] .l_header .m_search{background:var(--color-site-bg)!important}}@font-face{font-family:hytmr;src:url(https://cdn.jsdelivr.net/gh/sizaif/blog-cdn@main/fonts/hytmr55.woff);font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:SentyGoldenBell;src:url(https://cdn.jsdelivr.net/gh/inkss/common@1/fonts/canva/SentyGoldenBell.woff2);font-weight:'normal;';font-style:'normal;';font-display:swap}.l_header{position:fixed;z-index:1000;top:0;width:100%;height:64px;background:var(--color-card);box-shadow:0 1px 2px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 1px 2px 0 rgba(0,0,0,.1)}.l_header.auto{transition:opacity .4s ease;-webkit-transition:opacity .4s ease;-khtml-transition:opacity .4s ease;-moz-transition:opacity .4s ease;-o-transition:opacity .4s ease;-ms-transition:opacity .4s ease;visibility:hidden}.l_header.auto.show{opacity:1!important;-webkit-opacity:1!important;-moz-opacity:1!important;visibility:visible}.l_header .container{margin-left:16px;margin-right:16px}.l_header #wrapper{height:100%;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.l_header #wrapper .nav-main,.l_header #wrapper .nav-sub{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-khtml-flex-wrap:nowrap;-moz-flex-wrap:nowrap;-o-flex-wrap:nowrap;-ms-flex-wrap:nowrap;justify-content:space-between;-webkit-justify-content:space-between;-khtml-justify-content:space-between;-moz-justify-content:space-between;-o-justify-content:space-between;-ms-justify-content:space-between;align-items:center}.l_header #wrapper .nav-main{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.l_header #wrapper.sub .nav-main{transform:translateY(-64px);-webkit-transform:translateY(-64px);-khtml-transform:translateY(-64px);-moz-transform:translateY(-64px);-o-transform:translateY(-64px);-ms-transform:translateY(-64px)}.l_header #wrapper .nav-sub{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;opacity:0;-webkit-opacity:0;-moz-opacity:0;height:64px;width:calc(100% - 2 * 16px);position:absolute}.l_header #wrapper .nav-sub ::-webkit-scrollbar{display:-webkit-box;display:-moz-box;display:none}@media screen and (min-width:2048px){.l_header #wrapper .nav-sub{max-width:55vw;margin:auto}}.l_header #wrapper.sub .nav-sub{opacity:1;-webkit-opacity:1;-moz-opacity:1}.l_header #wrapper .title{position:relative;color:var(--color-text);padding-left:24px;max-height:64px}.l_header #wrapper .nav-main .title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-shrink:0;line-height:64px;padding:0 24px;font-size:1.25rem;font-family:SentyGoldenBell,"Varela Round","PingFang SC","Microsoft YaHei",Helvetica,Arial,Helvetica,monospace}.l_header #wrapper .nav-main .title img{height:64px}.l_header .nav-sub{max-width:1080px;margin:auto}.l_header .nav-sub .title{font-weight:700;font-family:hytmr,UbuntuMono,"Varela Round","PingFang SC","Microsoft YaHei",Helvetica,Arial,Menlo,Monaco,monospace,sans-serif;line-height:1.2;max-height:64px;white-space:normal;flex-shrink:1}.l_header .switcher{display:-webkit-box;display:-moz-box;display:none;line-height:64px;align-items:center}.l_header .switcher .s-toc{display:-webkit-box;display:-moz-box;display:none}@media screen and (max-width:768px){.l_header .switcher .s-toc{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex}}.l_header .switcher>li{height:48px;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;margin:2px}@media screen and (max-width:500px){.l_header .switcher>li{margin:0 1px;height:48px}}.l_header .switcher>li>a{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;justify-content:center;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-o-justify-content:center;-ms-justify-content:center;align-items:center;width:48px;height:48px;padding:.85em 1.1em;border-radius:100px;-webkit-border-radius:100px;border:none;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;color:#44d7b6}.l_header .switcher>li>a:hover{border:none}.l_header .switcher>li>a.active,.l_header .switcher>li>a:active{border:none;background:var(--color-site-bg)}@media screen and (max-width:500px){.l_header .switcher>li>a{width:36px;height:48px}}.l_header .nav-sub .switcher{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex}.l_header .m_search{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;height:64px;width:240px;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}@media screen and (max-width:1024px){.l_header .m_search{width:44px;min-width:44px}.l_header .m_search input::placeholder{opacity:0;-webkit-opacity:0;-moz-opacity:0}.l_header .m_search:hover{width:240px}.l_header .m_search:hover input::placeholder{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@media screen and (min-width:500px){.l_header .m_search:hover .input{width:100%}.l_header .m_search:hover .input::placeholder{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@media screen and (max-width:500px){.l_header .m_search{min-width:0}.l_header .m_search input::placeholder{opacity:1;-webkit-opacity:1;-moz-opacity:1}}.l_header .m_search .form{position:relative;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;width:100%;align-items:center}.l_header .m_search .icon{position:absolute;width:36px;left:5px;color:var(--color-meta)}@media screen and (max-width:500px){.l_header .m_search .icon{display:-webkit-box;display:-moz-box;display:none}}.l_header .m_search .input{display:-webkit-box;display:-moz-box;display:block;padding-top:8px;padding-bottom:8px;line-height:1.3;width:100%;color:var(--color-text);background:#fafafa;box-shadow:none;-webkit-box-shadow:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;padding-left:40px;font-size:.875rem;border-radius:8px;-webkit-border-radius:8px;border:none;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}@media screen and (min-width:500px){.l_header .m_search .input:focus{box-shadow:0 4px 8px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 4px 8px 0 rgba(0,0,0,.1)}}@media screen and (max-width:500px){.l_header .m_search .input{background:var(--color-block);padding-left:8px;border:none}.l_header .m_search .input:focus,.l_header .m_search .input:hover{border:none}}@media (max-width:500px){.l_header .m_search{left:0;width:0;overflow:hidden;position:absolute;background:#fff;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.l_header .m_search .input{border-radius:32px;-webkit-border-radius:32px;margin-left:16px;padding-left:16px}.l_header.z_search-open .m_search{width:100%}.l_header.z_search-open .m_search .input{width:calc(100% - 120px)}}ul.m-pc>li>a{color:inherit;border-bottom:2px solid transparent}ul.m-pc>li>a.active,ul.m-pc>li>a:active{border-bottom:2px solid #44d7b6}ul.list-v li:hover>ul.list-v,ul.m-pc li:hover>ul.list-v{display:-webkit-box;display:-moz-box;display:block}ul.nav-list-h{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;align-items:stretch}ul.nav-list-h>li{position:relative;justify-content:center;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-o-justify-content:center;-ms-justify-content:center;height:100%;line-height:2.4;border-radius:4px;-webkit-border-radius:4px}ul.nav-list-h>li>a{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-weight:600}ul.list-v{z-index:1;display:-webkit-box;display:-moz-box;display:none;position:absolute;background:var(--color-card);box-shadow:0 2px 4px 0 rgba(0,0,0,.08),0 4px 8px 0 rgba(0,0,0,.08),0 8px 16px 0 rgba(0,0,0,.08);-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.08),0 4px 8px 0 rgba(0,0,0,.08),0 8px 16px 0 rgba(0,0,0,.08);margin-top:-6px;border-radius:4px;-webkit-border-radius:4px;padding:8px 0}ul.list-v.show{display:-webkit-box;display:-moz-box;display:block}ul.list-v hr{margin-top:8px;margin-bottom:8px}ul.list-v>li{white-space:nowrap;word-break:keep-all}ul.list-v>li.header{font-size:.78125rem;font-weight:700;line-height:2em;color:var(--color-meta);margin:8px 16px 4px}ul.list-v>li.header i{margin-right:8px}ul.list-v>li ul{margin-left:0;display:-webkit-box;display:-moz-box;display:none;margin-top:-40px}ul.list-v .aplayer-container{min-height:64px;padding:6px 16px}ul.list-v>li>a{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;display:-webkit-box;display:-moz-box;display:block;color:var(--color-list);font-size:.875rem;font-weight:700;line-height:36px;padding:0 20px 0 16px;text-overflow:ellipsis;margin:0 4px;border-radius:4px;-webkit-border-radius:4px}@media screen and (max-width:1024px){ul.list-v>li>a{line-height:40px}}ul.list-v>li>a>i{margin-right:8px}ul.list-v>li>a.active,ul.list-v>li>a:active{color:var(--color-list-hl)}ul.list-v>li>a:hover{color:var(--color-list-hl);background:var(--color-site-bg)}.l_header .menu>ul>li>a{display:-webkit-box;display:-moz-box;display:block;padding:0 8px}.l_header .menu>ul>li>a>i{margin-right:4px}.l_header ul.nav-list-h>li{color:var(--color-list);line-height:64px}.l_header ul.nav-list-h>li>a{max-height:64px;overflow:hidden;color:inherit}.l_header ul.nav-list-h>li>a.active,.l_header ul.nav-list-h>li>a:active{color:#44d7b6}.l_header ul.nav-list-h>li:hover>a{color:var(--color-list-hl)}.l_header ul.nav-list-h>li i.music{animation:rotate-effect 1.5s linear infinite;-webkit-animation:rotate-effect 1.5s linear infinite;-khtml-animation:rotate-effect 1.5s linear infinite;-moz-animation:rotate-effect 1.5s linear infinite;-o-animation:rotate-effect 1.5s linear infinite;-ms-animation:rotate-effect 1.5s linear infinite}@-moz-keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}@-webkit-keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}@-o-keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}@keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}.menu-phone li ul.list-v{right:calc(100% - .5 * 16px)}.menu-phone li ul.list-v ul{right:calc(100% - .5 * 16px)}#wrapper{max-width:1080px;margin:auto}@media screen and (min-width:2048px){#wrapper{max-width:55vw}}#wrapper .menu{-webkit-box-flex:1;-moz-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;margin:0 16px 0 0}#wrapper .menu .list-v ul{left:calc(100% - .5 * 16px)}.menu-phone{display:-webkit-box;display:-moz-box;display:none;margin-top:16px;right:8px;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.menu-phone ul{right:calc(100% - .5 * 16px)}@media screen and (max-width:500px){.menu-phone{display:-webkit-box;display:-moz-box;display:block}}.l_header{max-width:65vw;left:calc((100% - 65vw) * .5);border-bottom-left-radius:8px;border-bottom-right-radius:8px}@media screen and (max-width:2048px){.l_header{max-width:1112px;left:calc((100% - 1112px) * .5)}}@media screen and (max-width:1112px){.l_header{left:0;border-radius:0;-webkit-border-radius:0;max-width:100%}}@media screen and (max-width:500px){.l_header .container{margin-left:0;margin-right:0}.l_header #wrapper .nav-main .title{padding-left:16px;padding-right:16px}.l_header #wrapper .nav-sub{width:100%}.l_header #wrapper .nav-sub .title{overflow-y:scroll;margin-top:2px;padding:8px 16px}.l_header #wrapper .switcher{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;margin-right:8px}.l_header .menu{display:-webkit-box;display:-moz-box;display:none}}@media screen and (max-width:500px){.list-v li{max-width:270px}}#u-search{display:-webkit-box;display:-moz-box;display:none;position:fixed;top:0;left:0;width:100%;height:100%;padding:60px 20px;z-index:1001}@media screen and (max-width:680px){#u-search{padding:0}}@media screen and (prefers-color-scheme:dark) and (max-width:500px){.l_header .m_search{background:var(--color-site-bg)!important}}</style><link rel="stylesheet" href="/css/style.css?time=1710817994317" media="print" onload='this.media="all",this.onload=null'><noscript><link rel="stylesheet" href="/css/style.css?time=1710817994317"></noscript><script>var userColorScheme=localStorage.getItem("color-scheme");userColorScheme&&document.documentElement.setAttribute("color-scheme",userColorScheme)</script><noscript><style>html{overflow-x:hidden!important;overflow-y:hidden!important}.kill-noscript{text-align:center;height:100%;margin-top:15%;margin-bottom:5500%}.kill-t{font-size:2rem}.kill-c{font-size:1.2rem}#l_body,#l_header{display:none}</style><div class="kill-noscript"> <span class="kill-t"><b>抱歉，您的浏览器无法访问本站</b></span><br> <span class="kill-c">本页面需要浏览器支持（启用）JavaScript</span><br> <a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=启用JavaScript"><strong>了解详情 ></strong></a></div></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><header itemscope itemtype="http://schema.org/WPHeader" id="l_header" class="l_header auto shadow blur show" style="opacity:0"><div class="container"><div id="wrapper"><div class="nav-sub"><p class="title"></p><ul class="switcher nav-list-h m-phone" id="pjax-header-nav-list"><li><a id="s-comment" class="fas fa-comments fa-fw" target="_self" href="/" onclick="return!1" title="comment"></a></li><li><a id="s-toc" class="s-toc fas fa-list fa-fw" target="_self" href="/" onclick="return!1" title="toc"></a></li></ul></div><div class="nav-main"> <a class="title flat-box" target="_self" href="/">Sizaif's blog</a><div class="menu navigation"><ul class="nav-list-h m-pc"><li><a class="menuitem flat-box faa-parent animated-hover" href="/" active-action="action-home"><i class="fad fa-home fa-fw WISTERIA fa-fw"></i> 博客</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return!1" title="Click me!"><i class="fal fa-grip-horizontal NEPHRITIS fa-fw"></i> 导航</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="/navigation/archives/" active-action="action-navigationarchives"><i class="fad fa-list-alt BELIZEHOLE fa-fw"></i> 文章归档</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/navigation/categories/" active-action="action-navigationcategories"><i class="fad fa-folder-open SUNFLOWER fa-fw"></i> 分类列表</a></li><hr><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/notes/" active-action="action-pagenotes"><i class="fal fa-books CARROT fa-fw"></i> 小小笔记</a></li></ul></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/friends/" active-action="action-pagefriends"><i class="fad fa-link ORANGE fa-fw"></i> 小伙伴</a></li><li><a class="menuitem flat-box" href="/" onclick="return!1" title="Click me!"><i class="fad fa-compact-disc PINK fa-fw music"></i> 随心听</a><ul class="list-v"><li><div class="aplayer-container"><meting-js theme="#1BCDFC" autoplay="true" volume="0.7" loop="all" order="random" fixed="false" list-max-height="320px" server="tencent" type="playlist" id="8110970572" list-folded="true"></meting-js></div></li></ul></li><li></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return!1" title="Click me!"><i class="fad fa-ellipsis-v fa-fw POMEGRANATE fa-fw"></i> 更多</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/about/" active-action="action-pageabout"><i class="fad fa-info-circle CARROT fa-fw"></i> 关于</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/history/" active-action="action-pagehistory"><i class="fad fa-history PUMPKIN fa-fw"></i> 时间轴</a></li><hr><li><a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return!1" title="Click me!"><i class="fad fa-fighter-jet NEPHRITIS fa-fw"></i> 快速导航</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="https://github.com/sizaif" active-action="action-https:githubcomsizaif"><i class="fad fa-code-merge LightBlue fa-fw"></i> GitHub</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="https://blog.csdn.net/sizaif" active-action="action-https:blogcsdnnetsizaif"><i class="fad fa-blog CYAN fa-fw"></i> CSDN</a></li></ul></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return!1" title="Click me!"><i class="fad fa-book-reader NEPHRITIS fa-fw"></i> docker手册</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/clubmanualv1/" active-action="action-pageclubmanualv1"><i class="fad fa-journal-whills LightBlue fa-fw"></i> Clubmanualv1</a></li></ul></li><hr></ul></li></ul></div><div class="m_search"><form name="searchform" class="form u-search-form"><i class="icon fas fa-search fa-fw"></i> <input type="text" class="input u-search-input" placeholder="想找什么呢"></form></div><ul class="switcher nav-list-h m-phone"><li><a class="s-search fas fa-search fa-fw" target="_self" href="/" onclick="return!1" title="search"></a></li><li><a class="s-menu fas fa-bars fa-fw" target="_self" href="/" onclick="return!1" title="menu"></a><ul class="menu-phone list-v navigation white-box"><li><a class="menuitem flat-box faa-parent animated-hover" href="/" active-action="action-home"><i class="fad fa-home fa-fw WISTERIA fa-fw"></i> 博客</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return!1" title="Click me!"><i class="fal fa-grip-horizontal NEPHRITIS fa-fw"></i> 导航</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="/navigation/archives/" active-action="action-navigationarchives"><i class="fad fa-list-alt BELIZEHOLE fa-fw"></i> 文章归档</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/navigation/categories/" active-action="action-navigationcategories"><i class="fad fa-folder-open SUNFLOWER fa-fw"></i> 分类列表</a></li><hr><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/notes/" active-action="action-pagenotes"><i class="fal fa-books CARROT fa-fw"></i> 小小笔记</a></li></ul></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/friends/" active-action="action-pagefriends"><i class="fad fa-link ORANGE fa-fw"></i> 小伙伴</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return!1" title="Click me!"><i class="fad fa-ellipsis-v fa-fw POMEGRANATE fa-fw"></i> 更多</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/about/" active-action="action-pageabout"><i class="fad fa-info-circle CARROT fa-fw"></i> 关于</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/history/" active-action="action-pagehistory"><i class="fad fa-history PUMPKIN fa-fw"></i> 时间轴</a></li><hr><li><a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return!1" title="Click me!"><i class="fad fa-fighter-jet NEPHRITIS fa-fw"></i> 快速导航</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="https://github.com/sizaif" active-action="action-https:githubcomsizaif"><i class="fad fa-code-merge LightBlue fa-fw"></i> GitHub</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="https://blog.csdn.net/sizaif" active-action="action-https:blogcsdnnetsizaif"><i class="fad fa-blog CYAN fa-fw"></i> CSDN</a></li></ul></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return!1" title="Click me!"><i class="fad fa-book-reader NEPHRITIS fa-fw"></i> docker手册</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/clubmanualv1/" active-action="action-pageclubmanualv1"><i class="fad fa-journal-whills LightBlue fa-fw"></i> Clubmanualv1</a></li></ul></li><hr></ul></li></ul></li></ul></div></div></div></header><div id="l_body"><div id="l_cover"><div id="none" class="cover-wrapper post dock" style="display:none"><div class="cover-bg lazyload placeholder" data-bg="https://cdn.jsdelivr.net/gh/sizaif/blog-cdn@main/img/bkg/crop02.webp"></div><div class="cover-body"><div class="top"><p class="title">Sizaif</p><p class="subtitle">Keep learning and progress!</p></div><div class="bottom"><div class="menu navigation"><div class="list-h"><a href="/" active-action="action-home"><i class="fad fa-home fa-fw BELIZEHOLE fa-fw"></i><p>首页</p></a><a href="/navigation/categories/" active-action="action-navigationcategories"><i class="fad fa-folder-open EMERALD fa-fw"></i><p>分类</p></a><a href="/navigation/archives/" active-action="action-navigationarchives"><i class="fad fa-archive PETERRIVE fa-fw"></i><p>归档</p></a><a href="/page/friends/" active-action="action-pagefriends"><i class="fad fa-link AMETHYST fa-fw"></i><p>小伙伴</p></a><a href="/page/about/" active-action="action-pageabout"><i class="fad fa-book-reader TURQUOISE fa-fw"></i><p>关于我</p></a></div></div></div></div><div id="scroll-down" style="display:none"><i class="fa fa-chevron-down scroll-down-effects"></i></div></div></div><div id="safearea"><div class="body-wrapper" id="pjax-container"><div id="l_main" class=""><article itemscope itemtype="http://schema.org/Article" class="article post white-box reveal md shadow article-type-post" id="post" itemscope itemprop="blogPost"><link itemprop="mainEntityOfPage" href="https://www.sizaif.com/posts/9959b7cc/"><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Sizaif's Blog"></span><span hidden><meta itemprop="image" content="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png"></span><div class="article-meta" id="top"><h1 class="title" itemprop="name headline"> SEAL学习第一天-Bfv_basics使用用法</h1><div class="new-meta-box"><div class="new-meta-item author" itemprop="author" itemscope itemtype="http://schema.org/Person"> <a itemprop="url" class="author" href="/page/about/" rel="nofollow"><img itemprop="image" src="/img/avatar.webp" class="lazyload" data-srcset="/img/avatar.webp" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="This is a picture without description"><p itemprop="name">sizaif</p></a></div><div class="new-meta-item category"><i class="fad fa-folder-open NEPHRITIS fa-fw" aria-hidden="true"></i> <a class="category-link" href="/navigation/categories/%E6%8A%80%E6%9C%AF%E5%90%91/">技术向</a><span class="sep"></span><a class="category-link" href="/navigation/categories/%E6%8A%80%E6%9C%AF%E5%90%91/Microsoft-SEAL/">Microsoft SEAL</a> <span hidden itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/navigation/categories/%E6%8A%80%E6%9C%AF%E5%90%91/" itemprop="url"><span itemprop="name">技术向</span></a></span> <span hidden itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/navigation/categories/%E6%8A%80%E6%9C%AF%E5%90%91/Microsoft-SEAL/" itemprop="url"><span itemprop="name">Microsoft SEAL</span></a></span></div><div class="new-meta-item browse leancloud"><a class="notlink" href="/" onclick="return!1" title="Click me!"><div id="lc-pv" data-title="SEAL学习第一天-Bfv_basics使用用法" data-path="/posts/9959b7cc/"><i class="fad fa-eye GREENSEA fa-fw" aria-hidden="true"></i><span id="number"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span> 次浏览</div></a></div><div class="new-meta-item wordcount"><a class="notlink" href="/" onclick="return!1" title="Click me!"><i class="fad fa-keyboard BELIZEHOLE fa-fw" aria-hidden="true"></i><p>字数：3.1k 字</p></a></div><div class="new-meta-item readtime"><a class="notlink" href="/" onclick="return!1" title="Click me!"><i class="fad fa-hourglass-half PETERRIVE fa-fw" aria-hidden="true"></i><p>时长：16 分钟</p></a></div></div></div><div id="layoutHelper-page-plugins"></div><div id="post-body" itemprop="articleBody"><blockquote><p>@auther by sizaif</p></blockquote><h1>SEAL学习第一天： bfv_basics使用用法</h1><p>@<a href="%E7%9B%AE%E5%BD%95">TOC</a></p><h1>bfv_basics</h1><h2 id="一-parms类">一 parms类</h2><div class="story post-story"><blockquote><p>创建一个HE方案类</p><p>parms类需要的3个参数</p><ul><li>poly_modulus_degree (degree of polynomial modulus 多项式模的次数);</li><li>coeff_modulus ([ciphertext] coefficient modulus 系数模);</li><li>plain_modulus (plaintext modulus; only for the BFV scheme). MOD X, 将结果MOD到X内</li></ul></blockquote><table><thead><tr><th>用法</th><th>参数</th><th>解释说明</th></tr></thead><tbody><tr><td>EncryptionParameters parms();</td><td>scheme_type::bfv</td><td>创建一个HE以BFV方案类</td></tr><tr><td>size_t poly_modulus_degree = 4096;</td><td>integear</td><td>[size_t poly_modulus_degree](###size_t poly_modulus_degree)</td></tr><tr><td>parms.set_poly_modulus_degree();</td><td>poly_modulus_degree</td><td></td></tr><tr><td>parms.set_coeff_modulus()；</td><td>CoeffModulus::BFVDefault(poly_modulus_degree)</td><td><a href="###coeff_modulus">poly_modulus_degree</a></td></tr><tr><td>parms.set_plain_modulus(1024);</td><td>integear</td><td><a href="###MOD">MOD</a></td></tr><tr><td>context.parameter_error_message()</td><td></td><td>输出报错信息</td></tr><tr><td>SEALContext context(parms);</td><td></td><td><a href="####%E6%BC%94%E7%A4%BAcode">创建SEALContext类</a></td></tr></tbody></table><p><strong>EncryptionParameters parms(scheme_type::bfv);</strong></p><pre><code>The BFV scheme cannot perform arbitrary computations on encrypted data.
Instead, each ciphertext has a specific quantity called the `invariant noise
budget' -- or `noise budget' for short -- measured in bits. The noise budget
in a freshly encrypted ciphertext (initial noise budget) is determined by
the encryption parameters. Homomorphic operations consume the noise budget
at a rate also determined by the encryption parameters. In BFV the two basic
operations allowed on encrypted data are additions and multiplications, of
which additions can generally be thought of as being nearly free in terms of
noise budget consumption compared to multiplications. Since noise budget
consumption compounds in sequential multiplications, the most significant
factor in choosing appropriate encryption parameters is the multiplicative
depth of the arithmetic circuit that the user wants to evaluate on encrypted
data. Once the noise budget of a ciphertext reaches zero it becomes too
corrupted to be decrypted. Thus, it is essential to choose the parameters to
be large enough to support the desired computation; otherwise the result is
impossible to make sense of even with the secret key.
基本运算: 加法 和乘法 
In BFV the two basic operations allowed on encrypted data are additions and multiplications
</code></pre><p>基本运算: 加法 和乘法</p><p><strong>size_t poly_modulus_degree = 4096;</strong></p><h3 id="size-t-poly-modulus-degree">size_t poly_modulus_degree</h3><p>多项式模”的次数,2的倍数;1024, 2048, 4096, 8192, 16384, 32768,</p><p><strong>parms.set_poly_modulus_degree(poly_modulus_degree);</strong></p><p><strong>parms.set_coeff_modulus(CoeffModulus::BFVDefault(poly_modulus_degree));</strong></p><h3 id="coeff-modulus">coeff_modulus</h3><details green><summary> code</summary><div class="content"><p>[ciphertext] `coefficient modulus’ (coeff_modulus) [密文]‘系数模量’ (coeff_modulus)</p><p>Microsoft SEAL comes with helper functions for selecting the coeff_modulus.<br>For new users the easiest way is to simply use<br>简单调用:<br>CoeffModulus::BFVDefault(poly_modulus_degree),<br>返回vector类型<br>which returns std::vector<modulus> consisting of a generally good choice<br>for the given poly_modulus_degree.<br>模长度对应素数长度<br>±---------------------------------------------------+<br>| poly_modulus_degree | max coeff_modulus bit-length |<br>±--------------------±-----------------------------+<br>| 1024 | 27 |<br>| 2048 | 54 |<br>| 4096 | 109 |<br>| 8192 | 218 |<br>| 16384 | 438 |<br>| 32768 | 881 |<br>±--------------------±-----------------------------+</modulus></p></div></details><p><strong>parms.set_plain_modulus(1024);</strong></p><h3 id="MOD">MOD</h3><pre><code>    ~ log2(coeff_modulus/plain_modulus) (bits)
噪声预算计算方式:
and the noise budget consumption in a homomorphic multiplication is of the
form log2(plain_modulus) + (other terms).
明文模量是BFV格式特有的，使用CKKS格式时不能设置明文模量。
</code></pre><p>既然所有参数都设置好了，我们就可以构建一个SEALContext了<br> 对象。类的有效性和属性是一个重类 我们刚刚设置的参数。</p><h4 id="演示code">演示code</h4><pre class="language-c" data-language="c"><code class="language-c">   EncryptionParameters <span class="token function">parms</span><span class="token punctuation">(</span>scheme_type<span class="token operator">::</span>bfv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//声明HE 使用的模式</span>
   <span class="token comment">// 设置 3 个参数</span>
   <span class="token class-name">size_t</span> poly_modulus_degree <span class="token operator">=</span> <span class="token number">4096</span><span class="token punctuation">;</span>
   parms<span class="token punctuation">.</span><span class="token function">set_poly_modulus_degree</span><span class="token punctuation">(</span>poly_modulus_degree<span class="token punctuation">)</span><span class="token punctuation">;</span>
   parms<span class="token punctuation">.</span><span class="token function">set_coeff_modulus</span><span class="token punctuation">(</span>CoeffModulus<span class="token operator">::</span><span class="token function">BFVDefault</span><span class="token punctuation">(</span>poly_modulus_degree<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   parms<span class="token punctuation">.</span><span class="token function">set_plain_modulus</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 明文 MOD数 (2的倍数, 素数最好)</span>

   <span class="token comment">//创建一个context</span>
   SEALContext <span class="token function">context</span><span class="token punctuation">(</span>parms<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//当使用参数创建SEALContext时，Microsoft SEAL将首先创建验证这些参数。这里选择的参数是有效的。</span>

cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Parameter validation (success): "</span> <span class="token operator">&lt;&lt;</span> context<span class="token punctuation">.</span><span class="token function">parameter_error_message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span></code></pre></div><h2 id="二-KeyGenerator类">二 KeyGenerator类</h2><div class="story post-story"><p>公钥加密方案有一个用于加密数据的单独的公钥，和一个用于解密数据的单独的秘密密钥。</p><p>我们需要KeyGenerator类的一个实例。构造密钥生成器会自动生成一个密钥。然后，我们可以使用</p><p>KeyGenerator::create_public_key为它创建尽可能多的公钥。</p><table><thead><tr><th>用法</th><th>参数</th><th>解释说明</th></tr></thead><tbody><tr><td>KeyGenerator keygen(context);</td><td>SEALContext</td><td>创建一个钥匙生成器</td></tr><tr><td>SecretKey secret_key = keygen.secret_key();</td><td></td><td>创造一个私钥</td></tr><tr><td>PublicKey public_key;</td><td></td><td>声明一个公钥</td></tr><tr><td>keygen.create_public_key(public_key);</td><td></td><td>创造一个公钥</td></tr><tr><td>Encryptor encryptor();</td><td>SEALContext，PublicKey</td><td>构造Encryptor的一个实例</td></tr><tr><td>Evaluator evaluator();</td><td>SEALContext</td><td>对密文的计算使用Evaluator类执行</td></tr><tr><td>Decryptor decryptor();</td><td>SEALContext，SecretKey</td><td>构造Decryptor类的一个实例</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><pre class="language-none"><code class="language-none">Note that KeyGenerator::create_public_key has another overload that takes
no parameters and returns a Serializable&lt;PublicKey&gt; object. We will discuss
this in &#96;6_serialization.cpp&#39;.</code></pre><p>为了能够加密，我们需要构造Encryptor的一个实例,注意，加密器只需要公钥，</p><p>​ Encryptor encryptor(contest,public_key);</p><p>对密文的计算使用Evaluator类执行,Evaluator不会由持有密钥的同一方构造。</p><p>​ Evaluator evaluator(context);</p><p>当然，我们希望对结果进行解密，以验证一切工作正常，因此还需要构造Decryptor类的一个实例。注意，解密器需要密钥。</p><p>​ Decryptor decryptor(context, secret_key);</p><h4 id="演示code-2">演示code</h4><details green><summary> code</summary><div class="content"><pre class="language-c" data-language="c"><code class="language-c">Ciphertext x_encrypted<span class="token punctuation">;</span> <span class="token comment">// 密文</span>

encryptor<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>x_plain<span class="token punctuation">,</span> x_encrypted<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将明文 x_plain 加密输出到密文x_encrypted上</span>

Plaintext x_decrypted<span class="token punctuation">;</span>

decryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>x_encrypted<span class="token punctuation">,</span> x_decrypted<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 解密 将加密密文,输出覆盖到明文上</span>

cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Compute x_sq_plus_one (x^2+1)."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

Ciphertext x_sq_plus_one<span class="token punctuation">;</span>
evaluator<span class="token punctuation">.</span><span class="token function">square</span><span class="token punctuation">(</span>x_encrypted<span class="token punctuation">,</span> x_sq_plus_one<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 计算平方, 结果输出到 x_sq_plus_one 中</span>

Plaintext <span class="token function">plain_one</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 明文 1</span>
    <span class="token comment">/**
    加密的乘法导致输出密文的大小增加。
    更准确地说，如果输入密文的大小为M和N，则输出
    同态乘法后的密文大小为M+N-1。
    **/</span>
</code></pre></div></details></div><h2 id="线性化-Relinearization">线性化 Relinearization</h2><div class="story post-story"><blockquote><p>`Relinearization’ is an operation that reduces the size of a ciphertext after<br> multiplication back to the initial size, 2. Thus, relinearizing one or both<br> input ciphertexts before the next multiplication can have a huge positive<br> impact on both noise growth and performance, even though relinearization has<br> a significant computational cost itself. It is only possible to relinearize<br> size 3 ciphertexts down to size 2, so often the user would want to relinearize<br> after each multiplication to keep the ciphertext sizes at 2.</p><p>Relinearization requires special `relinearization keys’, which can be thought<br> of as a kind of public key. Relinearization keys can easily be created with<br> the KeyGenerator.<br> “重新线性化”是一种减少密文大小的操作。<br> 乘法返回初始大小2。因此，重新线性化一个或两个<br> 下一个乘法之前的输入密文可以具有很大的正数<br> 即使重新线性化已对噪声增长和性能产生影响<br> 巨大的计算成本本身。 只能重新线性化<br> 大小为3的密文，大小减小为2，因此用户经常需要重新线性化<br> 每次乘法后，将密文大小保持为2。</p><p>重新线性化需要特殊的“重新线性化键”，可以认为<br> 作为一种公钥。 重新线性化键可以轻松创建<br> KeyGenerator。</p></blockquote><p>线性化用法</p><table><thead><tr><th>用法</th><th>参数</th><th>解释说明</th></tr></thead><tbody><tr><td>RelinKeys relin_keys;</td><td></td><td>声明线性化类</td></tr><tr><td>keygen.create_relin_keys(relin_keys);</td><td>(RelinKeys)</td><td>创建一个线性密钥</td></tr><tr><td>evaluator.relinearize_inplace(x_squared, relin_keys);</td><td>(Ciphertext，RelinKeys)</td><td>将计算结果重新线性化大小到2以内</td></tr></tbody></table><h4 id="演示Code">演示Code</h4><details green><summary> code</summary><div class="content"><pre class="language-c" data-language="c"><code class="language-c"><span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Compute and relinearize x_squared (x^2),"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token function">string</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"then compute x_sq_plus_one (x^2+1)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    Ciphertext x_squared<span class="token punctuation">;</span>

    evaluator<span class="token punctuation">.</span><span class="token function">square</span><span class="token punctuation">(</span>x_encrypted<span class="token punctuation">,</span> x_squared<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of x_squared: "</span> <span class="token operator">&lt;&lt;</span> x_squared<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    
    evaluator<span class="token punctuation">.</span><span class="token function">relinearize_inplace</span><span class="token punctuation">(</span>x_squared<span class="token punctuation">,</span> relin_keys<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 重新线性化大小到2以内</span>
    
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of x_squared (after relinearization): "</span> <span class="token operator">&lt;&lt;</span> x_squared<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> 

    evaluator<span class="token punctuation">.</span><span class="token function">add_plain</span><span class="token punctuation">(</span>x_squared<span class="token punctuation">,</span> plain_one<span class="token punctuation">,</span> x_sq_plus_one<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x_sq_plus_one = x_squared +  plain_one;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + noise budget in x_sq_plus_one: "</span> <span class="token operator">&lt;&lt;</span> decryptor<span class="token punctuation">.</span><span class="token function">invariant_noise_budget</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bits"</span>
        <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + decryption of x_sq_plus_one: "</span><span class="token punctuation">;</span>

    decryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">,</span> decrypted_result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss2<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss2 <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss2 <span class="token operator">>></span> d2<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hex: 0x"</span> <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" Integer: "</span><span class="token operator">&lt;&lt;</span>d2<span class="token operator">&lt;&lt;</span><span class="token string">" ...... Correct. (x^2 + 1 ) "</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre></div></details><h1>源代码</h1><details green><summary> code</summary><div class="content"><pre class="language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"seal/seal.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"examples.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>

using namespace std<span class="token punctuation">;</span>
using namespace seal<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token function">print_example_banner</span><span class="token punctuation">(</span><span class="token string">"Example: BFV Basics"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    EncryptionParameters <span class="token function">parms</span><span class="token punctuation">(</span>scheme_type<span class="token operator">::</span>bfv<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//声明HE 使用的模式</span>
    <span class="token comment">// 设置 3 个参数</span>
    <span class="token class-name">size_t</span> poly_modulus_degree <span class="token operator">=</span> <span class="token number">4096</span><span class="token punctuation">;</span>
    parms<span class="token punctuation">.</span><span class="token function">set_poly_modulus_degree</span><span class="token punctuation">(</span>poly_modulus_degree<span class="token punctuation">)</span><span class="token punctuation">;</span>
    parms<span class="token punctuation">.</span><span class="token function">set_coeff_modulus</span><span class="token punctuation">(</span>CoeffModulus<span class="token operator">::</span><span class="token function">BFVDefault</span><span class="token punctuation">(</span>poly_modulus_degree<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    parms<span class="token punctuation">.</span><span class="token function">set_plain_modulus</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 明文 MOD数 (2的倍数, 素数最好)</span>

    <span class="token comment">//创建一个context</span>
    SEALContext <span class="token function">context</span><span class="token punctuation">(</span>parms<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Set encryption parameters and print"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token function">print_parameters</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hello World!"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Parameter validation (success): "</span> <span class="token operator">&lt;&lt;</span> context<span class="token punctuation">.</span><span class="token function">parameter_error_message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~~~~~~ A naive way to calculate 4(x^2+1)(x+1)^2. ~~~~~~"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    KeyGenerator <span class="token function">keygen</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 密钥类</span>
    SecretKey secret_key <span class="token operator">=</span> keygen<span class="token punctuation">.</span><span class="token function">secret_key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建私钥</span>
    PublicKey public_key<span class="token punctuation">;</span>
    keygen<span class="token punctuation">.</span><span class="token function">create_public_key</span><span class="token punctuation">(</span>public_key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建公钥</span>


    Encryptor <span class="token function">encryptor</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> public_key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 加密类,只需要公钥即可;</span>


    Evaluator <span class="token function">evaluator</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 评估计算类</span>

    Decryptor <span class="token function">decryptor</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> secret_key<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 解密类</span>
    <span class="token comment">/**
    4x^4 + 8x^3 + 8x^2 + 8x + 4
    **/</span>

    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    Plaintext <span class="token function">x_plain</span><span class="token punctuation">(</span><span class="token function">to_string</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//x_plain.to_string() 转换成16进制输出</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Express x = "</span> <span class="token operator">+</span> <span class="token function">to_string</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" as a plaintext polynomial 0x"</span> <span class="token operator">+</span> x_plain<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    
    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Ciphertext x_encrypted<span class="token punctuation">;</span><span class="token comment">// 密文类</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Encrypt x_plain to x_encrypted."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    encryptor<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>x_plain<span class="token punctuation">,</span> x_encrypted<span class="token punctuation">)</span><span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of freshly encrypted x: "</span> <span class="token operator">&lt;&lt;</span> x_encrypted<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token comment">/*
There is plenty of noise budget left in this freshly encrypted ciphertext. 噪声预算，当噪音预算降低到0的时候，计算结果不正确
*/</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + noise budget in freshly encrypted x: "</span> <span class="token operator">&lt;&lt;</span> decryptor<span class="token punctuation">.</span><span class="token function">invariant_noise_budget</span><span class="token punctuation">(</span>x_encrypted<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bits"</span>
        <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    Plaintext x_decrypted<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + decryption of x_encrypted: "</span><span class="token punctuation">;</span>
    decryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>x_encrypted<span class="token punctuation">,</span> x_decrypted<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"0x"</span> <span class="token operator">&lt;&lt;</span> x_decrypted<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" ...... Correct."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Compute x_sq_plus_one (x^2+1)."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    
    Ciphertext x_sq_plus_one<span class="token punctuation">;</span>
    evaluator<span class="token punctuation">.</span><span class="token function">square</span><span class="token punctuation">(</span>x_encrypted<span class="token punctuation">,</span> x_sq_plus_one<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 计算平方, 结果输出到 x_sq_plus_one 中</span>
    Plaintext <span class="token function">plain_one</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 明文 1</span>
    evaluator<span class="token punctuation">.</span><span class="token function">add_plain_inplace</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">,</span> plain_one<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x_sq_plus_one = x_sq_plus_one + plain_one</span>
    
    <span class="token comment">/**
    加密的乘法导致输出密文的大小增加。
    更准确地说，如果输入密文的大小为M和N，则输出
    同态乘法后的密文大小为M+N-1。
    **/</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of x_sq_plus_one: "</span> <span class="token operator">&lt;&lt;</span> x_sq_plus_one<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + noise budget in x_sq_plus_one: "</span> <span class="token operator">&lt;&lt;</span> decryptor<span class="token punctuation">.</span><span class="token function">invariant_noise_budget</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bits"</span>
        <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token comment">/*
    * 计算4个多项式样例
    * 4x^4 + 8x^3 + 8x^2 + 8x + 4
    * 4x^4 + 8x^3 + 8x^2 + 8x + 4 = 4(x + 1)^2 * (x^2 + 1) 转换成 4(x + 1)^2 * (x^2 + 1) 降低多项式系数
    */</span>
    stringstream ss2<span class="token punctuation">;</span><span class="token comment">//字符串流 ,做字符转换用</span>
    <span class="token keyword">int</span> d2<span class="token punctuation">;</span>
    <span class="token comment">// 密文计算(x^2+1)  的解密结果为:</span>
    Plaintext decrypted_result<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + decryption of x_sq_plus_one : "</span><span class="token punctuation">;</span>
    decryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">,</span> decrypted_result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss2<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss2 <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 十六进制输出到ss2，</span>
    ss2 <span class="token operator">>></span> d2<span class="token punctuation">;</span> <span class="token comment">// ss2 输出十进制到 d2</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"HEX: 0x"</span> <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" Integer: "</span> <span class="token operator">&lt;&lt;</span> d2 <span class="token operator">&lt;&lt;</span> <span class="token string">" .... Correct. "</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token comment">/*
    接着密文计算 (x + 1)^2.
    */</span>
    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Compute x_plus_one_sq ((x+1)^2)."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    Ciphertext x_plus_one_sq<span class="token punctuation">;</span>
    evaluator<span class="token punctuation">.</span><span class="token function">add_plain</span><span class="token punctuation">(</span>x_encrypted<span class="token punctuation">,</span> plain_one<span class="token punctuation">,</span> x_plus_one_sq<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//密文 x_plus_one_sq = x_encrypted + plain_one (x+1)</span>
    evaluator<span class="token punctuation">.</span><span class="token function">square_inplace</span><span class="token punctuation">(</span>x_plus_one_sq<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  x_plus_one_sq = x_plus_one_sq * x_plus_one_sq;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of x_plus_one_sq: "</span> <span class="token operator">&lt;&lt;</span> x_plus_one_sq<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + noise budget in x_plus_one_sq: "</span> <span class="token operator">&lt;&lt;</span> decryptor<span class="token punctuation">.</span><span class="token function">invariant_noise_budget</span><span class="token punctuation">(</span>x_plus_one_sq<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bits"</span>
        <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + decryption of x_plus_one_sq: "</span><span class="token punctuation">;</span>
    decryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>x_plus_one_sq<span class="token punctuation">,</span> decrypted_result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss2<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss2 <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 十六进制输出到ss2，</span>
    ss2 <span class="token operator">>></span> d2<span class="token punctuation">;</span> <span class="token comment">// ss2 输出十进制到 d2</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"Hex: Ox"</span><span class="token operator">&lt;&lt;</span>decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">" Integer: "</span><span class="token operator">&lt;&lt;</span>d2<span class="token operator">&lt;&lt;</span><span class="token string">" .... Correct. "</span>  <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>


    <span class="token comment">/*
        最终计算 (x^2 + 1) * (x + 1)^2 * 4.
    */</span>
    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Compute encrypted_result (4(x^2+1)(x+1)^2)."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    Ciphertext encrypted_result<span class="token punctuation">;</span>
    Plaintext <span class="token function">plain_four</span><span class="token punctuation">(</span><span class="token string">"4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    evaluator<span class="token punctuation">.</span><span class="token function">multiply_plain_inplace</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">,</span> plain_four<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x_sq_plus_one = x_sq_plus_one * 4;</span>
    evaluator<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">,</span> x_plus_one_sq<span class="token punctuation">,</span> encrypted_result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  密文encrypted_result = x_sq_plus_one * x_plus_one_sq ;</span>
    
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of encrypted_result: "</span> <span class="token operator">&lt;&lt;</span> encrypted_result<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + noise budget in encrypted_result: "</span> <span class="token operator">&lt;&lt;</span> decryptor<span class="token punctuation">.</span><span class="token function">invariant_noise_budget</span><span class="token punctuation">(</span>encrypted_result<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bits"</span>
        <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"NOTE: Decryption can be incorrect if noise budget is zero."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"~~~~~~ A better way to calculate 4(x^2+1)(x+1)^2. ~~~~~~"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    decryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>encrypted_result<span class="token punctuation">,</span> decrypted_result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    stringstream ss3<span class="token punctuation">;</span>
    ss3<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss3 <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss3 <span class="token operator">>></span> d2<span class="token punctuation">;</span> <span class="token comment">// ss2 输出十进制到 d2</span>
    cout <span class="token operator">&lt;&lt;</span> d2 <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">// 得到的结果不正确</span>

    <span class="token comment">/*
    * 利用Relinearization 线性化 对运算进行优化
    */</span>
    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Generate relinearization keys."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    RelinKeys relin_keys<span class="token punctuation">;</span> <span class="token comment">// 做线性化类</span>
    keygen<span class="token punctuation">.</span><span class="token function">create_relin_keys</span><span class="token punctuation">(</span>relin_keys<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建线性化密钥</span>
    <span class="token comment">/*
        We now repeat the computation relinearizing after each multiplication.
        我们在每次乘法之后重复重新线性化的计算。
    */</span>
    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Compute and relinearize x_squared (x^2),"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token function">string</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"then compute x_sq_plus_one (x^2+1)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    Ciphertext x_squared<span class="token punctuation">;</span>

    evaluator<span class="token punctuation">.</span><span class="token function">square</span><span class="token punctuation">(</span>x_encrypted<span class="token punctuation">,</span> x_squared<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of x_squared: "</span> <span class="token operator">&lt;&lt;</span> x_squared<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    
    evaluator<span class="token punctuation">.</span><span class="token function">relinearize_inplace</span><span class="token punctuation">(</span>x_squared<span class="token punctuation">,</span> relin_keys<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 重新线性化大小到2以内</span>
    
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of x_squared (after relinearization): "</span> <span class="token operator">&lt;&lt;</span> x_squared<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> 

    evaluator<span class="token punctuation">.</span><span class="token function">add_plain</span><span class="token punctuation">(</span>x_squared<span class="token punctuation">,</span> plain_one<span class="token punctuation">,</span> x_sq_plus_one<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x_sq_plus_one = x_squared +  plain_one;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + noise budget in x_sq_plus_one: "</span> <span class="token operator">&lt;&lt;</span> decryptor<span class="token punctuation">.</span><span class="token function">invariant_noise_budget</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bits"</span>
        <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + decryption of x_sq_plus_one: "</span><span class="token punctuation">;</span>

    decryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">,</span> decrypted_result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss2<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss2 <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss2 <span class="token operator">>></span> d2<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hex: 0x"</span> <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" Integer: "</span><span class="token operator">&lt;&lt;</span>d2<span class="token operator">&lt;&lt;</span><span class="token string">" ...... Correct. (x^2 + 1 ) "</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Ciphertext x_plus_one<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Compute x_plus_one (x+1),"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token function">string</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"then compute and relinearize x_plus_one_sq ((x+1)^2)."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    evaluator<span class="token punctuation">.</span><span class="token function">add_plain</span><span class="token punctuation">(</span>x_encrypted<span class="token punctuation">,</span> plain_one<span class="token punctuation">,</span> x_plus_one<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// x_plus_one = x_encrypted +  plain_one;</span>
    evaluator<span class="token punctuation">.</span><span class="token function">square</span><span class="token punctuation">(</span>x_plus_one<span class="token punctuation">,</span> x_plus_one_sq<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// x_plus_one_sq =  x_plus_one * x_plus_one;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of x_plus_one_sq: "</span> <span class="token operator">&lt;&lt;</span> x_plus_one_sq<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    
    evaluator<span class="token punctuation">.</span><span class="token function">relinearize_inplace</span><span class="token punctuation">(</span>x_plus_one_sq<span class="token punctuation">,</span> relin_keys<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 大小线性优化到2内</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + noise budget in x_plus_one_sq: "</span> <span class="token operator">&lt;&lt;</span> decryptor<span class="token punctuation">.</span><span class="token function">invariant_noise_budget</span><span class="token punctuation">(</span>x_plus_one_sq<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bits"</span>
        <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + decryption of x_plus_one_sq: "</span><span class="token punctuation">;</span>
    ss3<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    decryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>x_plus_one_sq<span class="token punctuation">,</span> decrypted_result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss3<span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss3 <span class="token operator">>></span> d2<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Hex: 0x"</span> <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" Integer: "</span><span class="token operator">&lt;&lt;</span>d2<span class="token operator">&lt;&lt;</span><span class="token string">" ...... Correct."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Compute and relinearize encrypted_result (4(x^2+1)(x+1)^2)."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    evaluator<span class="token punctuation">.</span><span class="token function">multiply_plain_inplace</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">,</span> plain_four<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  x_sq_plus_one = x_sq_plus_one * plain_four</span>
    evaluator<span class="token punctuation">.</span><span class="token function">multiply</span><span class="token punctuation">(</span>x_sq_plus_one<span class="token punctuation">,</span> x_plus_one_sq<span class="token punctuation">,</span> encrypted_result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// encrypted_result = x_sq_plus_one * x_plus_one_sq</span>
    
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of encrypted_result: "</span> <span class="token operator">&lt;&lt;</span> encrypted_result<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    evaluator<span class="token punctuation">.</span><span class="token function">relinearize_inplace</span><span class="token punctuation">(</span>encrypted_result<span class="token punctuation">,</span> relin_keys<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 线性优化</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + size of encrypted_result (after relinearization): "</span> <span class="token operator">&lt;&lt;</span> encrypted_result<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + noise budget in encrypted_result: "</span> <span class="token operator">&lt;&lt;</span> decryptor<span class="token punctuation">.</span><span class="token function">invariant_noise_budget</span><span class="token punctuation">(</span>encrypted_result<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" bits"</span>
        <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"NOTE: Notice the increase in remaining noise budget."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    
    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Decrypt encrypted_result (4(x^2+1)(x+1)^2)."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    ss3<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    decryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>encrypted_result<span class="token punctuation">,</span> decrypted_result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss3 <span class="token operator">&lt;&lt;</span> hex <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ss3 <span class="token operator">>></span> d2<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"    + decryption of 4(x^2+1)(x+1)^2 ,after Mod = Hex: 0x"</span> <span class="token operator">&lt;&lt;</span> decrypted_result<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">&lt;&lt;</span> <span class="token string">" Integer:"</span> <span class="token operator">&lt;&lt;</span> d2 <span class="token operator">&lt;&lt;</span> <span class="token string">" ...... Correct.(4(x^2+1)(x+1)^2)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token comment">/*
    * 对于 x=6, 4(x^2+1)(x+1)^2 = 7252. 因为 plaintext modulus MOD被设置为 1024,
    * 所以结果%1024.故 7252 % 1024 == 84, 或者16进制： 0x54 
    */</span>
    <span class="token function">print_line</span><span class="token punctuation">(</span><span class="token constant">__LINE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"An example of invalid parameters"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    parms<span class="token punctuation">.</span><span class="token function">set_poly_modulus_degree</span><span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context <span class="token operator">=</span> <span class="token function">SEALContext</span><span class="token punctuation">(</span>parms<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print_parameters</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Parameter validation (failed): "</span> <span class="token operator">&lt;&lt;</span> context<span class="token punctuation">.</span><span class="token function">parameter_error_message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
</code></pre></div></details><p><img src="https://gitee.com/sizaif/images/raw/master/img/20210812092836.png" class="lazyload" data-srcset="https://gitee.com/sizaif/images/raw/master/img/20210812092836.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20210812092827578"></p></div></div><div class="footer"><div class="copyright"><blockquote><p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p><p>本文永久链接是：<a href="https://www.sizaif.com/posts/9959b7cc/">https://www.sizaif.com/posts/9959b7cc/</a></p></blockquote></div></div><div class="article-meta" id="bottom"><div class="new-meta-box"><div class="new-meta-item author" itemprop="author" itemscope itemtype="http://schema.org/Person"> <a itemprop="url" class="author" href="/page/about/" rel="nofollow"><img itemprop="image" src="/img/avatar.webp" class="lazyload" data-srcset="/img/avatar.webp" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="This is a picture without description"><p itemprop="name">sizaif</p></a></div><div class="new-meta-item date" itemprop="dateModified" datetime="2021-08-14T22:15:24+08:00"><a class="notlink" href="/" onclick="return!1" title="Click me!"><i class="fad fa-edit EMERALD fa-fw" aria-hidden="true"></i><p>更新于：2021年8月14日</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/Seal/" rel="nofollow"><i class="fad fa-hashtag CARROT fa-fw" aria-hidden="true"></i><p>Seal</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E5%90%8C%E6%80%81%E5%8A%A0%E5%AF%86/" rel="nofollow"><i class="fad fa-hashtag CARROT fa-fw" aria-hidden="true"></i><p>同态加密</p></a></div> <span hidden itemprop="keywords">Seal 同态加密</span><div class="new-meta-item browse leancloud"><a class="notlink" href="/" onclick="return!1" title="Click me!"><div id="lc-pv" data-title="SEAL学习第一天-Bfv_basics使用用法" data-path="/posts/9959b7cc/"><i class="fad fa-eye GREENSEA fa-fw" aria-hidden="true"></i><span id="number"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span> 次浏览</div></a></div></div></div><div class="prev-next"><a class="prev" href="/posts/51e56618/"><p class="title"><i class="fas fa-chevron-left" aria-hidden="true"></i>SEAL学习第三天-Levels</p><p class="content"> @auther by sizaif SEAL 学习第三天：levels @[toc] 简介 今天学习描述在BFV和CKKS和在Microsoft SEAL中表示它们的相关对象 在Micros...</p></a><a class="next" href="/posts/c57ba29d/"><p class="title">Java反射技术拿取和设置Object实体类中的属性<i class="fas fa-chevron-right" aria-hidden="true"></i></p><p class="content">[TOC] @auther by sizaif 说明 在实际项目开发中使用PageHelper插件拿到的数据封装在 PageInfo中,而某些操作需要拿到里面的值和设置一些值,由于Objec...</p></a></div></article><article class="post white-box reveal shadow" id="comments"><span hidden><meta itemprop="discussionUrl" content="/posts/9959b7cc/#comments"></span><p ct><i class="fad fa-comments PINK"></i> 评论吧</p><div id="layoutHelper-comments"></div></article></div><aside id="l_side" itemscope itemtype="http://schema.org/WPSideBar"><section class="widget blogger shadow desktop mobile"><div class="content"> <a class="avatar flat-box circle" href="/page/about/"><img no-lazy src="/img/avatar.webp" alt="This is a picture without description"></a><div class="text"><p>春江潮水连海平,海上明月共潮生</p></div><div class="social-wrapper"><a href="https://blog.csdn.net/sizaif" class="social fad fa-fa-bandcamp flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a><a href="https://github.com/sizaif/" class="social fad fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a></div></div></section><section class="widget toc-wrapper shadow desktop mobile" id="toc-div"><header><i class="fad fa-list DEEPORANGE fa-fw" aria-hidden="true"></i> <span class="name">本文目录</span></header><div class="content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-parms%E7%B1%BB"><span class="toc-text">一 parms类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#size-t-poly-modulus-degree"><span class="toc-text">size_t poly_modulus_degree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#coeff-modulus"><span class="toc-text">coeff_modulus</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MOD"><span class="toc-text">MOD</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BAcode"><span class="toc-text">演示code</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-KeyGenerator%E7%B1%BB"><span class="toc-text">二 KeyGenerator类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BAcode-2"><span class="toc-text">演示code</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E6%80%A7%E5%8C%96-Relinearization"><span class="toc-text">线性化 Relinearization</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%94%E7%A4%BACode"><span class="toc-text">演示Code</span></a></li></ol></li></div></section></aside><script>window.pdata={},pdata.ispage=!0,pdata.postTitle="SEAL学习第一天-Bfv_basics使用用法",pdata.commentPath="",pdata.commentPlaceholder="";var l_header=document.getElementById("l_header");l_header.classList.add("show");var cover_wrapper=document.querySelector("#l_cover .cover-wrapper"),scroll_down=document.getElementById("scroll-down");cover_wrapper.id="none",cover_wrapper.style.display="none",scroll_down.style.display="none"</script></div><footer class="footer clearfix" itemscope itemtype="http://schema.org/WPFooter"><br><br><div><p><span id="lc-sv">本站总访问量为<span id="number"><i class="fad fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span> 次</span> <span id="lc-uv">访客数为<span id="number"><i class="fad fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span> 人</span></p></div><div><div class="footerMax490">鲁 ICP 备 <a href="https://beian.miit.gov.cn/" target="_blank" rel="nofollow" style="cursor:wait">20018157</a> 号-1</div></div><div><div class="footerMax490">Copyright 2021 - 2022 sizaif. All Rights Reserved</div></div></footer><a id="s-top" class="fal fa-arrow-up fa-fw" href="/" onclick="return!1" title="top"></a></div><div class="deng-box2"><div class="deng"><div class="xian"></div><div class="deng-a"><div class="deng-b"><div class="deng-t">腾</div></div></div><div class="shui shui-a"><div class="shui-c"></div><div class="shui-b"></div></div></div></div><div class="deng-box3"><div class="deng"><div class="xian"></div><div class="deng-a"><div class="deng-b"><div class="deng-t">龍</div></div></div><div class="shui shui-a"><div class="shui-c"></div><div class="shui-b"></div></div></div></div><div class="deng-box1"><div class="deng"><div class="xian"></div><div class="deng-a"><div class="deng-b"><div class="deng-t">跃</div></div></div><div class="shui shui-a"><div class="shui-c"></div><div class="shui-b"></div></div></div></div><div class="deng-box"><div class="deng"><div class="xian"></div><div class="deng-a"><div class="deng-b"><div class="deng-t">虎</div></div></div><div class="shui shui-a"><div class="shui-c"></div><div class="shui-b"></div></div></div></div></div><div><script>function volantisEventListener(e,t,o){this.type=e,this.f=t,this.ele=o}function volantisDom(e){return e||(e=document.createElement("div")),this.ele=e,this.ele.find=e=>{let t=this.ele.querySelector(e);if(t)return new volantisDom(t)},this.ele.hasClass=e=>this.ele.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)")),this.ele.addClass=e=>(this.ele.classList.add(e),this.ele),this.ele.removeClass=e=>(this.ele.classList.remove(e),this.ele),this.ele.toggleClass=e=>(this.ele.hasClass(e)?this.ele.removeClass(e):this.ele.addClass(e),this.ele),this.ele.on=(e,t,o=1)=>(this.ele.addEventListener(e,t,!1),o&&volantis.EventListener.list.push(new volantisEventListener(e,t,this.ele)),this.ele),this.ele.click=(e,t)=>(this.ele.on("click",e,t),this.ele),this.ele.scroll=(e,t)=>(this.ele.on("scroll",e,t),this.ele),this.ele.html=e=>(this.ele.innerHTML=e,this.ele),this.ele.hide=e=>(this.ele.style.display="none",this.ele),this.ele.show=e=>(this.ele.style.display="block",this.ele),this.ele}function RunItem(){function e(e,t){this.name=t||e.name,this.run=()=>{try{e()}catch(e){console.log(e)}}}this.list=[],this.start=()=>{for(var e=0;e<this.list.length;e++)this.list[e].run()},this.push=(t,o,n=!0)=>{let l=t;n&&(l=()=>{volantis.requestAnimationFrame(t)});var s=new e(l,o);this.list.push(s)},this.remove=e=>{for(let t=0;t<this.list.length;t++){this.list[t].name==e&&this.list.splice(t,1)}}}window.volantis={},volantis.dom={},volantis.EventListener={},volantis.EventListener.list=[],volantis.EventListener.remove=()=>{volantis.EventListener.list.forEach((function(e){e.ele.removeEventListener(e.type,e.f,!1)})),volantis.EventListener.list=[]},volantis.dom.$=e=>e?new volantisDom(e):null,volantis.dom.bodyAnchor=volantis.dom.$(document.getElementById("safearea")),volantis.dom.topBtn=volantis.dom.$(document.getElementById("s-top")),volantis.dom.wrapper=volantis.dom.$(document.getElementById("wrapper")),volantis.dom.coverAnchor=volantis.dom.$(document.querySelector("#l_cover .cover-wrapper")),volantis.dom.switcher=volantis.dom.$(document.querySelector("#l_header .switcher .s-search")),volantis.dom.header=volantis.dom.$(document.getElementById("l_header")),volantis.dom.search=volantis.dom.$(document.querySelector("#l_header .m_search")),volantis.dom.mPhoneList=volantis.dom.$(document.querySelectorAll("#l_header .m-phone .list-v")),volantis.pjax={},volantis.pjax.method={complete:new RunItem,error:new RunItem,send:new RunItem},volantis.pjax={...volantis.pjax,push:volantis.pjax.method.complete.push,error:volantis.pjax.method.error.push,send:volantis.pjax.method.send.push},volantis.dark={},volantis.dark.method={toggle:new RunItem},volantis.dark={...volantis.dark,push:volantis.dark.method.toggle.push},volantis.js=(e,t)=>new Promise(o=>{setTimeout((function(){var n=document.getElementsByTagName("body")[0]||document.documentElement,l=document.createElement("script");if(l.setAttribute("type","text/javascript"),t)if(JSON.stringify(t))for(let e in t)"onload"==e?l[e]=()=>{t[e](),o()}:(l[e]=t[e],l.onload=o);else l.onload=()=>{t(),o()};else l.onload=o;l.setAttribute("src",e),n.appendChild(l)}))}),volantis.css=e=>new Promise(t=>{setTimeout((function(){var o=document.createElement("link");o.rel="stylesheet",o.href=e,o.onload=t,document.getElementsByTagName("head")[0].appendChild(o)}))}),volantis.import={jQuery:()=>"undefined"==typeof jQuery?volantis.js("https://cdn.jsdelivr.net/npm/jquery@3.5/dist/jquery.min.js"):new Promise(e=>{e()})},volantis.requestAnimationFrame=e=>{window.requestAnimationFrame||(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame),window.requestAnimationFrame(e)},volantis.layoutHelper=(e,t,o)=>{function n(e,t,o){volantis.tempDiv=document.createElement("div"),volantis.tempDiv.innerHTML=t;let n=document.querySelector("#layoutHelper-"+e);n&&(o&&(n.innerHTML=""),n.append(volantis.tempDiv))}o=Object.assign({clean:!1,pjax:!0},o),n(e,t,o.clean),o.pjax&&volantis.pjax.push(()=>{n(e,t,o.clean)},"layoutHelper-"+e)},volantis.scroll={engine:new RunItem,unengine:new RunItem},volantis.scroll={...volantis.scroll,push:volantis.scroll.engine.push},volantis.scroll.getScrollTop=()=>{let e;return window.pageYOffset?e=window.pageYOffset:document.compatMode&&"BackCompat"!=document.compatMode?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e},volantis.scroll.handleScrollEvents=()=>{volantis.scroll.lastScrollTop=volantis.scroll.getScrollTop(),volantis.requestAnimationFrame((function e(){const t=volantis.scroll.getScrollTop();volantis.scroll.lastScrollTop!==t?(volantis.scroll.del=t-volantis.scroll.lastScrollTop,volantis.scroll.lastScrollTop=t,volantis.scroll.engine.start()):volantis.scroll.unengine.start(),volantis.requestAnimationFrame(e)}))},volantis.scroll.handleScrollEvents(),volantis.scroll.to=(e,t={})=>{opt={top:e.getBoundingClientRect().top+document.documentElement.scrollTop,behavior:"smooth"},"top"in t&&(opt.top=t.top),"behavior"in t&&(opt.behavior=t.behavior),"addTop"in t&&(opt.top+=t.addTop),"observerDic"in t||(t.observerDic=25),window.scrollTo(opt),t.observer&&volantis.scroll.unengine.push(()=>{let o=e.getBoundingClientRect().top;o>=-t.observerDic&&o<=t.observerDic?volantis.scroll.unengine.remove("unengineObserver"):volantis.scroll.to(e,t)},"unengineObserver")}</script><script>top.location!=self.location&&(top.location=self.location),volantis.css("https://cdn.jsdelivr.net/gh/inkss/fontawesome@5/css/all.min.css"),volantis.css("https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css")</script><script>volantis.message=(o,t,e={},s=null)=>{function i(o,t,e,s){const{icon:i,time:n,position:a,transitionIn:l,transitionOut:c,messageColor:r,titleColor:u,backgroundColor:g,zindex:d,displayMode:m}=e;iziToast.show({layout:"2",icon:"Fontawesome",closeOnEscape:"true",displayMode:m||"replace",transitionIn:l||"bounceInLeft",transitionOut:c||"fadeOutRight",messageColor:r||"var(--color-text)",titleColor:u||"var(--color-text)",backgroundColor:g||"var(--color-card)",zindex:d||"2147483647",icon:i||"fad fa-info-circle light-blue",timeout:n||"5000",position:a||"topRight",title:o,message:t,onClosed:()=>{s&&s()}})}"undefined"==typeof iziToast?(volantis.css("/css/message.css?time=1710817994317"),volantis.js("/js/message.js?time=1710817994317",()=>{i(o,t,e,s)})):i(o,t,e,s)},volantis.question=(o,t,e={},s=null,i=null,n=null)=>{function a(o,t,e,s,i,n){const{icon:a,time:l,position:c,transitionIn:r,transitionOut:u,messageColor:g,titleColor:d,backgroundColor:m,zindex:b}=e;iziToast.question({id:"question",icon:"Fontawesome",close:!1,overlay:!0,displayMode:"once",position:"center",messageColor:g||"var(--color-text)",titleColor:d||"var(--color-text)",backgroundColor:m||"var(--color-card)",zindex:b||"2147483647",icon:a||"fad fa-question-circle light-blue",timeout:l||"20000",title:o,message:t,buttons:[["<button><b>是</b></button>",(o,t)=>{o.hide({transitionOut:u||"fadeOut"},t,"button"),s&&s(o,t)}],["<button><b>否</b></button>",(o,t)=>{o.hide({transitionOut:u||"fadeOut"},t,"button"),i&&i(o,t)}]],onClosed:(o,t,e)=>{n&&n(o,t,e)}})}"undefined"==typeof iziToast?(volantis.css("/css/message.css?time=1710817994317"),volantis.js("/js/message.js?time=1710817994317",()=>{a(o,t,e,s,i,n)})):a(o,t,e,s,i,n)},volantis.hideMessage=(o=null)=>{const t=document.querySelector(".iziToast");function e(o){iziToast.hide({},t),o&&o()}t?"undefined"==typeof iziToast?(volantis.css("/css/message.css?time=1710817994317"),volantis.js("/js/message.js?time=1710817994317",()=>{e(o)})):e(o):o&&o()},volantis.messageCopyright={enable:!0,title:"知识共享许可协议",message:"请遵守 CC BY-NC-SA 4.0 协议。",icon:"far fa-copyright light-blue"},volantis.messageRightMenu={enable:!0},volantis.messageCopyright.enable&&(document.body.oncopy=function(){volantis.message(volantis.messageCopyright.title,volantis.messageCopyright.message,{icon:volantis.messageCopyright.icon})})</script><div id="rightmenu-wrapper"><ul class="list-v rightmenu" id="rightmenu-content"><li class="navigation menuNavigation-Content"><a class="nav icon-only fix-cursor-default" onclick="history.back()"><i class="fal PETERRIVE fa-arrow-left fa-fw"></i></a><a class="nav icon-only fix-cursor-default" onclick="history.forward()"><i class="fal PETERRIVE fa-arrow-right fa-fw"></i></a><a class="nav icon-only fix-cursor-default" onclick="window.location.reload()"><i class="fal PETERRIVE fa-redo fa-fw"></i></a><a class="nav icon-only fix-cursor-default" href="/"><i class="fal PETERRIVE fa-home fa-fw"></i></a></li><li class="option menuOption-Content"><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyText"><i class="fal PETERRIVE fa-copy fa-fw"></i> 复制文本</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyPaste"><i class="fal PETERRIVE fa-paste fa-fw mR12"></i> 粘贴文本</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copySelect"><i class="fal PETERRIVE fa-object-ungroup fa-fw mR12"></i> 全选文本</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyCut"><i class="fal PETERRIVE fa-cut fa-fw mR12"></i> 剪切文本</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="openTab"><i class="fal PETERRIVE fa-external-link-square-alt fa-fw mR12"></i> 在新标签页打开</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copySrc"><i class="fal PETERRIVE fa-image fa-fw mR12"></i> 复制图片地址</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyImg"><i class="fal PETERRIVE fa-images fa-fw mR12"></i> 复制图片文件</span></li><hr class="menuLoad-Content"><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" href="/page/messages/" id="pagemessages"><i class="fal fa-comment EMERALD fa-fw"></i> 留言板</a></li><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" href="/page/history/" id="pagehistory"><i class="fal fa-history PETERRIVE fa-fw"></i> 时间轴</a></li><hr class="menuLoad-Content"><li class="option menuOption-Content"><span class="vlts-menu opt fix-cursor-default" id="printHtml"><i class="fal fa-print TURQUOISE fa-fw"></i> 打印页面</span></li><hr class="menuLoad-Content"><li class="option menuOption-Content"><span class="vlts-menu opt fix-cursor-default" id="readingModel"><i class="fal fa-book-open fa-fw"></i> 阅读模式</span></li><li class="option menuOption-Content"><span class="vlts-menu opt fix-cursor-default toggle-mode-btn" id="menuDarkBtn"><i class="fal fa-moon WISTERIA fa-fw"></i> 暗黑模式</span></li><div id="menuMusic"><li class="music name menuOption-Content"><p class="nav music-title fix-cursor-default"></p></li><li class="music ctrl"><a class="nav icon-only backward fix-cursor-default" onclick="volantis.rightMenu.aplayerBackward()"><i class="fal PETERRIVE fa-step-backward fa-fw"></i></a><a class="nav icon-only toggle fix-cursor-default" onclick="volantis.rightMenu.aplayerToggle()"><i class="fal PETERRIVE fa-play fa-fw"></i></a><a class="nav icon-only forward fix-cursor-default" onclick="volantis.rightMenu.aplayerForward()"><i class="fal PETERRIVE fa-step-forward fa-fw"></i></a></li><li class="music volume"><div class="nav volume"><div class="aplayer-volume-bar-wrap"><div class="aplayer-volume-bar fix-cursor-pointer"><div class="aplayer-volume"></div><i class="left fal PETERRIVE fa-volume-off fa-fw"></i><i class="right fal PETERRIVE fa-volume-up fa-fw"></i></div></div></div></li></div></ul></div><script>(1!==volantis.isMobile||document.documentElement.clientWidth>500)&&(volantis.rightMenu={},volantis.rightMenu.faicon="fal PETERRIVE",volantis.rightMenu.music=!0,volantis.rightMenu.aplayerBackward=()=>{event.stopPropagation(),MainAPlayer.aplayerBackward&&MainAPlayer.aplayerBackward()},volantis.rightMenu.aplayerToggle=()=>{event.stopPropagation(),MainAPlayer.aplayerToggle&&MainAPlayer.aplayerToggle()},volantis.rightMenu.aplayerForward=()=>{event.stopPropagation(),MainAPlayer.aplayerForward&&MainAPlayer.aplayerForward()},volantis.rightMenu.defaultStyles=!0,volantis.rightMenu.customPicUrl=!0,volantis.rightMenu.picOld="",volantis.rightMenu.picNew="",volantis.js("/js/rightMenu.js?time=1710817994317"))</script><script>const rootElement=document.documentElement,darkModeStorageKey="color-scheme",rootElementDarkModeAttributeName="color-scheme",setLS=(e,o)=>{localStorage.setItem(e,o)},removeLS=e=>{localStorage.removeItem(e)},getLS=e=>localStorage.getItem(e),getModeFromCSSMediaQuery=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",resetRootDarkModeAttributeAndLS=()=>{var e;rootElement.removeAttribute("color-scheme"),e="color-scheme",localStorage.removeItem(e)},validColorModeKeys={dark:!0,light:!0},applyCustomDarkModeSettings=e=>{const o=e||getLS("color-scheme");getCustomDarkMode(),o===getModeFromCSSMediaQuery()?resetRootDarkModeAttributeAndLS():validColorModeKeys[o]?rootElement.setAttribute("color-scheme",o):resetRootDarkModeAttributeAndLS()},invertDarkModeObj={dark:"light",light:"dark"},getCustomDarkMode=()=>{let e=getLS("color-scheme");if(validColorModeKeys[e])e=invertDarkModeObj[e];else{if(null!==e)return;e=invertDarkModeObj[getModeFromCSSMediaQuery()]}volantis.dark.mode="dark"==e?"light":"dark"},toggleCustomDarkMode=()=>{let e=getLS("color-scheme");if(validColorModeKeys[e])e=invertDarkModeObj[e];else{if(null!==e)return;e=invertDarkModeObj[getModeFromCSSMediaQuery()]}var o,t;return o="color-scheme",t=e,localStorage.setItem(o,t),e};function bindToggleButton(){document.querySelectorAll("#wrapper .toggle-mode-btn,#rightmenu-wrapper .toggle-mode-btn").forEach((function(e){volantis.dom.$(e).on("click",volantis.dark.toggle)}))}volantis.dark.toggle=()=>{const e=toggleCustomDarkMode();applyCustomDarkModeSettings(e),volantis.dark.method.toggle.start()},applyCustomDarkModeSettings(),document.addEventListener("DOMContentLoaded",()=>{volantis.requestAnimationFrame(bindToggleButton)}),volantis.pjax.push(bindToggleButton)</script><script>function loadIssuesJS(){null!=document.getElementById("friends-api")&&"undefined"==typeof FriendsJS&&volantis.js("/js/plugins/friends.js?time=1710817994317");null!=document.getElementById("contributors-api")&&"undefined"==typeof ContributorsJS&&volantis.js("/js/plugins/contributors.js?time=1710817994317")}loadIssuesJS(),volantis.pjax.push(()=>{loadIssuesJS()})</script><script defer="defer" src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.1.0/dist/lazyload.min.js"></script><script>window.lazyLoadOptions={elements_selector:".lazyload",threshold:0},window.addEventListener("LazyLoad::Initialized",(function(n){window.lazyLoadInstance=n.detail.instance}),!1),document.addEventListener("DOMContentLoaded",(function(){lazyLoadInstance.update()})),document.addEventListener("pjax:complete",(function(){lazyLoadInstance.update()}))</script><script>window.FPConfig={delay:0,ignoreKeywords:["#"],maxRPS:6,hoverDelay:0}</script><script defer="defer" src="https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"></script><script>function SetAPlayerPlugin(){let e=document.querySelectorAll("meting-js");if(0===e.length)return volantis.APlayerController.status=void 0,void("undefined"==typeof MainAPlayer&&(MainAPlayer={},MainAPlayer.Aplayer={}));if(e[0].aplayer&&e[0].aplayer.on){document.querySelectorAll(".aplayer-icon-menu").forEach(e=>{e.setAttribute("aria-label","Aplayer Menu")});try{setTimeout(()=>{e.forEach((e,t)=>{const a=e.aplayer;if(!a)return;const l=e.meta.id===volantis.APlayerController.id&&volantis.APlayerController.music;l&&MainAPlayer.checkAPlayer(),a.events.events.play.every(e=>"messagePlay"!==e.name)&&a.on("play",(function(){let e=a.list.index,t=a.list.audios[e].title,n=a.list.audios[e].artist;setTimeout(()=>{volantis.message("音乐通知",t+" - "+n,{icon:"fas fa-play",transitionIn:"flipInX",transitionOut:"flipOutX"})},100),l&&volantis.APlayerController&&(volantis.APlayerController.status="play")})),a.events.events.pause.every(e=>"messagePause"!==e.name)&&a.on("pause",(function(){let e=a.list.index,t=a.list.audios[e].title,n=a.list.audios[e].artist;setTimeout(()=>{a.paused&&volantis.message("音乐通知",t+" - "+n,{icon:"fas fa-pause",transitionIn:"flipInX",transitionOut:"flipOutX"})},100),l&&volantis.APlayerController&&(volantis.APlayerController.status="pause")}))})},500)}catch(e){console.error(e)}}else volantis.requestAnimationFrame(SetAPlayerPlugin)}volantis.APlayerController={},volantis.APlayerController.id="8110970572",volantis.APlayerController.volume="0.7",volantis.css("https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css"),(async()=>{await volantis.js("https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@master/js/APlayer.mini.js"),await volantis.js("https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"),await volantis.js("/js/aplayer.js?time=1710817994319"),volantis.APlayerController.music=!0})(),document.addEventListener("DOMContentLoaded",()=>{SetAPlayerPlugin()}),volantis.pjax.push(SetAPlayerPlugin)</script><script>function pjax_waline(){if(!document.querySelector("#waline"))return;let a=pdata.commentPlaceholder||"快来一起灌水把~",e=pdata.commentPath;if(0==e.length){e=""||decodeURI(window.location.pathname)}new Waline(Object.assign({js:"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js",path:null,placeholder:"快来一起灌水把~",imageHosting:"https://7bu.top/api/upload",meta:["nick","mail","link"],requiredFields:["nick","mail"],serverURL:"https://my-blog-comments-7h9bif6tw-sizaif.vercel.app/",avatar:"robohash",avatarCDN:"https://sdn.geekzu.org/avatar/",pageSize:10,lang:"zh-CN",visitor:!1},{el:"#waline",path:e,placeholder:a,uploadImage:function(a){const e=new FormData;e.append("image",a);return fetch("https://7bu.top/api/upload",{method:"POST",body:e,headers:{Authorization:"0f10884e1e0a0831d1c6a272977cf5ce"}}).then(a=>a.json()).then(a=>a.data.url)}}))}volantis.layoutHelper("comments",'<div id="waline"><i class="fas fa-cog fa-spin fa-fw fa-2x"></i></div>'),volantis.js("https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js").then(pjax_waline),volantis.pjax.push(pjax_waline)</script><script src="https://cdn.jsdelivr.net/gh/sizaif/blog-cdn@main/js/app.js?time=1710817994317.js"></script><script>const SearchServiceDataPathRoot="/".endsWith("/")?"/":"//",SearchServiceDataPath=SearchServiceDataPathRoot+"content.json";function loadSearchScript(){return volantis.js("/js/search/hexo.js?time=1710817994317")}function loadSearchService(){loadSearchScript(),document.querySelectorAll(".input.u-search-input").forEach(e=>{e.removeEventListener("focus",loadSearchService,!1)})}function OpenSearch(e){loadSearchScript().then(()=>{SearchService.setQueryText(e),SearchService.search()})}if(window.location.search&&/^\?s=/g.test(window.location.search)){OpenSearch(decodeURI(window.location.search).replace(/\ /g,"-").replace(/^\?s=/g,""))}document.querySelectorAll(".input.u-search-input").forEach(e=>{e.addEventListener("focus",loadSearchService,!1)})</script><script src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@2/js/comment_typing.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script><script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css"><script>function pjax_prismjs_copyCode(){if(!document.querySelector("pre"))return;document.querySelectorAll("pre").forEach(e=>{var o=document.createElement("div");o.classList.add("code-toolbar"),e.parentNode.insertBefore(o,e),o.appendChild(e)}),VolantisApp.copyCode(".code-toolbar pre")}volantis.requestAnimationFrame(pjax_prismjs_copyCode),volantis.pjax.push(pjax_prismjs_copyCode)</script><script defer="defer">const LCCounter={app_id:"GcD7lTc7sb10bct0tpUjQmNy-MdYXbMMI",app_key:"raRdC0LRDER0gV9zBR5K6h1C",custom_api_server:"app-router.leancloud.cn",getRecord:(e,t,r)=>new Promise((function(n,i){e("get","/classes/Counter?where="+encodeURIComponent(JSON.stringify({url:t}))).then(e=>e.json()).then(({results:o,code:s,error:a})=>{if(401===s)throw a;if(o&&o.length>0){var c=o[0];n(c)}else e("post","/classes/Counter",{url:t,title:r,times:0}).then(e=>e.json()).then((e,t)=>{if(t)throw t;n(e)}).catch(e=>{console.error("Failed to create",e),i(e)})}).catch(e=>{console.error("LeanCloud Counter Error:",e),i(e)})})),increment:(e,t)=>new Promise((function(r,n){e("post","/batch",{requests:t}).then(e=>{if((e=e.json()).error)throw e.error;r(e)}).catch(e=>{console.error("Failed to save visitor count",e),n(e)})})),buildIncrement:e=>({method:"PUT",path:"/1.1/classes/Counter/"+e,body:{times:{__op:"Increment",amount:1}}}),validUV(){var e="LeanCloudUVTimestamp",t=localStorage.getItem(e);return!(t&&(new Date).getTime()-parseInt(t)<=864e5)&&(localStorage.setItem(e,(new Date).getTime().toString()),!0)},addCount(e){var t=[],r=[],n=document.querySelector("#lc-sv"),o=this.getRecord(e,"https://www.sizaif.com/#lc-sv","Visits").then(e=>{r.push(this.buildIncrement(e.objectId));var t=document.querySelectorAll("#lc-sv #number");t.length>0&&t.forEach((t,r,i)=>{t.innerText=e.times+1,n&&(n.style.display="inline")})});t.push(o);var s=document.querySelector("#lc-uv"),a=this.getRecord(e,"https://www.sizaif.com/#lc-uv","Visitors").then(e=>{var t=this.validUV();t&&r.push(this.buildIncrement(e.objectId));var n=document.querySelectorAll("#lc-uv #number");n.length>0&&n.forEach((r,n,i)=>{r.innerText=e.times+(t?1:0),s&&(s.style.display="inline")})});t.push(a);var c=document.querySelectorAll("#lc-pv");for(c.length,i=0;i<c.length;i++){let n=c[i],o=n.getAttribute("data-title");var l="https://www.sizaif.com"+n.getAttribute("data-path");if(l){var h=this.getRecord(e,l,o).then(e=>{let t=window.location.pathname;if(t.includes("index.html")&&(t=t.substring(0,t.lastIndexOf("index.html"))),n.getAttribute("data-path")==t&&r.push(this.buildIncrement(e.objectId)),n){var i=n.querySelector("#lc-pv #number");i&&(n.getAttribute("data-path")==t?i.innerText=(e.times||0)+1:i.innerText=e.times||0,n.style.display="inline")}});t.push(h)}}Promise.all(t).then(()=>{r.length>0&&this.increment(e,r)})},fetchData(e){this.addCount((t,r,n)=>fetch(`${e}/1.1${r}`,{method:t,headers:{"X-LC-Id":this.app_id,"X-LC-Key":this.app_key,"Content-Type":"application/json"},body:JSON.stringify(n)}))},refreshCounter(){var e="-MdYXbMMI"!==this.app_id.slice(-9)?this.custom_api_server:`https://${this.app_id.slice(0,8).toLowerCase()}.api.lncldglobal.com`;e?this.fetchData(e):fetch("https://app-router.leancloud.cn/2/route?appId="+this.app_id).then(e=>e.json()).then(({api_server:e})=>{this.fetchData("https://"+e)})}};LCCounter.refreshCounter(),document.addEventListener("pjax:complete",(function(){LCCounter.refreshCounter()}))</script><script>setTimeout((function(){function a(){dataLayer.push(arguments)}volantis.js("https://www.googletagmanager.com/gtag/js?id=G-N8KQ2P8GC7"),window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","G-N8KQ2P8GC7")}),1e3),volantis.pjax.push(()=>{window.dataLayer=window.dataLayer||[],function(){dataLayer.push(arguments)}("config","G-N8KQ2P8GC7",{page_path:document.location.pathname})},"google_analytics")</script><script>var _hmt=_hmt||[];setTimeout((function(){volantis.js("https://hm.baidu.com/hm.js?edae7b205e9ea0265b67911e1e800db7")}),1e3),volantis.pjax.push(()=>{_hmt.push(["_trackPageview",document.location.pathname])},"baidu_analytics")</script><pjax></pjax><script>function listennSidebarTOC(){const e=document.querySelectorAll(".toc li");if(!e.length)return;const t=[...e].map(e=>{const t=e.querySelector(".toc-link"),n=document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""));return t.setAttribute("onclick","return false;"),t.setAttribute("toc-action","toc-"+decodeURI(t.getAttribute("href")).replace("#","")),t.setAttribute("href","/"),t.addEventListener("click",e=>{e.preventDefault(),volantis.scroll.to(n,{addTop:5,observer:!0})}),n});!function n(r){r=Math.floor(r+1e4);let c=new IntersectionObserver((c,o)=>{let i=document.documentElement.scrollHeight;if(i>r)return o.disconnect(),void n(i);let a=function(e){let n=0,r=e[n];if(r.boundingClientRect.top>0)return n=t.indexOf(r.target),0===n?0:n-1;for(;n<e.length;n++){if(!(e[n].boundingClientRect.top<=0))return t.indexOf(r.target);r=e[n]}return t.indexOf(r.target)}(c);!function(e){if(e.classList.contains("active-current"))return;document.querySelectorAll(".toc .active").forEach(e=>{e.classList.remove("active","active-current")}),e.classList.add("active","active-current");let t=e.parentNode;for(;!t.matches(".toc");)t.matches("li")&&t.classList.add("active"),t=t.parentNode}(e[a])},{rootMargin:r+"px 0px -100% 0px",threshold:0});t.forEach(e=>{e&&c.observe(e)})}(document.documentElement.scrollHeight)}document.addEventListener("DOMContentLoaded",()=>{volantis.requestAnimationFrame(listennSidebarTOC)}),document.addEventListener("pjax:success",()=>{volantis.requestAnimationFrame(listennSidebarTOC)})</script><script type="application/ld+json">[{"@context":"http://schema.org","@type":"Organization","name":"Sizaif's Blog","url":"https://www.sizaif.com/","logo":{"@type":"ImageObject","url":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},{"@context":"http://schema.org","@type":"Person","name":"sizaif","image":{"@type":"ImageObject","url":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png"},"url":"https://www.sizaif.com/","sameAs":["https://github.com/volantis-x"],"description":"春江潮水连海平,海上明月共潮生."},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://www.sizaif.com/","name":"Sizaif's Blog"}},{"@type":"ListItem","position":2,"item":{"@id":"https://www.sizaif.com//navigation/categories/技术向/","name":"技术向"}},{"@type":"ListItem","position":2,"item":{"@id":"https://www.sizaif.com//navigation/categories/技术向/Microsoft-SEAL/","name":"Microsoft SEAL"}},{"@type":"ListItem","position":3,"item":{"@id":"https://www.sizaif.com/posts/9959b7cc/","name":"SEAL学习第一天-Bfv_basics使用用法"}}]},{"@context":"http://schema.org","@type":"BlogPosting","headline":"SEAL学习第一天-Bfv_basics使用用法","description":"","datePublished":"2021-08-11T14:01:34.000Z","dateModified":"2021-08-14T14:15:24.837Z","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sizaif.com/posts/9959b7cc/"},"author":{"@type":"Person","name":"sizaif","image":{"@type":"ImageObject","url":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png"},"url":"https://www.sizaif.com/"},"publisher":{"@type":"Organization","name":"Sizaif's Blog","logo":{"@type":"ImageObject","url":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"url":"https://www.sizaif.com/posts/9959b7cc/","wordCount":0,"articleSection":"技术向","keywords":"Seal,同态加密","image":{"@type":"ImageObject","url":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png","width":192,"height":192}}]</script><script>function pjax_ArticleBkg(){const e=document.querySelector(".cus-article-bkg"),t=document.getElementById("BKG");document.body.offsetWidth<=500?(t.style.display="none",e&&(e.style.display="none")):t.style.display=e?"none":""}function pjax_setGlobalBkg(){if(document.body.offsetWidth<=500){document.getElementById("BKG").style.display="none"}}document.addEventListener("DOMContentLoaded",(function(){pjax_ArticleBkg()})),volantis.pjax.send(pjax_setGlobalBkg),volantis.pjax.push(pjax_ArticleBkg)</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>var pjax;document.addEventListener("DOMContentLoaded",(function(){pjax=new Pjax({elements:'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox]):not([onclick="return false;"]):not([target="_blank"]):not([target="view_window"])',selectors:["title","#pjax-container","#pjax-header-nav-list","pjax","script[data-pjax], .pjax-reload script"],cacheBust:!1,timeout:5e3})})),document.addEventListener("pjax:send",(function(t){try{var e=window.location.pathname,n=t.triggerElement.href,a=["/artitalk/","/page/shuoshuo/"];""!=a[0]&&a.forEach(t=>{-1==e.indexOf(t)&&-1==n.indexOf(t)||(window.location.href=n)})}catch(t){}volantis.pjax.method.send.start()})),document.addEventListener("pjax:complete",(function(){volantis.pjax.method.complete.start()})),document.addEventListener("pjax:error",(function(t){volantis.pjax.method.error.start(),window.location.href=t.triggerElement.href}))</script><div id="BKG" class="content-in"></div></div></body></html>