<!DOCTYPE html>
<html lang="zh-CN">
    <head hexo-theme="https://github.com/volantis-x/hexo-theme-volantis/tree/5.0.0.alpha.3">
  <meta name="generator" content="Hexo 5.4.0">
  <meta charset="utf-8">
  
  
  <link rel="canonical" href="https://www.sizaif.com/posts/32795611/">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5">
  <meta content="Sizaif&#39;s Blog" name="application-name">
  <meta content="Sizaif&#39;s Blog" name="apple-mobile-web-app-title">
  <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style">
  <meta content="telephone=no" name="format-detection">
  
  <meta name="google-site-verification" content="2ch5e58GE7KkV0c1-Cc2VtH4jR8sGEuT8xtD6ou6Un8">
  <meta name="baidu-site-verification" content="code-fyaVc6pxBp">
  <link rel="preload" href="/css/style.css?time=1667802749504" as="style">
  <link rel="preload" href="https://cdn.jsdelivr.net/gh/inkss/common@1/fonts/canva/SentyGoldenBell.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/gh/sizaif/blog-cdn@main/fonts/hytmr55.woff" as="font" type="font/woff" crossorigin="anonymous">

  
  <title>LLVM 学习(二) -LLVM IR 语法理论学习 - Sizaif's Blog</title>
  <meta name="keywords" content="fuzzing,LLVM,sizaif,程序猿">
  <meta name="description" content="LLVM 学习(二) -LLVM IR 语法理论学习  @create 2022-04-16 12:05:47 @sizaif   LLVM IR 语法  https:&#x2F;&#x2F;llvm.org&#x2F;docs&#x2F;LangRef.html  LLVM IR中的标识符有两种基本类型：全局标识符（以@开头）和局部标识符（以%开头） 1、命名值以字母序列开头，例如：%foo, @DivisionByZero, %a.">
<meta property="og:type" content="article">
<meta property="og:title" content="LLVM 学习(二) -LLVM IR 语法理论学习">
<meta property="og:url" content="https://www.sizaif.com/posts/32795611/">
<meta property="og:site_name" content="Sizaif&#39;s Blog">
<meta property="og:description" content="LLVM 学习(二) -LLVM IR 语法理论学习  @create 2022-04-16 12:05:47 @sizaif   LLVM IR 语法  https:&#x2F;&#x2F;llvm.org&#x2F;docs&#x2F;LangRef.html  LLVM IR中的标识符有两种基本类型：全局标识符（以@开头）和局部标识符（以%开头） 1、命名值以字母序列开头，例如：%foo, @DivisionByZero, %a.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png">
<meta property="article:published_time" content="2022-04-19T02:32:46.000Z">
<meta property="article:modified_time" content="2022-05-03T14:18:16.099Z">
<meta property="article:author" content="sizaif">
<meta property="article:tag" content="fuzzing">
<meta property="article:tag" content="LLVM">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/Logo-NavBar@3x.png">
  
  
  
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  
  <style>#safearea{display:none}.post-story+.post-story,.post-wrapper+.post-wrapper,article+article{content-visibility:auto;contain-intrinsic-size:10px 500px}:root{--color-site-body:#f4f4f4;--color-site-bg:#f4f4f4;--color-site-inner:#fff;--color-site-footer:#2196f3;--color-card:#fff;--color-text:#444;--color-block:#f6f6f6;--color-inlinecode:#7c4dff;--color-codeblock:#f3e5f5;--color-h1:#3a3a3a;--color-h2:#3a3a3a;--color-h3:#333;--color-h4:#444;--color-h5:#555;--color-h6:#666;--color-p:#444;--color-list:#666;--color-list-hl:#36ac91;--color-meta:#888;--color-read-bkg:#e0d8c8;--color-read-post:#f8f1e2}*{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;outline:0;margin:0;padding:0}html{color:var(--color-text);width:100%;height:100%;font-family:hytmr,UbuntuMono,"Varela Round","PingFang SC","Microsoft YaHei",Helvetica,Arial,Menlo,Monaco,monospace,sans-serif;font-size:16px}html>::-webkit-scrollbar{height:4px;width:4px}html>::-webkit-scrollbar-track-piece{background:0 0}html>::-webkit-scrollbar-thumb{background:#44d7b6;cursor:pointer;border-radius:2px;-webkit-border-radius:2px}html>::-webkit-scrollbar-thumb:hover{background:#ff5722}body{background-color:var(--color-site-body);text-rendering:optimizelegibility;-webkit-tap-highlight-color:transparent;line-height:1.6;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body.modal-active{overflow:hidden}@media screen and (max-width:680px){body.modal-active{position:fixed;top:0;right:0;bottom:0;left:0}}a{color:#2196f3;cursor:pointer;text-decoration:none;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}a:hover{color:#ff5722}a:active,a:hover{outline:0}ol,ul{padding-left:0}ol li,ul li{list-style:none}header{display:-webkit-box;display:-moz-box;display:block}img{border:0;background:0 0;max-width:100%}svg:not(:root){overflow:hidden}hr{-moz-box-sizing:content-box;box-sizing:content-box;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;height:0;border:0;border-radius:1px;-webkit-border-radius:1px;border-bottom:1px solid rgba(68,68,68,.1)}button,input{color:inherit;font:inherit;margin:0}button{overflow:visible;text-transform:none;-webkit-appearance:button;cursor:pointer}@supports (backdrop-filter:blur(20px)){.blur{background:rgba(255,255,255,.9)!important;backdrop-filter:saturate(200%) blur(20px)}}.shadow{box-shadow:0 1px 2px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 1px 2px 0 rgba(0,0,0,.1)}.shadow.floatable{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.shadow.floatable:hover{box-shadow:0 2px 4px 0 rgba(0,0,0,.1),0 4px 8px 0 rgba(0,0,0,.1),0 8px 16px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.1),0 4px 8px 0 rgba(0,0,0,.1),0 8px 16px 0 rgba(0,0,0,.1)}#l_cover{min-height:64px}.cover-wrapper{top:0;left:0;max-width:100%;height:100vh;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-khtml-flex-wrap:nowrap;-moz-flex-wrap:nowrap;-o-flex-wrap:nowrap;-ms-flex-wrap:nowrap;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:vertical;-moz-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;align-self:center;align-content:center;color:var(--color-site-inner);padding:0 16px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;position:relative;overflow:hidden;margin-bottom:-100px}.cover-wrapper .cover-bg{position:absolute;width:100%;height:100%;background-position:center;background-size:cover;-webkit-background-size:cover;-moz-background-size:cover}.cover-wrapper .cover-bg.lazyload:not(.loaded){opacity:0;-webkit-opacity:0;-moz-opacity:0}.cover-wrapper .cover-bg.lazyload.loaded{animation-delay:0s;animation-duration:.5s;animation-fill-mode:forwards;animation-timing-function:ease-out;animation-name:fadeIn}@-moz-keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-webkit-keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-o-keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@keyframes fadeIn{0%{opacity:0;-webkit-opacity:0;-moz-opacity:0;filter:blur(12px);transform:scale(1.02);-webkit-transform:scale(1.02);-khtml-transform:scale(1.02);-moz-transform:scale(1.02);-o-transform:scale(1.02);-ms-transform:scale(1.02)}100%{opacity:1;-webkit-opacity:1;-moz-opacity:1}}.cover-wrapper .cover-body{z-index:1;position:relative;width:100%;height:100%}.cover-wrapper#full{height:calc(100vh + 100px);padding-bottom:100px}.cover-wrapper#half{max-height:640px;min-height:400px;height:calc(36vh - 64px + 200px)}.cover-wrapper #scroll-down{width:100%;height:64px;position:absolute;bottom:100px;text-align:center;cursor:pointer}.cover-wrapper #scroll-down .scroll-down-effects{color:#fff;font-size:24px;line-height:64px;position:absolute;width:24px;left:calc(50% - 12px);text-shadow:0 1px 2px rgba(0,0,0,.1);animation:scroll-down-effect 1.5s infinite;-webkit-animation:scroll-down-effect 1.5s infinite;-khtml-animation:scroll-down-effect 1.5s infinite;-moz-animation:scroll-down-effect 1.5s infinite;-o-animation:scroll-down-effect 1.5s infinite;-ms-animation:scroll-down-effect 1.5s infinite}@-moz-keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:.4;-moz-opacity:.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-webkit-keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:.4;-moz-opacity:.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}@-o-keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:.4;-moz-opacity:.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}@keyframes scroll-down-effect{0%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}50%{top:-16px;opacity:.4;-webkit-opacity:.4;-moz-opacity:.4}100%{top:0;opacity:1;-webkit-opacity:1;-moz-opacity:1}}.cover-wrapper .cover-body{margin-top:64px;margin-bottom:100px}.cover-wrapper .cover-body,.cover-wrapper .cover-body .bottom,.cover-wrapper .cover-body .top{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:vertical;-moz-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;justify-content:center;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-o-justify-content:center;-ms-justify-content:center;max-width:100%}.cover-wrapper .cover-body .bottom{margin-top:32px}.cover-wrapper .cover-body .title{font-family:SentyGoldenBell,"Varela Round","PingFang SC","Microsoft YaHei",Helvetica,Arial,Helvetica,monospace;font-size:3.125rem;line-height:1.2;text-shadow:0 1px 2px rgba(0,0,0,.1);text-align:center}.cover-wrapper .cover-body .subtitle{font-size:20px}.cover-wrapper .cover-body .logo{max-height:120px;max-width:calc(100% - 4 * 16px)}@media screen and (min-height:1024px){.cover-wrapper .cover-body .title{font-size:3rem}.cover-wrapper .cover-body .subtitle{font-size:1.05rem}.cover-wrapper .cover-body .logo{max-height:150px}}.cover-wrapper .cover-body .m_search{position:relative;max-width:calc(100% - 16px);width:320px;vertical-align:middle}.cover-wrapper .cover-body .m_search .form{position:relative;display:-webkit-box;display:-moz-box;display:block;width:100%}.cover-wrapper .cover-body .m_search .icon,.cover-wrapper .cover-body .m_search .input{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.cover-wrapper .cover-body .m_search .icon{position:absolute;display:-webkit-box;display:-moz-box;display:block;line-height:2.5rem;width:32px;top:0;left:5px;color:rgba(68,68,68,.75)}.cover-wrapper .cover-body .m_search .input{display:-webkit-box;display:-moz-box;display:block;height:2.5rem;width:100%;box-shadow:none;-webkit-box-shadow:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;font-size:.875rem;-webkit-appearance:none;padding-left:36px;border-radius:1.4rem;-webkit-border-radius:1.4rem;background:rgba(255,255,255,.6);backdrop-filter:blur(10px);border:none;color:var(--color-text)}@media screen and (max-width:500px){.cover-wrapper .cover-body .m_search .input{padding-left:36px}}.cover-wrapper .cover-body .m_search .input:hover{background:rgba(255,255,255,.8)}.cover-wrapper .cover-body .m_search .input:focus{background:#fff}.cover-wrapper .list-h{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;flex-wrap:wrap;-webkit-flex-wrap:wrap;-khtml-flex-wrap:wrap;-moz-flex-wrap:wrap;-o-flex-wrap:wrap;-ms-flex-wrap:wrap;align-items:stretch;border-radius:4px;-webkit-border-radius:4px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.cover-wrapper .list-h a{-webkit-box-flex:1;-moz-box-flex:1;-webkit-flex:1 0;-ms-flex:1 0;flex:1 0;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;font-weight:600}.cover-wrapper .list-h a img{display:-webkit-box;display:-moz-box;display:block;border-radius:2px;-webkit-border-radius:2px;margin:4px;min-width:40px;max-width:44px}@media screen and (max-width:768px){.cover-wrapper .list-h a img{min-width:36px;max-width:40px}}@media screen and (max-width:500px){.cover-wrapper .list-h a img{margin:2px 4px;min-width:32px;max-width:36px}}@media screen and (max-width:375px){.cover-wrapper .list-h a img{min-width:28px;max-width:32px}}.cover-wrapper{max-width:100%}.cover-wrapper.search .bottom .menu{margin-top:16px}.cover-wrapper.search .bottom .menu .list-h a{white-space:nowrap;-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:horizontal;-moz-box-orient:horizontal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;align-items:baseline;padding:2px;margin:4px;color:var(--color-site-inner);opacity:.75;-webkit-opacity:.75;-moz-opacity:.75;text-shadow:0 1px 2px rgba(0,0,0,.05);border-bottom:2px solid transparent}.cover-wrapper.search .bottom .menu .list-h a i{margin-right:4px}.cover-wrapper.search .bottom .menu .list-h a p{font-size:.9375rem}.cover-wrapper.search .bottom .menu .list-h a.active,.cover-wrapper.search .bottom .menu .list-h a:active,.cover-wrapper.search .bottom .menu .list-h a:hover{opacity:1;-webkit-opacity:1;-moz-opacity:1;border-bottom:2px solid var(--color-site-inner)}.cover-wrapper.dock .menu,.cover-wrapper.featured .menu,.cover-wrapper.focus .menu{border-radius:6px;-webkit-border-radius:6px}.cover-wrapper.dock .menu .list-h a,.cover-wrapper.featured .menu .list-h a,.cover-wrapper.focus .menu .list-h a{-webkit-box-direction:normal;-moz-box-direction:normal;-webkit-box-orient:vertical;-moz-box-orient:vertical;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;align-items:center;padding:12px;line-height:24px;border-radius:4px;-webkit-border-radius:4px;border-bottom:none;text-align:center;align-content:flex-end;color:rgba(68,68,68,.7);font-size:1.5rem}@media screen and (max-width:500px){.cover-wrapper.dock .menu .list-h a,.cover-wrapper.featured .menu .list-h a,.cover-wrapper.focus .menu .list-h a{padding:12px 8px}}.cover-wrapper.dock .menu .list-h a i,.cover-wrapper.featured .menu .list-h a i,.cover-wrapper.focus .menu .list-h a i{margin:8px}.cover-wrapper.dock .menu .list-h a p,.cover-wrapper.featured .menu .list-h a p,.cover-wrapper.focus .menu .list-h a p{font-size:.875rem}.cover-wrapper.dock .menu .list-h a.active,.cover-wrapper.featured .menu .list-h a.active,.cover-wrapper.focus .menu .list-h a.active{background:var(--color-card);backdrop-filter:none}.cover-wrapper.dock .menu .list-h a.active i,.cover-wrapper.dock .menu .list-h a.active i+p,.cover-wrapper.featured .menu .list-h a.active i,.cover-wrapper.featured .menu .list-h a.active i+p,.cover-wrapper.focus .menu .list-h a.active i,.cover-wrapper.focus .menu .list-h a.active i+p{color:#44d7b6}.cover-wrapper.dock .menu .list-h a.active img+p,.cover-wrapper.featured .menu .list-h a.active img+p,.cover-wrapper.focus .menu .list-h a.active img+p{color:var(--color-text)}.cover-wrapper.dock .menu .list-h a:hover,.cover-wrapper.featured .menu .list-h a:hover,.cover-wrapper.focus .menu .list-h a:hover{background:var(--color-card)}.cover-wrapper.dock .top{margin-bottom:48px}.cover-wrapper.dock .menu{background:rgba(255,255,255,.5);position:absolute;bottom:0;max-width:100%}.cover-wrapper.dock .menu .list-h{flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-khtml-flex-wrap:nowrap;-moz-flex-wrap:nowrap;-o-flex-wrap:nowrap;-ms-flex-wrap:nowrap;margin:4px}.cover-wrapper.dock .menu .list-h a+a{margin-left:4px}@media screen and (max-width:500px){.cover-wrapper.dock .menu .list-h{overflow-x:scroll}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar{height:0;width:0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-track-piece{background:0 0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb{background:#44d7b6;cursor:pointer;border-radius:0;-webkit-border-radius:0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb:hover{background:#ff5722}}@supports (backdrop-filter:blur(20px)){.cover-wrapper.dock .menu{background:rgba(255,255,255,.5);backdrop-filter:saturate(200%) blur(20px)}}@media (prefers-color-scheme:dark){:root{--color-mode:'dark'}:root:not([color-scheme]){--color-site-body:#000;--color-read-bkg:#222;--color-read-post:#333;--color-site-bg:#222;--color-site-inner:#eee;--color-site-footer:#aaa;--color-card:#333;--color-text:#eee;--color-block:#3a3a3a;--color-codeblock:#343a3c;--color-inlinecode:#d56d28;--color-h1:#eee;--color-h2:#eee;--color-h3:#ddd;--color-h4:#ddd;--color-h5:#ddd;--color-h6:#ddd;--color-p:#bbb;--color-list:#aaa;--color-list-hl:#69dfc4;--color-meta:#888;--color-link:#888}:root:not([color-scheme]) img{filter:brightness(70%)!important}:root:not([color-scheme]) #wrapper .title{color:var(--color-meta)!important}:root:not([color-scheme]) .l_header ul.nav-list-h>li>a,:root:not([color-scheme]) ul.list-v>li>a{color:var(--color-list)!important}:root:not([color-scheme]) .blur{background:var(--color-site-bg)!important}:root:not([color-scheme]) .nav-main .u-search-input{background:var(--color-card)!important}:root:not([color-scheme]) #l_main .article .prev-next>a{background:var(--color-block)!important}:root:not([color-scheme]) #l_main .article .prev-next>a:hover{background:var(--color-card)!important}:root:not([color-scheme]) .article blockquote{background:var(--color-block)!important}:root:not([color-scheme]) .article-title a{color:var(--color-h1)!important}:root:not([color-scheme]) details>summary{color:var(--color-p)!important;background:var(--color-site-bg)!important}:root:not([color-scheme]) details{border:1px solid var(--color-site-bg)!important;background:var(--color-site-bg)!important}:root:not([color-scheme]) #u-search .modal,:root:not([color-scheme]) #u-search .modal-body,:root:not([color-scheme]) #u-search .modal-header{background:var(--color-card)!important}:root:not([color-scheme]) #u-search .modal-body .modal-results .result:hover{background:var(--color-block)!important}}[color-scheme=dark]{--color-site-body:#000;--color-read-bkg:#222;--color-read-post:#333;--color-site-bg:#222;--color-site-inner:#eee;--color-site-footer:#aaa;--color-card:#333;--color-text:#eee;--color-block:#3a3a3a;--color-codeblock:#343a3c;--color-inlinecode:#d56d28;--color-h1:#eee;--color-h2:#eee;--color-h3:#ddd;--color-h4:#ddd;--color-h5:#ddd;--color-h6:#ddd;--color-p:#bbb;--color-list:#aaa;--color-list-hl:#69dfc4;--color-meta:#888;--color-link:#888}[color-scheme=dark] img{filter:brightness(70%)!important}[color-scheme=dark] #wrapper .title{color:var(--color-meta)!important}[color-scheme=dark] .l_header ul.nav-list-h>li>a,[color-scheme=dark] ul.list-v>li>a{color:var(--color-list)!important}[color-scheme=dark] .blur{background:var(--color-site-bg)!important}[color-scheme=dark] .nav-main .u-search-input{background:var(--color-card)!important}[color-scheme=dark] #l_main .article .prev-next>a{background:var(--color-block)!important}[color-scheme=dark] #l_main .article .prev-next>a:hover{background:var(--color-card)!important}[color-scheme=dark] .article blockquote{background:var(--color-block)!important}[color-scheme=dark] .article-title a{color:var(--color-h1)!important}[color-scheme=dark] details>summary{color:var(--color-p)!important;background:var(--color-site-bg)!important}[color-scheme=dark] details{border:1px solid var(--color-site-bg)!important;background:var(--color-site-bg)!important}[color-scheme=dark] #u-search .modal,[color-scheme=dark] #u-search .modal-body,[color-scheme=dark] #u-search .modal-header{background:var(--color-card)!important}[color-scheme=dark] #u-search .modal-body .modal-results .result:hover{background:var(--color-block)!important}@media screen and (max-width:500px){[color-scheme=dark] .l_header .m_search{background:var(--color-site-bg)!important}}@font-face{font-family:hytmr;src:url(https://cdn.jsdelivr.net/gh/sizaif/blog-cdn@main/fonts/hytmr55.woff);font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:SentyGoldenBell;src:url(https://cdn.jsdelivr.net/gh/inkss/common@1/fonts/canva/SentyGoldenBell.woff2);font-weight:'normal;';font-style:'normal;';font-display:swap}.l_header{position:fixed;z-index:1000;top:0;width:100%;height:64px;background:var(--color-card);box-shadow:0 1px 2px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 1px 2px 0 rgba(0,0,0,.1)}.l_header.auto{transition:opacity .4s ease;-webkit-transition:opacity .4s ease;-khtml-transition:opacity .4s ease;-moz-transition:opacity .4s ease;-o-transition:opacity .4s ease;-ms-transition:opacity .4s ease;visibility:hidden}.l_header.auto.show{opacity:1!important;-webkit-opacity:1!important;-moz-opacity:1!important;visibility:visible}.l_header .container{margin-left:16px;margin-right:16px}.l_header #wrapper{height:100%;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.l_header #wrapper .nav-main,.l_header #wrapper .nav-sub{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-khtml-flex-wrap:nowrap;-moz-flex-wrap:nowrap;-o-flex-wrap:nowrap;-ms-flex-wrap:nowrap;justify-content:space-between;-webkit-justify-content:space-between;-khtml-justify-content:space-between;-moz-justify-content:space-between;-o-justify-content:space-between;-ms-justify-content:space-between;align-items:center}.l_header #wrapper .nav-main{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.l_header #wrapper.sub .nav-main{transform:translateY(-64px);-webkit-transform:translateY(-64px);-khtml-transform:translateY(-64px);-moz-transform:translateY(-64px);-o-transform:translateY(-64px);-ms-transform:translateY(-64px)}.l_header #wrapper .nav-sub{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;opacity:0;-webkit-opacity:0;-moz-opacity:0;height:64px;width:calc(100% - 2 * 16px);position:absolute}.l_header #wrapper .nav-sub ::-webkit-scrollbar{display:-webkit-box;display:-moz-box;display:none}@media screen and (min-width:2048px){.l_header #wrapper .nav-sub{max-width:55vw;margin:auto}}.l_header #wrapper.sub .nav-sub{opacity:1;-webkit-opacity:1;-moz-opacity:1}.l_header #wrapper .title{position:relative;color:var(--color-text);padding-left:24px;max-height:64px}.l_header #wrapper .nav-main .title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-shrink:0;line-height:64px;padding:0 24px;font-size:1.25rem;font-family:SentyGoldenBell,"Varela Round","PingFang SC","Microsoft YaHei",Helvetica,Arial,Helvetica,monospace}.l_header #wrapper .nav-main .title img{height:64px}.l_header .nav-sub{max-width:1080px;margin:auto}.l_header .nav-sub .title{font-weight:700;font-family:hytmr,UbuntuMono,"Varela Round","PingFang SC","Microsoft YaHei",Helvetica,Arial,Menlo,Monaco,monospace,sans-serif;line-height:1.2;max-height:64px;white-space:normal;flex-shrink:1}.l_header .switcher{display:-webkit-box;display:-moz-box;display:none;line-height:64px;align-items:center}.l_header .switcher .s-toc{display:-webkit-box;display:-moz-box;display:none}@media screen and (max-width:768px){.l_header .switcher .s-toc{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex}}.l_header .switcher>li{height:48px;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;margin:2px}@media screen and (max-width:500px){.l_header .switcher>li{margin:0 1px;height:48px}}.l_header .switcher>li>a{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;justify-content:center;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-o-justify-content:center;-ms-justify-content:center;align-items:center;width:48px;height:48px;padding:.85em 1.1em;border-radius:100px;-webkit-border-radius:100px;border:none;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;color:#44d7b6}.l_header .switcher>li>a:hover{border:none}.l_header .switcher>li>a.active,.l_header .switcher>li>a:active{border:none;background:var(--color-site-bg)}@media screen and (max-width:500px){.l_header .switcher>li>a{width:36px;height:48px}}.l_header .nav-sub .switcher{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex}.l_header .m_search{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;height:64px;width:240px;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}@media screen and (max-width:1024px){.l_header .m_search{width:44px;min-width:44px}.l_header .m_search input::placeholder{opacity:0;-webkit-opacity:0;-moz-opacity:0}.l_header .m_search:hover{width:240px}.l_header .m_search:hover input::placeholder{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@media screen and (min-width:500px){.l_header .m_search:hover .input{width:100%}.l_header .m_search:hover .input::placeholder{opacity:1;-webkit-opacity:1;-moz-opacity:1}}@media screen and (max-width:500px){.l_header .m_search{min-width:0}.l_header .m_search input::placeholder{opacity:1;-webkit-opacity:1;-moz-opacity:1}}.l_header .m_search .form{position:relative;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;width:100%;align-items:center}.l_header .m_search .icon{position:absolute;width:36px;left:5px;color:var(--color-meta)}@media screen and (max-width:500px){.l_header .m_search .icon{display:-webkit-box;display:-moz-box;display:none}}.l_header .m_search .input{display:-webkit-box;display:-moz-box;display:block;padding-top:8px;padding-bottom:8px;line-height:1.3;width:100%;color:var(--color-text);background:#fafafa;box-shadow:none;-webkit-box-shadow:none;box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;padding-left:40px;font-size:.875rem;border-radius:8px;-webkit-border-radius:8px;border:none;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}@media screen and (min-width:500px){.l_header .m_search .input:focus{box-shadow:0 4px 8px 0 rgba(0,0,0,.1);-webkit-box-shadow:0 4px 8px 0 rgba(0,0,0,.1)}}@media screen and (max-width:500px){.l_header .m_search .input{background:var(--color-block);padding-left:8px;border:none}.l_header .m_search .input:focus,.l_header .m_search .input:hover{border:none}}@media (max-width:500px){.l_header .m_search{left:0;width:0;overflow:hidden;position:absolute;background:#fff;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.l_header .m_search .input{border-radius:32px;-webkit-border-radius:32px;margin-left:16px;padding-left:16px}.l_header.z_search-open .m_search{width:100%}.l_header.z_search-open .m_search .input{width:calc(100% - 120px)}}ul.m-pc>li>a{color:inherit;border-bottom:2px solid transparent}ul.m-pc>li>a.active,ul.m-pc>li>a:active{border-bottom:2px solid #44d7b6}ul.list-v li:hover>ul.list-v,ul.m-pc li:hover>ul.list-v{display:-webkit-box;display:-moz-box;display:block}ul.nav-list-h{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;align-items:stretch}ul.nav-list-h>li{position:relative;justify-content:center;-webkit-justify-content:center;-khtml-justify-content:center;-moz-justify-content:center;-o-justify-content:center;-ms-justify-content:center;height:100%;line-height:2.4;border-radius:4px;-webkit-border-radius:4px}ul.nav-list-h>li>a{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-weight:600}ul.list-v{z-index:1;display:-webkit-box;display:-moz-box;display:none;position:absolute;background:var(--color-card);box-shadow:0 2px 4px 0 rgba(0,0,0,.08),0 4px 8px 0 rgba(0,0,0,.08),0 8px 16px 0 rgba(0,0,0,.08);-webkit-box-shadow:0 2px 4px 0 rgba(0,0,0,.08),0 4px 8px 0 rgba(0,0,0,.08),0 8px 16px 0 rgba(0,0,0,.08);margin-top:-6px;border-radius:4px;-webkit-border-radius:4px;padding:8px 0}ul.list-v.show{display:-webkit-box;display:-moz-box;display:block}ul.list-v hr{margin-top:8px;margin-bottom:8px}ul.list-v>li{white-space:nowrap;word-break:keep-all}ul.list-v>li.header{font-size:.78125rem;font-weight:700;line-height:2em;color:var(--color-meta);margin:8px 16px 4px}ul.list-v>li.header i{margin-right:8px}ul.list-v>li ul{margin-left:0;display:-webkit-box;display:-moz-box;display:none;margin-top:-40px}ul.list-v .aplayer-container{min-height:64px;padding:6px 16px}ul.list-v>li>a{transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease;display:-webkit-box;display:-moz-box;display:block;color:var(--color-list);font-size:.875rem;font-weight:700;line-height:36px;padding:0 20px 0 16px;text-overflow:ellipsis;margin:0 4px;border-radius:4px;-webkit-border-radius:4px}@media screen and (max-width:1024px){ul.list-v>li>a{line-height:40px}}ul.list-v>li>a>i{margin-right:8px}ul.list-v>li>a.active,ul.list-v>li>a:active{color:var(--color-list-hl)}ul.list-v>li>a:hover{color:var(--color-list-hl);background:var(--color-site-bg)}.l_header .menu>ul>li>a{display:-webkit-box;display:-moz-box;display:block;padding:0 8px}.l_header .menu>ul>li>a>i{margin-right:4px}.l_header ul.nav-list-h>li{color:var(--color-list);line-height:64px}.l_header ul.nav-list-h>li>a{max-height:64px;overflow:hidden;color:inherit}.l_header ul.nav-list-h>li>a.active,.l_header ul.nav-list-h>li>a:active{color:#44d7b6}.l_header ul.nav-list-h>li:hover>a{color:var(--color-list-hl)}.l_header ul.nav-list-h>li i.music{animation:rotate-effect 1.5s linear infinite;-webkit-animation:rotate-effect 1.5s linear infinite;-khtml-animation:rotate-effect 1.5s linear infinite;-moz-animation:rotate-effect 1.5s linear infinite;-o-animation:rotate-effect 1.5s linear infinite;-ms-animation:rotate-effect 1.5s linear infinite}@-moz-keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}@-webkit-keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}@-o-keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}@keyframes rotate-effect{0%{transform:rotate(0);-webkit-transform:rotate(0);-khtml-transform:rotate(0);-moz-transform:rotate(0);-o-transform:rotate(0);-ms-transform:rotate(0)}25%{transform:rotate(90deg);-webkit-transform:rotate(90deg);-khtml-transform:rotate(90deg);-moz-transform:rotate(90deg);-o-transform:rotate(90deg);-ms-transform:rotate(90deg)}50%{transform:rotate(180deg);-webkit-transform:rotate(180deg);-khtml-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg)}75%{transform:rotate(270deg);-webkit-transform:rotate(270deg);-khtml-transform:rotate(270deg);-moz-transform:rotate(270deg);-o-transform:rotate(270deg);-ms-transform:rotate(270deg)}100%{transform:rotate(360deg);-webkit-transform:rotate(360deg);-khtml-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);-ms-transform:rotate(360deg)}}.menu-phone li ul.list-v{right:calc(100% - .5 * 16px)}.menu-phone li ul.list-v ul{right:calc(100% - .5 * 16px)}#wrapper{max-width:1080px;margin:auto}@media screen and (min-width:2048px){#wrapper{max-width:55vw}}#wrapper .menu{-webkit-box-flex:1;-moz-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;margin:0 16px 0 0}#wrapper .menu .list-v ul{left:calc(100% - .5 * 16px)}.menu-phone{display:-webkit-box;display:-moz-box;display:none;margin-top:16px;right:8px;transition:all .28s ease;-webkit-transition:all .28s ease;-khtml-transition:all .28s ease;-moz-transition:all .28s ease;-o-transition:all .28s ease;-ms-transition:all .28s ease}.menu-phone ul{right:calc(100% - .5 * 16px)}@media screen and (max-width:500px){.menu-phone{display:-webkit-box;display:-moz-box;display:block}}.l_header{max-width:65vw;left:calc((100% - 65vw) * .5);border-bottom-left-radius:8px;border-bottom-right-radius:8px}@media screen and (max-width:2048px){.l_header{max-width:1112px;left:calc((100% - 1112px) * .5)}}@media screen and (max-width:1112px){.l_header{left:0;border-radius:0;-webkit-border-radius:0;max-width:100%}}@media screen and (max-width:500px){.l_header .container{margin-left:0;margin-right:0}.l_header #wrapper .nav-main .title{padding-left:16px;padding-right:16px}.l_header #wrapper .nav-sub{width:100%}.l_header #wrapper .nav-sub .title{overflow-y:scroll;margin-top:2px;padding:8px 16px}.l_header #wrapper .switcher{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;display:flex;margin-right:8px}.l_header .menu{display:-webkit-box;display:-moz-box;display:none}}@media screen and (max-width:500px){.list-v li{max-width:270px}}#u-search{display:-webkit-box;display:-moz-box;display:none;position:fixed;top:0;left:0;width:100%;height:100%;padding:60px 20px;z-index:1001}@media screen and (max-width:680px){#u-search{padding:0}}@media screen and (prefers-color-scheme:dark) and (max-width:500px){.l_header .m_search{background:var(--color-site-bg)!important}}</style>
  <link rel="stylesheet" href="/css/style.css?time=1667802749504" media="print" onload="this.media='all';this.onload=null">
  <noscript><link rel="stylesheet" href="/css/style.css?time=1667802749504"></noscript>
    <script>
      var userColorScheme=localStorage.getItem("color-scheme")
      if(userColorScheme){
        document.documentElement.setAttribute("color-scheme", userColorScheme);
      }
    </script>
  

<noscript>
	<style>html{overflow-x:hidden!important;overflow-y:hidden!important}.kill-noscript{text-align:center;height:100%;margin-top:15%;margin-bottom:5500%}.kill-t{font-size:2rem}.kill-c{font-size:1.2rem}#l_body,#l_header{display:none}</style>
    <div class="kill-noscript">
        <span class="kill-t"><b>抱歉，您的浏览器无法访问本站</b></span><br>
        <span class="kill-c">本页面需要浏览器支持（启用）JavaScript</span><br>
        <a target="_blank" rel="noopener" href="https://www.baidu.com/s?wd=启用JavaScript"><strong>了解详情 ></strong></a>
    </div>
</noscript>


  
  
  
</head>
  <body itemscope itemtype="http://schema.org/WebPage">
    <header itemscope itemtype="http://schema.org/WPHeader" id="l_header" class="l_header auto shadow blur show" style="opacity:0">
  <div class="container">
  <div id="wrapper">
    <div class="nav-sub">
      <p class="title"></p>
      <ul class="switcher nav-list-h m-phone" id="pjax-header-nav-list">
        <li><a id="s-comment" class="fas fa-comments fa-fw" target="_self" href="/" onclick="return false;" title="comment"></a></li>
        
          <li><a id="s-toc" class="s-toc fas fa-list fa-fw" target="_self" href="/" onclick="return false;" title="toc"></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href="/">
          
          
          
            Sizaif's blog
          
        </a>
      

			<div class="menu navigation">
				<ul class="nav-list-h m-pc">
          
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/" active-action="action-home">
                  <i class="fad fa-home fa-fw WISTERIA fa-fw"></i>博客
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return false;" title="Click me!">
                  <i class="fal fa-grip-horizontal NEPHRITIS fa-fw"></i>导航
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/navigation/archives/" active-action="action-navigationarchives">
                  <i class="fad fa-list-alt BELIZEHOLE fa-fw"></i>文章归档
                </a>
                
              </li>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/navigation/categories/" active-action="action-navigationcategories">
                  <i class="fad fa-folder-open SUNFLOWER fa-fw"></i>分类列表
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/page/notes/" active-action="action-pagenotes">
                  <i class="fal fa-books CARROT fa-fw"></i>小小笔记
                </a>
                
              </li>
            
          
                    
                  </ul>
                
              </li>
            
          
          
            
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/page/friends/" active-action="action-pagefriends">
                  <i class="fad fa-link ORANGE fa-fw"></i>小伙伴
                </a>
                
              </li>
            
          
          
            
            
              
                <li>
                  <a class="menuitem flat-box" href="/" onclick="return false;" title="Click me!">
                    <i class="fad fa-compact-disc PINK fa-fw music"></i>随心听
                  </a>
                  <ul class="list-v">
                    <li>
                      <div class="aplayer-container">
                        

  
    <meting-js theme="#1BCDFC" autoplay="true" volume="0.7" loop="all" order="random" fixed="false" list-max-height="320px" server="tencent" type="playlist" id="8110970572" list-folded="true">
    </meting-js>
  


                      </div>
                    </li>
                  </ul>
                </li><li>
              
            
          
          
            
            
              </li><li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return false;" title="Click me!">
                  <i class="fad fa-ellipsis-v fa-fw POMEGRANATE fa-fw"></i>更多
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/page/about/" active-action="action-pageabout">
                  <i class="fad fa-info-circle CARROT fa-fw"></i>关于
                </a>
                
              </li>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/page/history/" active-action="action-pagehistory">
                  <i class="fad fa-history PUMPKIN fa-fw"></i>时间轴
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return false;" title="Click me!">
                  <i class="fad fa-fighter-jet NEPHRITIS fa-fw"></i>快速导航
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="https://github.com/sizaif" active-action="action-https:githubcomsizaif">
                  <i class="fad fa-code-merge LightBlue fa-fw"></i>GitHub
                </a>
                
              </li>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="https://blog.csdn.net/sizaif" active-action="action-https:blogcsdnnetsizaif">
                  <i class="fad fa-blog CYAN fa-fw"></i>CSDN
                </a>
                
              </li>
            
          
                    
                  </ul>
                
              </li>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return false;" title="Click me!">
                  <i class="fad fa-book-reader NEPHRITIS fa-fw"></i>docker手册
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/page/clubmanualv1/" active-action="action-pageclubmanualv1">
                  <i class="fad fa-journal-whills LightBlue fa-fw"></i>Clubmanualv1
                </a>
                
              </li>
            
          
                    
                  </ul>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                  </ul>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="想找什么呢">
        </form>
      </div>

			<ul class="switcher nav-list-h m-phone">
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href="/" onclick="return false;" title="search"></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href="/" onclick="return false;" title="menu"></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/" active-action="action-home">
                  <i class="fad fa-home fa-fw WISTERIA fa-fw"></i>博客
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return false;" title="Click me!">
                  <i class="fal fa-grip-horizontal NEPHRITIS fa-fw"></i>导航
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/navigation/archives/" active-action="action-navigationarchives">
                  <i class="fad fa-list-alt BELIZEHOLE fa-fw"></i>文章归档
                </a>
                
              </li>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/navigation/categories/" active-action="action-navigationcategories">
                  <i class="fad fa-folder-open SUNFLOWER fa-fw"></i>分类列表
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/page/notes/" active-action="action-pagenotes">
                  <i class="fal fa-books CARROT fa-fw"></i>小小笔记
                </a>
                
              </li>
            
          
                    
                  </ul>
                
              </li>
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/page/friends/" active-action="action-pagefriends">
                  <i class="fad fa-link ORANGE fa-fw"></i>小伙伴
                </a>
                
              </li>
            
          
            
              
            
              
            
          
            
              
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return false;" title="Click me!">
                  <i class="fad fa-ellipsis-v fa-fw POMEGRANATE fa-fw"></i>更多
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/page/about/" active-action="action-pageabout">
                  <i class="fad fa-info-circle CARROT fa-fw"></i>关于
                </a>
                
              </li>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/page/history/" active-action="action-pagehistory">
                  <i class="fad fa-history PUMPKIN fa-fw"></i>时间轴
                </a>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return false;" title="Click me!">
                  <i class="fad fa-fighter-jet NEPHRITIS fa-fw"></i>快速导航
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="https://github.com/sizaif" active-action="action-https:githubcomsizaif">
                  <i class="fad fa-code-merge LightBlue fa-fw"></i>GitHub
                </a>
                
              </li>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="https://blog.csdn.net/sizaif" active-action="action-https:blogcsdnnetsizaif">
                  <i class="fad fa-blog CYAN fa-fw"></i>CSDN
                </a>
                
              </li>
            
          
                    
                  </ul>
                
              </li>
            
          
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/" onclick="return false;" title="Click me!">
                  <i class="fad fa-book-reader NEPHRITIS fa-fw"></i>docker手册
                </a>
                
                  <ul class="list-v">
                    
                      
            
              <li>
                <a class="menuitem flat-box faa-parent animated-hover" href="/page/clubmanualv1/" active-action="action-pageclubmanualv1">
                  <i class="fad fa-journal-whills LightBlue fa-fw"></i>Clubmanualv1
                </a>
                
              </li>
            
          
                    
                  </ul>
                
              </li>
            
          
                    
                      
            
              <hr>
            
          
                    
                  </ul>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>

      
      
      
		</div>
	</div>
  </div>
</header>

    <div id="l_body">
      <div id="l_cover">
  
    
      
      <div id="none" class="cover-wrapper post dock" style="display:none">
        
  <div class="cover-bg lazyload placeholder" data-bg="https://cdn.jsdelivr.net/gh/sizaif/blog-cdn@main/img/bkg/crop02.webp"></div>

<div class="cover-body">
  <div class="top">
    
    
      <p class="title">Sizaif</p>
    
    
      <p class="subtitle">Keep learning and progress!</p>
    
  </div>
  <div class="bottom">
    <div class="menu navigation">
      <div class="list-h">
        
          
            <a href="/" active-action="action-home">
              <i class="fad fa-home fa-fw BELIZEHOLE fa-fw"></i><p>首页</p>
            </a>
          
            <a href="/navigation/categories/" active-action="action-navigationcategories">
              <i class="fad fa-folder-open EMERALD fa-fw"></i><p>分类</p>
            </a>
          
            <a href="/navigation/archives/" active-action="action-navigationarchives">
              <i class="fad fa-archive PETERRIVE fa-fw"></i><p>归档</p>
            </a>
          
            <a href="/page/friends/" active-action="action-pagefriends">
              <i class="fad fa-link AMETHYST fa-fw"></i><p>小伙伴</p>
            </a>
          
            <a href="/page/about/" active-action="action-pageabout">
              <i class="fad fa-book-reader TURQUOISE fa-fw"></i><p>关于我</p>
            </a>
          
        
      </div>
    </div>
  </div>
</div>

        <div id="scroll-down" style="display:none"><i class="fa fa-chevron-down scroll-down-effects"></i></div>
      </div>
    
  
</div>

      <div id="safearea">
        <div class="body-wrapper" id="pjax-container">
          
<div id="l_main" class="">
  <article itemscope itemtype="http://schema.org/Article" class="article post white-box reveal md shadow article-type-post" id="post" itemscope itemprop="blogPost">
  <link itemprop="mainEntityOfPage" href="https://www.sizaif.com/posts/32795611/">
  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sizaif's Blog">
  </span>
  


  
    <span hidden>
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png">
    </span>
  
  <div class="article-meta" id="top">
    
    
    
      <h1 class="title" itemprop="name headline">
        LLVM 学习(二) -LLVM IR 语法理论学习
      </h1>
      <div class="new-meta-box">
        
          
            
<div class="new-meta-item author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <a itemprop="url" class="author" href="/page/about/" rel="nofollow">
    <img itemprop="image" src="/img/avatar.webp" class="lazyload" data-srcset="/img/avatar.webp" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="This is a picture without description">
    <p itemprop="name">sizaif</p>
  </a>
</div>

          
        
          
        
          
            
  <div class="new-meta-item category">
    <i class="fad fa-folder-open NEPHRITIS fa-fw" aria-hidden="true"></i>
    <a class="category-link" href="/navigation/categories/Master/">Master</a><span class="sep"></span><a class="category-link" href="/navigation/categories/Master/LLVM/">LLVM</a>
    
      <span hidden itemprop="about" itemscope itemtype="http://schema.org/Thing">
        <a href="/navigation/categories/Master/" itemprop="url"><span itemprop="name">Master</span></a>
      </span>
    
      <span hidden itemprop="about" itemscope itemtype="http://schema.org/Thing">
        <a href="/navigation/categories/Master/LLVM/" itemprop="url"><span itemprop="name">LLVM</span></a>
      </span>
    
  </div>


          
        
          
            
  <div class="new-meta-item browse leancloud">
    <a class="notlink" href="/" onclick="return false;" title="Click me!">
      
      <div id="lc-pv" data-title="LLVM 学习(二) -LLVM IR 语法理论学习" data-path="/posts/32795611/">
        <i class="fad fa-eye GREENSEA fa-fw" aria-hidden="true"></i>
        <span id="number"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
        次浏览
      </div>
    </a>
  </div>


          
        
          
            

          
        
          
            
  <div class="new-meta-item wordcount">
    <a class="notlink" href="/" onclick="return false;" title="Click me!">
      <i class="fad fa-keyboard BELIZEHOLE fa-fw" aria-hidden="true"></i>
      <p>字数：14.3k 字</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class="notlink" href="/" onclick="return false;" title="Click me!">
      <i class="fad fa-hourglass-half PETERRIVE fa-fw" aria-hidden="true"></i>
      <p>时长：66 分钟</p>
    </a>
  </div>


          
        
        
        
        
      </div>
    
  </div>


  <div id="layoutHelper-page-plugins"></div>
  <div id="post-body" itemprop="articleBody">
    <h1>LLVM 学习(二) -LLVM IR 语法理论学习</h1>
<blockquote>
<p>@create 2022-04-16 12:05:47</p>
<p>@sizaif</p>
<p><img src="https://s2.loli.net/2022/04/16/fuSeLF4G7Kpti1Q.png" class="lazyload" data-srcset="https://s2.loli.net/2022/04/16/fuSeLF4G7Kpti1Q.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="img"></p>
</blockquote>
<h2 id="LLVM-IR-语法">LLVM IR 语法</h2><div class="story post-story">
<blockquote>
<p><a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html">https://llvm.org/docs/LangRef.html</a></p>
</blockquote>
<p>LLVM IR中的标识符有两种基本类型：<font color="red">全局标识符（以<code>@</code>开头）和局部标识符（以<code>%</code>开头）</font></p>
<p>1、命名值以字母序列开头，例如：<code>%foo</code>, <code>@DivisionByZero</code>, <code>%a.really.long.identifier</code>. 正则表达式为： ‘<code>[%@][-a-zA-Z$._][-a-zA-Z$._0-9]*</code>‘.</p>
<p>2、非命名值以数字开头，例如： <code>%12</code>, <code>@2</code>, <code>%44</code>.</p>
<p><strong>全局标识符</strong>，包括全局变量、全局常量和函数</p>
<p><strong>局部标识符</strong>，即局部变量。LLVM IR中的局部变量有两种分类方案：</p>
<p>按照是否命名分类：</p>
<ul>
<li>命名局部变量：顾名思义，比如<code>%tmp</code></li>
<li>未命名局部变量：以带前缀的无符号数字值表示，比如<code>%1</code>、<code>%2</code>，按顺序编号，函数参数、未命名基本块都会增加计数</li>
</ul>
<p>按照分配方式分类：</p>
<ul>
<li>寄存器分配的局部变量：此类局部变量多采用<code>%1 = some value</code>形式进行分配，一般是接受指令返回结果的局部变量 ，</li>
<li>栈分配的局部变量：使用<code>alloca</code>指令在栈帧上分配的局部变量，比如<code>%2 = alloca i32</code>，<code>%2</code>也是个指针，访问或存储时必须使用<code>load</code>和<code>store</code>指令</li>
</ul>
<pre class="language-llvm" data-language="llvm"><code class="language-llvm"><span class="token keyword">define</span> <span class="token type class-name">i32</span> <span class="token variable">@main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token variable">%1</span> <span class="token punctuation">=</span> <span class="token keyword">alloca</span> <span class="token type class-name">i32</span><span class="token punctuation">,</span> <span class="token keyword">align</span> <span class="token number">4</span>
    <span class="token variable">%tmp</span> <span class="token punctuation">=</span> <span class="token keyword">alloca</span> <span class="token type class-name">i32</span><span class="token punctuation">,</span> <span class="token keyword">align</span> <span class="token number">4</span>
    <span class="token keyword">store</span> <span class="token type class-name">i32</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token type class-name">i32</span><span class="token punctuation">*</span> <span class="token variable">%1</span><span class="token punctuation">,</span> <span class="token keyword">align</span> <span class="token number">4</span>
    <span class="token keyword">store</span> <span class="token type class-name">i64</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token type class-name">i32</span><span class="token punctuation">*</span> <span class="token variable">%tmp</span><span class="token punctuation">,</span> <span class="token keyword">align</span> <span class="token number">8</span>
    <span class="token variable">%2</span> <span class="token punctuation">=</span> <span class="token keyword">add</span> <span class="token keyword">nsw</span> <span class="token type class-name">i32</span> <span class="token variable">%1</span><span class="token punctuation">,</span> <span class="token variable">%tmp</span>
    <span class="token variable">%result</span> <span class="token punctuation">=</span> <span class="token keyword">add</span> <span class="token keyword">nsw</span> <span class="token type class-name">i32</span> <span class="token variable">%1</span><span class="token punctuation">,</span> <span class="token variable">%2</span>
<span class="token punctuation">&#125;</span></code></pre>
<p>其中<code>%1</code>是栈分配的未命名局部变量，<code>%tmp</code>是栈分配的命名局部变量，<code>%2</code>是寄存器分配的未命名局部变量，<code>%result</code>是寄存器分配的命名局部变量</p>
<h3 id="模块结构">模块结构</h3>
<p>LLVM程序由模块组成，每个模块由函数、全局变量和符号表条目组成。</p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token punctuation">;</span> Declare the string constant as a global constant<span class="token punctuation">.</span>
<span class="token punctuation">;</span> 全局变量
@<span class="token punctuation">.</span>str <span class="token operator">=</span> <span class="token keyword">private</span> unnamed_addr constant <span class="token punctuation">[</span><span class="token number">13</span> x i8<span class="token punctuation">]</span> c<span class="token string">"hello world\0A\00"</span>

<span class="token punctuation">;</span> External declaration of the puts function
<span class="token punctuation">;</span> 函数的外部声明
declare i32 @<span class="token function">puts</span><span class="token punctuation">(</span>i8<span class="token operator">*</span> nocapture<span class="token punctuation">)</span> nounwind

<span class="token punctuation">;</span> Definition of main function
<span class="token punctuation">;</span> 主函数
define i32 @<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   <span class="token punctuation">;</span> <span class="token function">i32</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>
  <span class="token punctuation">;</span> Convert <span class="token punctuation">[</span><span class="token number">13</span> x i8<span class="token punctuation">]</span><span class="token operator">*</span> to i8<span class="token operator">*</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token operator">%</span>cast210 <span class="token operator">=</span> getelementptr <span class="token punctuation">[</span><span class="token number">13</span> x i8<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">13</span> x i8<span class="token punctuation">]</span><span class="token operator">*</span> @<span class="token punctuation">.</span>str<span class="token punctuation">,</span> i64 <span class="token number">0</span><span class="token punctuation">,</span> i64 <span class="token number">0</span>

  <span class="token punctuation">;</span> Call puts function to write out the string to <span class="token constant">stdout</span><span class="token punctuation">.</span>
  call i32 @<span class="token function">puts</span><span class="token punctuation">(</span>i8<span class="token operator">*</span> <span class="token operator">%</span>cast210<span class="token punctuation">)</span>
  ret i32 <span class="token number">0</span>
<span class="token punctuation">&#125;</span>

<span class="token punctuation">;</span> Named metadata
<span class="token punctuation">;</span> 元组数据
<span class="token operator">!</span><span class="token number">0</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">&#123;</span>i32 <span class="token number">42</span><span class="token punctuation">,</span> null<span class="token punctuation">,</span> <span class="token operator">!</span><span class="token string">"string"</span><span class="token punctuation">&#125;</span>
<span class="token operator">!</span>foo <span class="token operator">=</span> <span class="token operator">!</span><span class="token punctuation">&#123;</span><span class="token operator">!</span><span class="token number">0</span><span class="token punctuation">&#125;</span></code></pre>
<ul>
<li><code>Module</code>：LLVM程序由模块组成，每个输入程序都对应一个模块，模块包括函数、全局变量和符号表。多个模块可以被LLVM 链接器（linker）组合在一起。可以将LLVM中的Module类比为C程序中的源文件。一个C源文件中包含函数和全局变量定义、外部函数和外部函数声明，一个Module中包含的内容也基本上如此，只不过C源文件中是源码来表示，Module中是用IR来表示。</li>
<li><code>Function</code>：被Module所包含，LLVM的Function包含函数名、函数的返回值和参数类型，Function内部则包含BasicBlock。</li>
<li><code>BasicBlock</code>：与编译技术中常见的基本块(basic block)的概念是一致的，BasicBlock必须有一个进入标签和一条结束指令。结束指令一般是br跳转指令或者ret返回执行。</li>
<li><code>Instruction</code>：就是上面提到过的“指令”，LLVM IR的最基本的单位，Instruction被包含在BasicBlock中，一个BasicBlock可以有多条Instruction。</li>
</ul>
<h3 id="链接类型-Linkage-Types">链接类型(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1539">Linkage Types</a>)</h3>
<p>全局的值（全局变量和函数）都由指向某个特定位置的指针表示，并且有一个链接类型：</p>
<ul>
<li>
<p><code>private</code></p>
<p>private类型的全局变量只能被当前模块内的对象直接访问，私有</p>
</li>
<li>
<p><code>internal</code></p>
<p>与private类似，不过它的值会作为局部变量出现在目标文件中。类似C语言中static的概念。</p>
</li>
<li>
<p><code>available_externally</code></p>
<p>该类型的变量不会被输出到对应模块的目标文件中。对于链接者来说，该类型相当于一个外部声明。这种类型只允许在定义时使用，而不能在声明时使用。</p>
</li>
<li>
<p><code>linkonce</code></p>
<p>链接时，这种类型的变量会和其他同名变量merge。该类型的变量如果没被使用则可以被丢弃。这种类型的函数不允许优化器将其内联到调用者的函数体中，这个它有可能被重写。如果想允许内联或者其他优化，请使用<code>linkonce_odr</code>类型</p>
</li>
<li>
<p><code>weak</code></p>
<p>与<code>linkonce</code>类似，但即使不被使用，也不能丢弃。类似C语言中的<code>weak</code>类型的变量（多个变量拥有相同的名字不会造成冲突，只要其中一个是weak类型的。链接时，weak类型的定义被忽略而使用正常的定义，如果没有正常的定义，则使用weak的定义）。</p>
</li>
<li>
<p><code>common</code></p>
<p>与weak类似，用于C语言中的临时定义，比如全局作用域中的`int x;”。函数和别名没有common类型</p>
</li>
<li>
<p><code>appending</code></p>
<p>只用于数组类型的指针。两个这种类型的变量链接时，对应的全局数组被连接在一起。</p>
<p>只能用于LLVM.GLOBAL_CTORS等变量</p>
</li>
<li>
<p><code>extern_weak</code></p>
<p>这种类型在链接之前是weak的，如果不被链接，这个变量是null而不是undefined reference。</p>
</li>
<li>
<p><code>linkonce_odr, weak_odr。ODR（one definition rule）</code></p>
<p>只有等效的变量才能被merge。这个链接类型就表示只能跟等效的变量合并。</p>
</li>
<li>
<p><code>external</code></p>
<p>如果没有指定上面的任意类型，那么就是external的,</p>
</li>
</ul>
<p><font color="red">函数声明只能使用<code> external</code> 或 <code>extern_weak </code></font></p>
<h3 id="调用约定-Calling-Conventions">调用约定(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1540">Calling Conventions</a>)</h3>
<p>LLVM 支持调用约定如下</p>
<ul>
<li>
<p>“<code>ccc</code>” - C调用约定</p>
<p>如果没有指定其他类型，那么就默认是这种类型,</p>
<p>这个类型支持可变参数的函数调用并且允许声明的原型和函数声明的实现之间有一些不匹配。</p>
</li>
<li>
<p>“<code>fastcc</code>” - 快速调用约定</p>
<p>使生成的目标代码尽可能快，可以使用任意tricks。不支持可变参数，并且原型和实现要严格匹配。</p>
</li>
<li>
<p>“<code>coldcc</code>” - 冷调用</p>
<p>假定这种调用不经常发生。不支持可变参数，并且原型和实现要严格匹配</p>
</li>
<li>
<p>“<code>cc 10</code>” - GHC调用</p>
<p><a target="_blank" rel="noopener" href="http://www.haskell.org/ghc">Glasgow Haskell Compiler (GHC)</a>.专用，</p>
</li>
<li>
<p>“<code>cc 11</code>” - HiPE 调用约定</p>
</li>
<li>
<p>“<code>webkit_jscc</code>” - WebKit 的 JavaScript 调用约定</p>
</li>
<li>
<p>“<code>anyregcc</code>” - 代码修补的动态调用约定</p>
</li>
<li>
<p>“<code>preserve_mostcc</code>” - PreserveMost 调用约定</p>
</li>
<li>
<p>“<code>preserve_allcc</code>” - PreserveAll 调用约定</p>
</li>
<li>
<p>“<code>cxx_fast_tlscc</code>” - 访问函数的 CXX_FAST_TLS 调用约定</p>
</li>
<li>
<p>“<code>tailcc</code>” - 尾可调用调用约定</p>
</li>
<li>
<p>“<code>swiftcc</code>” - 此调用约定用于 Swift 语言。</p>
</li>
<li>
<p>“<code>swifttailcc</code>”</p>
</li>
<li>
<p>“<code>cfguard_checkcc</code>” - Windows Control Flow Guard（检查机制）</p>
</li>
<li>
<p>“<code>cc &lt;n&gt;</code>” - 编号约定</p>
</li>
</ul>
<h3 id="可见格式-Visibility-Styles">可见格式(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1541">Visibility Styles</a>)</h3>
<p>所有的全局变量和函数都有以下可见性样式之一</p>
<ul>
<li>
<p>“<code>default</code>” - 默认格式</p>
<p>对于使用ELF（Executable and Linking Format）格式的目标文件，这种可见性样式意味着声明对其他模块可见；在共享库中，意味着声明的实体可以被重写；在Darwin，声明对其他模块可见。</p>
</li>
<li>
<p>“<code>hidden</code>” - Hidden style</p>
<p>具有这种可见性样式的声明引用相同的对象，如果它们在相同的共享对象中的话。通常，具有这种可见性样式的符号不会出现在动态符号表中，所有其他模块不能直接引用它。</p>
</li>
<li>
<p>“<code>protected</code>” - Protected style</p>
<p>对于ELF，这种样式表明符号会放置在动态符号表中，但是在定义这个符号的模块中的引用会绑定到局部变量，也就是说这个符号不能被其他模块重写。</p>
</li>
</ul>
<p>具有<code>内部(internal)</code>或<code>私有(private)</code>链接的符号必须具有<code>默认(default)</code>可见性。</p>
<h3 id="DLL存储类-DLL-Storage-Classes">DLL存储类(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1542">DLL Storage Classes</a>)</h3>
<p>所有全局变量，函数和别名可以有以下DLL存储类之一</p>
<ul>
<li>
<p>dllimport</p>
<p>“<code>dllimport</code>”使编译器通过一个全局指针引用函数或变量，该指针是由导出符号的DLL设置的。在Microsoft Windows目标上，指针名称由imp和函数或变量名称组合而成。</p>
</li>
<li>
<p>dllexport</p>
<p>dllexport使编译器提供一个指向DLL中的指针的全局指针，这样它就可以被dllimport属性引用。 在Microsoft Windows目标上，指针名称由imp和函数或变量名称组合而成。因为这个存储类是用来定义dll接口的，所以编译器、汇编器和链接器知道它是外部引用的，所以必须避免删除该符号。</p>
</li>
</ul>
<h3 id="全局变量-Global-Variables">全局变量(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1547">Global Variables</a>)</h3>
<ul>
<li>全局变量定义在编译时间分配的内存区域而非运行时</li>
<li>全局变量定义必须初始化</li>
<li>其他翻译单元中的全局变量也可以声明，在这种情况下它们没有初始化器。</li>
<li>全局变量可以选择指定链接类型</li>
<li>变量可以定义为全局常量，这表明变量的内容永远不会被修改，但需要运行时初始化的变量不能标记为常量，因为变量有存储。</li>
</ul>
<p><strong>语法</strong></p>
<pre class="language-cpp" data-language="cpp"><code class="language-cpp">@<span class="token operator">&lt;</span>GlobalVarName<span class="token operator">></span> <span class="token operator">=</span> <span class="token punctuation">[</span>Linkage<span class="token punctuation">]</span> <span class="token punctuation">[</span>PreemptionSpecifier<span class="token punctuation">]</span> <span class="token punctuation">[</span>Visibility<span class="token punctuation">]</span>
                   <span class="token punctuation">[</span>DLLStorageClass<span class="token punctuation">]</span> <span class="token punctuation">[</span>ThreadLocal<span class="token punctuation">]</span>
                   <span class="token punctuation">[</span><span class="token punctuation">(</span>unnamed_addr<span class="token operator">|</span>local_unnamed_addr<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>AddrSpace<span class="token punctuation">]</span>
                   <span class="token punctuation">[</span>ExternallyInitialized<span class="token punctuation">]</span>
                   <span class="token operator">&lt;</span>global <span class="token operator">|</span> constant<span class="token operator">></span> <span class="token operator">&lt;</span>Type<span class="token operator">></span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>InitializerConstant<span class="token operator">></span><span class="token punctuation">]</span>
                   <span class="token punctuation">[</span><span class="token punctuation">,</span> section <span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> partition <span class="token string">"name"</span><span class="token punctuation">]</span>
                   <span class="token punctuation">[</span><span class="token punctuation">,</span> comdat <span class="token punctuation">[</span><span class="token punctuation">(</span>$name<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> align <span class="token operator">&lt;</span>Alignment<span class="token operator">></span><span class="token punctuation">]</span>
                   <span class="token punctuation">(</span><span class="token punctuation">,</span> <span class="token operator">!</span>name <span class="token operator">!</span>N<span class="token punctuation">)</span><span class="token operator">*</span></code></pre>
<h3 id="函数-Functions">函数(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1548">Functions</a>)</h3>
<p>LLVM函数定义由<code>define</code>关键字组成</p>
<blockquote>
<p>an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#linkage">linkage type</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#runtime-preemption-model">runtime preemption specifier</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/BitCodeFormat.html#visibility">visibility style</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#dllstorageclass">DLL storage class</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#callingconv">calling convention</a>, an optional <code>unnamed_addr</code> attribute, a return type, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#paramattrs">parameter attribute</a> for the return type, a function name, a (possibly empty) argument list (each with optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#paramattrs">parameter attributes</a>), optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#fnattrs">function attributes</a>, an optional address space, an optional section, an optional alignment, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#langref-comdats">comdat</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#gc">garbage collector name</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#prefixdata">prefix</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#prologuedata">prologue</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#personalityfn">personality</a>, an optional list of attached <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#metadata">metadata</a>, an opening curly brace, a list of basic blocks, and a closing curly brace.</p>
</blockquote>
<p>LLVM函数声明由<code>declare</code>关键字组成</p>
<blockquote>
<p>an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#linkage">linkage type</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/BitCodeFormat.html#visibility">visibility style</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#dllstorageclass">DLL storage class</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#callingconv">calling convention</a>, an optional <code>unnamed_addr</code> or <code>local_unnamed_addr</code> attribute, an optional address space, a return type, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#paramattrs">parameter attribute</a> for the return type, a function name, a possibly empty list of arguments, an optional alignment, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#gc">garbage collector name</a>, an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#prefixdata">prefix</a>, and an optional <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#prologuedata">prologue</a>.</p>
</blockquote>
<ul>
<li>如果给出了<code>Unnamed_addr</code>属性，则已知地址不是很大，并且可以合并两个相同的功能。</li>
<li>如果给出了<code>local_unnamed_addr</code>属性，则已知地址在模块中不显着。</li>
<li>如果未给出显式地址空间，则将默认为DataLayOut字符串的程序地址空间默认。</li>
</ul>
<p><strong>语法</strong></p>
<pre class="language-none"><code class="language-none">define [linkage] [PreemptionSpecifier] [visibility] [DLLStorageClass]
       [cconv] [ret attrs]
       &lt;ResultType&gt; @&lt;FunctionName&gt; ([argument list])
       [(unnamed_addr|local_unnamed_addr)] [AddrSpace] [fn Attrs]
       [section &quot;name&quot;] [partition &quot;name&quot;] [comdat [($name)]] [align N]
       [gc] [prefix Constant] [prologue Constant] [personality Constant]
       (!name !N)* &#123; ... &#125;</code></pre>
<p>参数列表<code>(argument list)</code>是一个逗号分隔的参数序列，其中每个参数的形式如下</p>
<pre class="language-none"><code class="language-none">&lt;type&gt; [parameter Attrs] [name]</code></pre>
<h3 id="Metadata-Metadata">Metadata(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1624">Metadata</a>)</h3>
<p>LLVM IR允许元数据附加到程序中的指令和全局对象，该程序可以将关于代码的额外信息传达给优化器和代码生成器。</p>
<p><font color="cornflowerblue">元数据没有类型，也不是值。如果从调用指令中引用，则使用元数据类型。</font></p>
<p><font color="red">所有元数据在语法中都由感叹号(!)标识．</font></p>
<h3 id="Named-Metadata-Named-Metadata">Named Metadata(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1552">Named Metadata</a>)</h3>
<p>命名元数据是元数据的集合,元数据节点(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#metadata">Metadata nodes</a>,但不是元数据字符串)是已命名元数据的唯一有效操作数</p>
<p>命名元数据表示为带有元数据前缀的字符串。元数据名称的规则与标识符相同，但不允许使用带引号的名称。<code>&quot;\xx&quot;</code>类型转义仍然有效，它允许任何字符成为名称的一部分。</p>
<p><strong>语法</strong></p>
<pre class="language-none"><code class="language-none">; Some unnamed metadata nodes, which are referenced by the named metadata.
!0 &#x3D; !&#123;!&quot;zero&quot;&#125;
!1 &#x3D; !&#123;!&quot;one&quot;&#125;
!2 &#x3D; !&#123;!&quot;two&quot;&#125;
; A named metadata.
!name &#x3D; !&#123;!0, !1, !2&#125;</code></pre>
<h3 id="控制指令含义-Terminator-Instructions">控制指令含义(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1743">Terminator Instructions</a>)</h3>
<h4 id="ret-返回">ret  返回</h4>
<p>返回</p>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">ret &lt;type&gt; &lt;value&gt;       ; Return a value from a non-void function
ret void                 ; Return from void function</code></pre>
<p><strong>Semantics:</strong></p>
<p>当执行‘<code>ret</code>’ 指令时, 控制流返回到调用函数的上下文。</p>
<ul>
<li>如果调用者是“<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-call">call</a>”指令，则在调用后的指令处继续执行。</li>
<li>如果调用者是“<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-invoke">invoke</a>”指令，则在“正常”目标块的开头继续执行。</li>
<li>如果指令返回一个值，该值应设置调用或调用指令的返回值。</li>
</ul>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">ret i32 5                       ; Return an integer value of 5
ret void                        ; Return from a void function
ret &#123; i32, i8 &#125; &#123; i32 4, i8 2 &#125; ; Return a struct of values 4 and 2</code></pre>
<h4 id="br-分支"><a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1750">br 分支 </a></h4>
<p>二元有条件分支和无条件分支。</p>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">br i1 &lt;cond&gt;, label &lt;iftrue&gt;, label &lt;iffalse&gt;
br label &lt;dest&gt;          ; Unconditional branch</code></pre>
<p><strong>Semantics:</strong></p>
<p>在执行条件<code>br</code>指令时，会评估<code>i1</code>参数。 如果值为 <code>true</code>，则控制流向 ``iftrue<code>' </code>label<code> 参数。 如果</code>cond<code>为</code>false<code>，则控制流向</code>iffalse<code>,</code>label`参数。</p>
<p>如果<code>cond</code>是<code>poison</code>或<code>undef</code>，则该指令具有未定义的行为。</p>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">Test:
  %cond &#x3D; icmp eq i32 %a, %b
  br i1 %cond, label %IfEqual, label %IfUnequal
IfEqual:
  ret i32 1
IfUnequal:
  ret i32 0</code></pre>
<h4 id="switch-多条件分支">switch  多条件分支</h4>
<p>多条件分支</p>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">switch &lt;intty&gt; &lt;value&gt;, label &lt;defaultdest&gt; [ &lt;intty&gt; &lt;val&gt;, label &lt;dest&gt; ... ]</code></pre>
<p><strong>Arguments:</strong></p>
<p>“<code>switch</code>”指令使用三个参数：一个整数比较值“<code>value</code>”，一个默认的“<code>label</code>”目的地，以及一个由成对的比较值常量和“label”组成的数组。<font color="red"> 该表不允许包含重复的常量条目。</font></p>
<p><strong>Semantics:</strong></p>
<p><code>switch</code> 指令指定了一个值和目标表。 当执行’<code>switch</code>’指令时，将在该表中搜索给定值。</p>
<ul>
<li>如果找到该值，则将控制流转移到相应的目的地； 否则，控制流将转移到默认目的地。</li>
<li>如果“<code>value</code>”是“<code>poison</code>”或“<code>undef</code>”，则该指令具有未定义的行为。</li>
</ul>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">; Emulate a conditional br instruction
%Val &#x3D; zext i1 %value to i32
switch i32 %Val, label %truedest [ i32 0, label %falsedest ]

; Emulate an unconditional br instruction
switch i32 0, label %dest [ ]

; Implement a jump table:
switch i32 %val, label %otherwise [ i32 0, label %onzero
                                    i32 1, label %onone
                                    i32 2, label %ontwo ]</code></pre>
<h4 id="indirectbr-转移到指定地址">indirectbr 转移到指定地址</h4>
<p>转移到地址参数中指定的块</p>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">indirectbr &lt;somety&gt;* &lt;address&gt;, [ label &lt;dest1&gt;, label &lt;dest2&gt;, ... ]</code></pre>
<p><strong>Overview:</strong></p>
<p>“<code>indirectbr</code>”指令实现了到当前函数内标签的间接分支，其地址由“<code>address</code>”指定。</p>
<p>地址必须从 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#blockaddress">blockaddress</a> 常量派生。</p>
<p><strong>Arguments:</strong></p>
<p>“<code>地址</code>”参数是要跳转到的标签的地址。 其余参数表示地址可能指向的全部可能目的地。 允许在目标列表中多次出现块，但这并不是特别有用。</p>
<p>此目标列表是必需的，以便数据流分析能够准确了解 CFG。</p>
<p><strong>Semantics:</strong></p>
<ul>
<li>控制转移到地址参数中指定的块。 <font color="cornflowerblue">所有可能的目标块必须列在标签列表中，否则该指令具有未定义的行为</font>。 这意味着跳转到其他函数中定义的标签也具有未定义的行为</li>
<li>如果<code>address</code>是 <code>poison</code> 或 <code>undef</code>, 则该指令具有未定义的行为。</li>
</ul>
<p><strong>Implementation:</strong></p>
<p>这通常通过一个寄存器跳转来实现。</p>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">indirectbr i8* %Addr, [ label %bb1, label %bb2, label %bb3 ]</code></pre>
<h4 id="invoke-普通-带异常调用">invoke 普通/带异常调用</h4>
<p>普通/带异常调用</p>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">&lt;result&gt; &#x3D; invoke [cconv] [ret attrs] [addrspace(&lt;num&gt;)] &lt;ty&gt;|&lt;fnty&gt; &lt;fnptrval&gt;(&lt;function args&gt;) [fn attrs]
              [operand bundles] to label &lt;normal label&gt; unwind label &lt;exception label&gt;</code></pre>
<p><strong>Overview:</strong></p>
<p>如果被调用函数返回“<code>ret</code>”指令，控制流将返回“<code>normal</code>”标签。 如果被调用者（或任何间接被调用者）通过“<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-resume">resume</a>”指令或其他异常处理机制返回，则控制被中断并继续在 动态最近的“<code>exception</code>”标签。</p>
<p><strong>Arguments:</strong></p>
<p>该指令需要几个参数：</p>
<ol>
<li>可选的<code>cconv</code>标记指示调用应该使用哪个<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#callingconv">调用约定</a>。如果未指定，则调用默认使用 C 调用约定。</li>
<li>返回值的可选<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#paramattrs">参数属性</a>列表。只有<code>zeroext</code>,<code>signext</code>和<code>inreg</code>属性在这里是有效的。</li>
<li>可选的<code>addrspace</code>属性可以用来表示被调用函数的地址空间。如果未指定，将使用 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#langref-datalayout">datalayout string</a> 中的程序地址空间。</li>
<li><code>ty</code>：调用指令本身的类型，也是返回值的类型。不返回值的函数被标记为“<code>void</code>”。</li>
<li><code>fnty</code>：应该是被调用函数的签名。参数类型必须与此签名所暗示的类型相匹配。如果函数不是可变参数，则可以省略此类型。</li>
<li><code>fnptrval</code>：一个 LLVM 值，包含一个指向要调用的函数的指针。在大多数情况下，这是一个直接的函数调用，但间接的<code>invoke</code>也是尽可能的，调用一个指向函数值的任意指针。</li>
<li><code>function args</code>：类型与函数签名参数类型和参数属性匹配的参数列表。所有参数必须是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-firstclass">first class</a> 类型。如果函数签名表明函数接受可变数量的参数，则可以指定额外的参数。</li>
<li><code>normal label</code>：被调用函数执行<code>ret</code>指令时到达的标签。</li>
<li><code>exception label</code>：被调用者通过<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-resume">resume</a>指令或其他异常处理机制返回时到达的标签。</li>
<li>可选的<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#fnattrs">函数属性</a>列表。</li>
<li>可选的<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#opbundles">操作数包</a>列表。</li>
</ol>
<p><strong>Semantics:</strong></p>
<p>在大多数情况下，该指令旨在作为标准的<code>call</code>指令运行。 主要区别在于它建立了与标签的关联，运行时库使用该标签来展开堆栈。</p>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">%retval &#x3D; invoke i32 @Test(i32 15) to label %Continue
            unwind label %TestCleanup              ; i32:retval set
%retval &#x3D; invoke coldcc i32 %Testfnptr(i32 15) to label %Continue
            unwind label %TestCleanup              ; i32:retval set</code></pre>
<h4 id="callbr-调用分支">callbr 调用分支</h4>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">&lt;result&gt; &#x3D; callbr [cconv] [ret attrs] [addrspace(&lt;num&gt;)] &lt;ty&gt;|&lt;fnty&gt; &lt;fnptrval&gt;(&lt;function args&gt;) [fn attrs]
              [operand bundles] to label &lt;fallthrough label&gt; [indirect labels]</code></pre>
<p><strong>Overview:</strong></p>
<p>‘<code>callbr</code>’指令使控制转移到指定的函数. 可以控制流传输到‘<code>fallthrough</code>’ 标签或<code>indirect</code>’标签之一。</p>
<p><font color="red">该指令仅用于实现 gcc 样式内联汇编的<code>goto</code>特性。 任何其他用法都是 IR 验证程序中的错误。</font></p>
<p><strong>Arguments:</strong></p>
<p>该指令需要几个参数：</p>
<ol>
<li>
<p>可选的<code>cconv</code>标记指示调用应该使用哪个<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#callingconv">调用约定</a>。如果未指定，则调用默认使用 C 调用约定。</p>
</li>
<li>
<p>返回值的可选<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#paramattrs">参数属性</a>列表。只有<code>zeroext</code>,<code>signext</code>和<code>inreg</code>属性在这里是有效的。</p>
</li>
<li>
<p>可选的<code>addrspace</code>属性可以用来表示被调用函数的地址空间。如果未指定，将使用 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#langref-datalayout">datalayout string</a> 中的程序地址空间。</p>
</li>
<li>
<p><code>ty</code>：调用指令本身的类型，也是返回值的类型。不返回值的函数被标记为“<code>void</code>”。</p>
</li>
<li>
<p><code>fnty</code>：应该是被调用函数的签名。参数类型必须与此签名所暗示的类型相匹配。如果函数不是可变参数，则可以省略此类型。</p>
</li>
<li>
<p><code>fnptrval</code>：一个 LLVM 值，包含一个指向要调用的函数的指针。在大多数情况下，这是一个直接的函数调用，但间接的<code>invoke</code>也是尽可能的，调用一个指向函数值的任意指针。</p>
</li>
<li>
<p>‘<code>function args</code>：类型与函数签名参数类型和参数属性匹配的参数列表。所有参数必须是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-firstclass">first class</a> 类型。如果函数签名表明函数接受可变数量的参数，则可以指定额外的参数。</p>
</li>
<li>
<p>‘<code>fallthrough label</code>’: 内联汇编执行退出底部时到达的标签。</p>
</li>
<li>
<p>‘<code>indirect labels</code>’: 当被调用者将控制权转移到<code>fallthrough label</code>以外的位置时到达的标签。 这些的块地址常量也应该在<code>function args</code>列表中。</p>
</li>
<li>
<p>可选的<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#fnattrs">函数属性</a>列表。</p>
</li>
<li>
<p>可选的<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#opbundles">操作数包</a>列表。</p>
</li>
</ol>
<p><strong>Semantics:</strong></p>
<p>在大多数情况下，该指令旨在作为标准的“调用”指令运行。 主要区别在于它建立了与附加标签的关联，以定义控制流在调用之后的去向。</p>
<p><code>callbr</code>指令的输出值只对<code>fallthrough</code>’块有效，对任何‘<code>indirect</code>’块无效。</p>
<p>这样做的唯一用途是实现 gcc 内联汇编的“goto”功能，其中可以提供额外的标签作为内联汇编跳转到的位置。</p>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">; &quot;asm goto&quot; without output constraints.
callbr void asm &quot;&quot;, &quot;r,X&quot;(i32 %x, i8 *blockaddress(@foo, %indirect))
            to label %fallthrough [label %indirect]

; &quot;asm goto&quot; with output constraints.
&lt;result&gt; &#x3D; callbr i32 asm &quot;&quot;, &quot;&#x3D;r,r,X&quot;(i32 %x, i8 *blockaddress(@foo, %indirect))
            to label %fallthrough [label %indirect]</code></pre>
<h4 id="resume-抛出异常">resume 抛出异常</h4>
<p><strong>抛出异常</strong></p>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">resume &lt;type&gt; &lt;value&gt;</code></pre>
<p><strong>Overview:</strong></p>
<p><code>resume</code>指令是没有后继的终止指令。</p>
<p><strong>Arguments:</strong></p>
<p>“<code>resume</code>”指令需要一个参数，该参数必须与同一函数中任何“<code>landingpad</code>”指令的结果类型相同。</p>
<p><strong>Semantics:</strong></p>
<p><code>resume</code>指令恢复一个现有（进行中）异常的传播，该异常的展开被 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-landingpad">landingpad</a> 指令中断。</p>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">resume &#123; i8*, i32 &#125; %exn</code></pre>
<h4 id="catchswitch-异常处理">catchswitch 异常处理</h4>
<p>LLVM异常处理</p>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">&lt;resultval&gt; &#x3D; catchswitch within &lt;parent&gt; [ label &lt;handler1&gt;, label &lt;handler2&gt;, ... ] unwind to caller
&lt;resultval&gt; &#x3D; catchswitch within &lt;parent&gt; [ label &lt;handler1&gt;, label &lt;handler2&gt;, ... ] unwind label &lt;default&gt;</code></pre>
<p><strong>Overview:</strong></p>
<p><a target="_blank" rel="noopener" href="https://llvm.org/docs/ExceptionHandling.html#overview">LLVM 的异常处理系统</a> 使用 ‘<code>catchswitch</code>’ 指令来描述可能由 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#personalityfn">EH 特性执行的捕获处理程序集 例程</a>。</p>
<p><strong>Arguments:</strong></p>
<p><code>parent</code> 参数是包含 <code>catchswitch</code> 指令的 funclet 的标记。 如果 <code>catchswitch</code> 不在 funclet 内，则此操作数可能是标记 <code>none</code>。</p>
<p><code>default</code> 参数是另一个以 <code>cleanuppad</code> 或 <code>catchswitch</code> 指令开头的基本块的标签。 如 <a target="_blank" rel="noopener" href="https://llvm.org/docs/ExceptionHandling.html#wineh-constraints">异常处理文档</a> 中所述，此展开目标必须是与“<code>parent</code>”链接相关的合法目标。</p>
<p><code>handlers</code> 是一个后继块的非空列表，每个后继块都以 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-catchpad">catchpad</a> 指令开头。</p>
<p><strong>Semantics:</strong></p>
<p>执行此指令将控制权转移到<code>handlers</code>中的后继者之一， 如果合适，或通过展开标签（如果存在）继续展开。</p>
<p><code>catchswitch</code> 既是终止符又是 “<code>pad</code>” 指令，这意味着它必须是基本块中的第一条非 phi 指令和最后一条指令。 因此，它必须是块中唯一的非 phi 指令。</p>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">dispatch1:
  %cs1 &#x3D; catchswitch within none [label %handler0, label %handler1] unwind to caller
dispatch2:
  %cs2 &#x3D; catchswitch within %parenthandler [label %handler0] unwind label %cleanup</code></pre>
<h4 id="catchret-处理返回">catchret 处理返回</h4>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">catchret from &lt;token&gt; to label &lt;normal&gt;</code></pre>
<p><strong>Overview:</strong></p>
<p><code>catchret</code>指令是具有单个后继的终止指令。</p>
<p><strong>Arguments:</strong></p>
<p>The first argument to a ‘<code>catchret</code>’ indicates which <code>catchpad</code> it exits. It must be a <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-catchpad">catchpad</a>. The second argument to a ‘<code>catchret</code>’ specifies where control will transfer to next.</p>
<p>‘<code>catchret</code>’ 的第一个参数指示它退出哪个 <code>catchpad</code>。 它必须是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-catchpad">catchpad</a>。 ‘<code>catchret</code>’ 的第二个参数指定控制将转移到下一个位置。</p>
<p><strong>Semantics:</strong></p>
<p>‘<code>catchret</code>’ 指令结束一个现有的（正在进行的）异常，其展开被 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-catchpad">catchpad</a> 指令中断。 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#personalityfn">personality function</a> 有机会执行任意代码，例如销毁活动异常。 然后控制转移到 <code>normal</code>.</p>
<p><code>token</code> 参数必须是由 <code>catchpad</code> 指令生成的标记。 如果指定的 <code>catchpad</code> 不是最近输入的尚未退出的 funclet pad（如 <a target="_blank" rel="noopener" href="https://llvm.org/docs/ExceptionHandling.html#wineh-constraints">EH 文档</a> 中所述） , <code>catchret</code> 的行为是未定义的。</p>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">catchret from %catch to label %continue</code></pre>
<h4 id="cleanupret">cleanupret</h4>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">cleanupret from &lt;value&gt; unwind label &lt;continue&gt;
cleanupret from &lt;value&gt; unwind to caller</code></pre>
<p><strong>Overview</strong></p>
<p><code>cleanupret</code>指令是具有可选后继的终止指令。</p>
<p><strong>Arguments:</strong></p>
<p><code>cleanupret</code> 指令需要一个参数，指示它退出哪个 <code>cleanuppad</code>，并且必须是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-cleanuppad">cleanuppad</a>。 如果指定的 <code>cleanuppad</code> 不是最近进入的尚未退出的 funclet pad（如 <a target="_blank" rel="noopener" href="https://llvm.org/docs/ExceptionHandling.html#wineh-constraints">EH 文档</a> 中所述） , <code>cleanupret</code> 的行为是未定义的。</p>
<p>The ‘<code>cleanupret</code>’ instruction also has an optional successor, <code>continue</code>, which must be the label of another basic block beginning with either a <code>cleanuppad</code> or <code>catchswitch</code> instruction. This unwind destination must be a legal target with respect to the <code>parent</code> links, as described in the <a target="_blank" rel="noopener" href="https://llvm.org/docs/ExceptionHandling.html#wineh-constraints">exception handling documentation</a>.</p>
<p><code>cleanupret</code>指令还有一个可选的后继指令<code>continue</code>，它必须是另一个以<code>cleanuppad</code>或<code>catchswitch</code>指令开头的基本块的标签。 如 <a target="_blank" rel="noopener" href="https://llvm.org/docs/ExceptionHandling.html#wineh-constraints">异常处理文档</a> 中所述，此展开目标必须是与<code>parent</code>链接相关的合法目标。</p>
<p><strong>Semantics:</strong></p>
<p><code>cleanupret</code>指令向 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#personalityfn">personality function</a> 指示一个 [cleanuppad](<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html">https://llvm.org/docs/LangRef.html</a> #i-cleanuppad) 将控制权转移到已结束。 它将控制转移到<code>continue</code>或退出函数。</p>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">cleanupret from %cleanup unwind to caller
cleanupret from %cleanup unwind label %continue</code></pre>
<h4 id="unreachable-不可到达">unreachable 不可到达</h4>
<p>不可到达</p>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">unreachable</code></pre>
<p><strong>Overview:</strong></p>
<p><code>unreachable</code>指令没有定义的语义。 该指令用于通知优化器代码的特定部分不可访问。 这可以用来表示无法到达无返回函数之后的代码，以及其他事实。</p>
<h3 id="一元操作-Unary-Operations">一元操作 (<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1810">Unary Operations</a>)</h3>
<h4 id="fneg-求逆">fneg 求逆</h4>
<p>求逆</p>
<p><strong>Syntax:</strong></p>
<pre class="language-none"><code class="language-none">&lt;result&gt; &#x3D; fneg [fast-math flags]* &lt;ty&gt; &lt;op1&gt;   ; yields ty:result</code></pre>
<p><strong>Arguments:</strong></p>
<p><code>fneg</code>指令的参数必须是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-floating">floating-point</a> 或 [vector](<a target="_blank" rel="noopener" href="https://llvm.org/">https://llvm.org/</a> docs/LangRef.html#t-vector) 的浮点值。</p>
<ul>
<li><code>&lt;ty&gt; &lt;op1&gt;</code>是操作数类型，必须是浮点类型或者浮点向量。</li>
</ul>
<p><strong>Semantics:</strong></p>
<p>产生的值是操作数的副本，其符号位被翻转。 该指令还可以采用任意数量的 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#fastmath">fast-math flags</a>，它们是启用其他不安全浮点优化的优化提示：</p>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">&lt;result&gt; &#x3D; fneg float %val          ; yields float:result &#x3D; -%var</code></pre>
<h3 id="二进制操作指令-Binary-Operations">二进制操作指令(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1817">Binary Operations</a>)</h3>
<table>
<thead>
<tr>
<th>运算\类型</th>
<th>无符号整数</th>
<th>带符号整数</th>
<th>浮点数</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>add</td>
<td>fadd</td>
<td></td>
</tr>
<tr>
<td>-</td>
<td>sub</td>
<td>fsub</td>
<td></td>
</tr>
<tr>
<td>*</td>
<td>mul</td>
<td>fmul</td>
<td></td>
</tr>
<tr>
<td>/</td>
<td>udiv</td>
<td>sdiv</td>
<td>fdiv</td>
</tr>
<tr>
<td>%</td>
<td>urem</td>
<td>srem</td>
<td>frem</td>
</tr>
</tbody>
</table>
<h4 id="add-加">add   加</h4>
<p><code>nuw</code> 和 <code>nsw</code> 分别代表<code>No Unsigned Wrap</code>和<code>No Signed Wrap</code>。 如果存在 <code>nuw</code> 或<code>nsw</code>关键字，则如果分别发生无符号或有符号溢出，则 add 的结果值是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#poisonvalues">poison value</a> （错误值)</p>
<ul>
<li><code>&lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code>，两个操作数的类型相同且必须是整型类型或者整型向量。</li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; add &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;          ; yields ty:result
&lt;result&gt; &#x3D; add nuw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;      ; yields ty:result
&lt;result&gt; &#x3D; add nsw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;      ; yields ty:result
&lt;result&gt; &#x3D; add nuw nsw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;  ; yields ty:result
#example
&lt;result&gt; &#x3D; add i32 4, %var          ; yields i32:result &#x3D; 4 + %var</code></pre>
<h4 id="fadd-浮点加">fadd  浮点加</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; fadd [fast-math flags]* &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; fadd float 4.0, %var          ; yields float:result &#x3D; 4.0 + %var</code></pre>
<h4 id="sub-减">sub   减</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; sub &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;          ; yields ty:result
&lt;result&gt; &#x3D; sub nuw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;      ; yields ty:result
&lt;result&gt; &#x3D; sub nsw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;      ; yields ty:result
&lt;result&gt; &#x3D; sub nuw nsw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;  ; yields ty:result
#example
&lt;result&gt; &#x3D; sub i32 4, %var          ; yields i32:result &#x3D; 4 - %var
&lt;result&gt; &#x3D; sub i32 0, %val          ; yields i32:result &#x3D; -%var</code></pre>
<h4 id="fsub-浮点减">fsub  浮点减</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; fsub [fast-math flags]* &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; fsub float 4.0, %var           ; yields float:result &#x3D; 4.0 - %var
&lt;result&gt; &#x3D; fsub float -0.0, %val          ; yields float:result &#x3D; -%var</code></pre>
<h4 id="mul-乘">mul   乘</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; mul &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;          ; yields ty:result
&lt;result&gt; &#x3D; mul nuw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;      ; yields ty:result
&lt;result&gt; &#x3D; mul nsw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;      ; yields ty:result
&lt;result&gt; &#x3D; mul nuw nsw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;  ; yields ty:result
#example
&lt;result&gt; &#x3D; mul i32 4, %var          ; yields i32:result &#x3D; 4 * %var</code></pre>
<h4 id="fmul-浮点乘">fmul  浮点乘</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; fmul [fast-math flags]* &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; fmul float 4.0, %var          ; yields float:result &#x3D; 4.0 * %var</code></pre>
<h4 id="udiv-无符号整数除">udiv  无符号整数除</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; udiv &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;         ; yields ty:result
&lt;result&gt; &#x3D; udiv exact &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; udiv i32 4, %var          ; yields i32:result &#x3D; 4 &#x2F; %var</code></pre>
<h4 id="sdiv-带符号整数除">sdiv  带符号整数除</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; sdiv &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;         ; yields ty:result
&lt;result&gt; &#x3D; sdiv exact &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; sdiv i32 4, %var          ; yields i32:result &#x3D; 4 &#x2F; %var</code></pre>
<h4 id="fdiv-浮点除">fdiv  浮点除</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; fdiv [fast-math flags]* &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; fdiv float 4.0, %var          ; yields float:result &#x3D; 4.0 &#x2F; %var</code></pre>
<h4 id="urem-无符号整数求余">urem  无符号整数求余</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; urem &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; urem i32 4, %var          ; yields i32:result &#x3D; 4 % %var</code></pre>
<h4 id="srem-带符号整数求余">srem  带符号整数求余</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; srem &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; srem i32 4, %var          ; yields i32:result &#x3D; 4 % %var</code></pre>
<h4 id="frem-浮点数求余">frem  浮点数求余</h4>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; frem [fast-math flags]* &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; frem float 4.0, %var          ; yields float:result &#x3D; 4.0 % %var</code></pre>
<h3 id="位二进制操作指令-Bitwise-Binary-Operations">位二进制操作指令 (<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1890">Bitwise Binary Operations</a>)</h3>
<h4 id="shl-逻辑左移">shl 逻辑左移</h4>
<p><font color="red">返回<op1>向左移位指定<op2>的结果</op2></op1></font></p>
<p><font color="cornflowerblue">即 $op1 * 2^{op2} mod (2^n)$, <code>n</code>为result的宽度</font></p>
<ul>
<li><code>&lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code>，两个操作数的类型相同且必须是整型类型或者整型向量，<code>&lt;op2&gt;</code>作为无符号值来处理。如果<code>&lt;op1&gt;</code>是向量，<code>&lt;op2&gt;</code>将会按照<code>&lt;op1&gt;</code>的元素逐个移动</li>
<li>如果存在<code>nuw</code>关键字，则如果移位任何非零位，则移位将产生一个<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#poisonvalues">poison value</a>(是错误操作的结果)。</li>
<li>如果<code>nsw</code>关键字存在，则如果移位与生成的符号位不一致的任何位，则移位将产生一个<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#poisonvalues">poison value</a>(是错误操作的结果)。</li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; shl &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;           ; yields ty:result
&lt;result&gt; &#x3D; shl nuw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;       ; yields ty:result
&lt;result&gt; &#x3D; shl nsw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;       ; yields ty:result
&lt;result&gt; &#x3D; shl nuw nsw &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; shl i32 4, %var   ; yields i32: 4 &lt;&lt; %var
&lt;result&gt; &#x3D; shl i32 4, 2      ; yields i32: 16
&lt;result&gt; &#x3D; shl i32 1, 10     ; yields i32: 1024
&lt;result&gt; &#x3D; shl i32 1, 32     ; undefined
&lt;result&gt; &#x3D; shl &lt;2 x i32&gt; &lt; i32 1, i32 1&gt;, &lt; i32 1, i32 2&gt;   ; yields: result&#x3D;&lt;2 x i32&gt; &lt; i32 2, i32 4&gt;</code></pre>
<h4 id="lshr-逻辑右移">lshr  逻辑右移</h4>
<p><font color="red">返回<op1>向右移指定<op2>零填充位的结果</op2></op1></font></p>
<p>lshr指令的两个参数必须是相同的整数或整数类型的向量。op2被视为无符号值。</p>
<p><font color="red"><result>的最高有效位在移位后将被零位填充。</result></font></p>
<ul>
<li><code>&lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code>，两个操作数的类型相同且必须是整型类型或者整型向量，作为无符号值来处理。如果是向量，将会按照的元素逐个移动。</li>
<li>如果<code>exact</code>关键字存在，如果移出的任何位都是非零的，那么LSHR的结果值就返回一个<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#poisonvalues">poison value</a>(是错误操作的结果)。</li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; lshr &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;         ; yields ty:result
&lt;result&gt; &#x3D; lshr exact &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; lshr i32 4, 1   ; yields i32:result &#x3D; 2
&lt;result&gt; &#x3D; lshr i32 4, 2   ; yields i32:result &#x3D; 1
&lt;result&gt; &#x3D; lshr i8  4, 3   ; yields i8:result &#x3D; 0
&lt;result&gt; &#x3D; lshr i8 -2, 1   ; yields i8:result &#x3D; 0x7F
&lt;result&gt; &#x3D; lshr i32 1, 32  ; undefined
&lt;result&gt; &#x3D; lshr &lt;2 x i32&gt; &lt; i32 -2, i32 4&gt;, &lt; i32 1, i32 2&gt;   ; yields: result&#x3D;&lt;2 x i32&gt; &lt; i32 0x7FFFFFFF, i32 1&gt;</code></pre>
<h4 id="ashr-算数右移">ashr  算数右移</h4>
<p><font color="red"><code>ashr</code>指令(算术右移)通过符号扩展返回<op1>向右移指定位数<op2>。</op2></op1></font></p>
<p><font color="red"><result>的最高有效位将被op1的符号位填充。</result></font></p>
<ul>
<li><code>&lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;</code>，两个操作数的类型相同且必须是整型类型或者整型向量，作为无符号值来处理。如果是向量，将会按照的元素逐个移动。</li>
<li>如果<code>exact</code>关键字存在，如果移出的任何位都是非零，<code>ashr</code>的结果值返回一个<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#poisonvalues">poison value</a>(是错误操作的结果)。</li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; ashr &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;         ; yields ty:result
&lt;result&gt; &#x3D; ashr exact &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; ashr i32 4, 1   ; yields i32:result &#x3D; 2
&lt;result&gt; &#x3D; ashr i32 4, 2   ; yields i32:result &#x3D; 1
&lt;result&gt; &#x3D; ashr i8  4, 3   ; yields i8:result &#x3D; 0
&lt;result&gt; &#x3D; ashr i8 -2, 1   ; yields i8:result &#x3D; -1
&lt;result&gt; &#x3D; ashr i32 1, 32  ; undefined
&lt;result&gt; &#x3D; ashr &lt;2 x i32&gt; &lt; i32 -2, i32 4&gt;, &lt; i32 1, i32 3&gt;   ; yields: result&#x3D;&lt;2 x i32&gt; &lt; i32 -1, i32 0&gt;</code></pre>
<h4 id="and-与">and   与</h4>
<table>
<thead>
<tr>
<th>In0</th>
<th>In1</th>
<th>Out</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; and &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; and i32 4, %var         ; yields i32:result &#x3D; 4 &amp; %var
&lt;result&gt; &#x3D; and i32 15, 40          ; yields i32:result &#x3D; 8
&lt;result&gt; &#x3D; and i32 4, 8            ; yields i32:result &#x3D; 0</code></pre>
<h4 id="or-或">or   或</h4>
<table>
<thead>
<tr>
<th>In0</th>
<th>In1</th>
<th>Out</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<ul>
<li><ty> <op1>, <op2>，两个操作数的类型相同且必须是整型类型或者整型向量。</op2></op1></ty></li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; or &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; or i32 4, %var         ; yields i32:result &#x3D; 4 | %var
&lt;result&gt; &#x3D; or i32 15, 40          ; yields i32:result &#x3D; 47
&lt;result&gt; &#x3D; or i32 4, 8            ; yields i32:result &#x3D; 12</code></pre>
<h4 id="xor-异或">xor   异或</h4>
<table>
<thead>
<tr>
<th>In0</th>
<th>In1</th>
<th>Out</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<ul>
<li><ty> <op1>, <op2>，两个操作数的类型相同且必须是整型类型或者整型向量。</op2></op1></ty></li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; xor &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields ty:result
#example
&lt;result&gt; &#x3D; xor i32 4, %var         ; yields i32:result &#x3D; 4 ^ %var
&lt;result&gt; &#x3D; xor i32 15, 40          ; yields i32:result &#x3D; 39
&lt;result&gt; &#x3D; xor i32 4, 8            ; yields i32:result &#x3D; 12
&lt;result&gt; &#x3D; xor i32 %V, -1          ; yields i32:result &#x3D; ~%V</code></pre>
<h3 id="向量运算-Vector-Operations">向量运算(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1927">Vector Operations</a>)</h3>
<h4 id="extractelement">extractelement</h4>
<p><code>extractelement</code>指令从指定索引处的向量中提取单个矢量元素。</p>
<pre class="language-none"><code class="language-none">#Syntax:
&lt;result&gt; &#x3D; extractelement &lt;n x &lt;ty&gt;&gt; &lt;val&gt;, &lt;ty2&gt; &lt;idx&gt;  ; yields &lt;ty&gt;
&lt;result&gt; &#x3D; extractelement &lt;vscale x n x &lt;ty&gt;&gt; &lt;val&gt;, &lt;ty2&gt; &lt;idx&gt; ; yields &lt;ty&gt;</code></pre>
<p><strong>Arguments:</strong></p>
<p>提取指令的第一个操作数是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-vector">vector</a> 类型的值。第二个操作数是指示从何处提取元素的位置的索引。索引可以是任何整数类型的变量。</p>
<ul>
<li><code>&lt;ty2&gt; &lt;idx&gt;</code>索引值大于等于零，小于向量的长度。</li>
</ul>
<p><strong>Semantics:</strong></p>
<p>结果是与 val 的元素类型相同类型的矢量。 它的值是 val  idx 位置的值。</p>
<ul>
<li>如果idx超过了固定长度向量的val的长度，结果将是一个<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#poisonvalues">poison value</a>(是错误操作的结果)。</li>
<li>对于可伸缩的向量，如果idx的值超过了向量的运行时长度，则结果是一个<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#poisonvalues">poison value</a>(是错误操作的结果)。</li>
</ul>
<pre class="language-none"><code class="language-none"># Example:
&lt;result&gt; &#x3D; extractelement &lt;4 x i32&gt; %vec, i32 0    ; yields i32</code></pre>
<h4 id="insertelement">insertelement</h4>
<p><code>insertelement</code>指令将矢量元素插入到指定索引处的向量中。</p>
<pre class="language-none"><code class="language-none">Syntax:
&lt;result&gt; &#x3D; insertelement &lt;n x &lt;ty&gt;&gt; &lt;val&gt;, &lt;ty&gt; &lt;elt&gt;, &lt;ty2&gt; &lt;idx&gt;    ; yields &lt;n x &lt;ty&gt;&gt;
&lt;result&gt; &#x3D; insertelement &lt;vscale x n x &lt;ty&gt;&gt; &lt;val&gt;, &lt;ty&gt; &lt;elt&gt;, &lt;ty2&gt; &lt;idx&gt; ; yields &lt;vscale x n x &lt;ty&gt;&gt;</code></pre>
<p><strong>Arguments:</strong></p>
<p><code>insertelement</code>指令的第一个操作数是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-vector">vector</a> 类型的值。 第二个操作数是一个矢量值，其类型必须等于第一个操作数的元素类型。 第三个操作数是指示插入值的位置的索引。 索引可以是任何整数类型的变量。</p>
<p><strong>Semantics:</strong></p>
<ul>
<li>结果是一个与 <code>val </code>类型相同的向量。 它的元素值是<code>val</code>的值，除了位置<code> idx</code>，它在该位置获得值 <code>elt</code>。 如果 <code>idx </code>超过固定长度向量的 <code>val </code>长度，则结果是<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#poisonvalues">poison value</a>.</li>
<li>对于可伸缩向量，如果<code>idx</code>的值超过了向量的运行时长度，则结果是<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#poisonvalues">poison value</a>.</li>
</ul>
<pre class="language-none"><code class="language-none"># Example:
&lt;result&gt; &#x3D; insertelement &lt;4 x i32&gt; %vec, i32 1, i32 0    ; yields &lt;4 x i32&gt;</code></pre>
<h4 id="shufflevector">shufflevector</h4>
<p><code>shufflevector</code>指令从两个输入向量构造元素的排列，返回一个与输入具有相同元素类型且长度与shuffle mask相同的向量。</p>
<pre class="language-none"><code class="language-none"># Syntax:
&lt;result&gt; &#x3D; shufflevector &lt;n x &lt;ty&gt;&gt; &lt;v1&gt;, &lt;n x &lt;ty&gt;&gt; &lt;v2&gt;, &lt;m x i32&gt; &lt;mask&gt;    ; yields &lt;m x &lt;ty&gt;&gt;
&lt;result&gt; &#x3D; shufflevector &lt;vscale x n x &lt;ty&gt;&gt; &lt;v1&gt;, &lt;vscale x n x &lt;ty&gt;&gt; v2, &lt;vscale x m x i32&gt; &lt;mask&gt;  ; yields &lt;vscale x m x &lt;ty&gt;&gt;</code></pre>
<p><strong>Arguments:</strong></p>
<p>指令的结果是一个向量，其长度与shuffle mask相同，其元素类型与前两个操作数的元素类型相同。</p>
<ul>
<li><code>shufflevector</code>指令的前两个操作数是相同类型的向量。 第三个参数是一个shuffle mask向量常量，其元素类型为<code>i32</code>。 掩码向量元素必须是常量整数或<code>undef</code>值。</li>
<li><code>&lt;n x &lt;ty&gt;&gt; &lt;v1&gt;, &lt;n x &lt;ty&gt;&gt; &lt;v2&gt;</code>两个输入向量，如果输入向量中未定义的元素被选中，则新向量对应的元素也是未定义。</li>
<li><code>&lt;m x i32&gt; &lt;mask&gt;</code>调整掩码(shuffle mask)，如果调整掩码是未定义的，则新向量就是未定义的。</li>
</ul>
<p><strong>Semantics:</strong></p>
<p>两个输入向量的元素在两个向量中从左到右编号。 对于结果向量的每个元素，随机掩码从输入向量之一中选择一个元素以复制到结果中。 掩码中的非负元素表示连接输入向量对的索引。</p>
<p>If the shuffle mask is undefined, the result vector is undefined. If the shuffle mask selects an undefined element from one of the input vectors, the resulting element is undefined. An undefined element in the mask vector specifies that the resulting element is undefined. An undefined element in the mask vector prevents a poisoned vector element from propagating.</p>
<p>对于可伸缩矢量, the only valid mask values at present are <code>zeroinitializer</code> and <code>undef</code>, since we cannot write all indices as literals for a vector with a length unknown at compile time.</p>
<p><strong>Example:</strong></p>
<pre class="language-none"><code class="language-none">&lt;result&gt; &#x3D; shufflevector &lt;4 x i32&gt; %v1, &lt;4 x i32&gt; %v2,
                        &lt;4 x i32&gt; &lt;i32 0, i32 4, i32 1, i32 5&gt;  ; yields &lt;4 x i32&gt;
&lt;result&gt; &#x3D; shufflevector &lt;4 x i32&gt; %v1, &lt;4 x i32&gt; undef,
                        &lt;4 x i32&gt; &lt;i32 0, i32 1, i32 2, i32 3&gt;  ; yields &lt;4 x i32&gt; - Identity shuffle.
&lt;result&gt; &#x3D; shufflevector &lt;8 x i32&gt; %v1, &lt;8 x i32&gt; undef,
                        &lt;4 x i32&gt; &lt;i32 0, i32 1, i32 2, i32 3&gt;  ; yields &lt;4 x i32&gt;
&lt;result&gt; &#x3D; shufflevector &lt;4 x i32&gt; %v1, &lt;4 x i32&gt; %v2,
                        &lt;8 x i32&gt; &lt;i32 0, i32 1, i32 2, i32 3, i32 4, i32 5, i32 6, i32 7 &gt;  ; yields &lt;8 x i32&gt;</code></pre>
<h3 id="聚合操作-Aggregate-Operations">聚合操作(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1946">Aggregate Operations</a>)</h3>
<h4 id="extractvalue">extractvalue</h4>
<p><code>extractvalue</code>指令从 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-aggregate">aggregate</a> 值中提取成员字段的值。</p>
<pre class="language-none"><code class="language-none">#Syntax:
&lt;result&gt; &#x3D; extractvalue &lt;aggregate type&gt; &lt;val&gt;, &lt;idx&gt;&#123;, &lt;idx&gt;&#125;*</code></pre>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>&lt;aggregate type&gt; &lt;val&gt;</code>聚合类型，数组或结构体。</li>
<li><code>&lt;idx&gt;&#123;, &lt;idx&gt;&#125;*</code>常量索引值，提取指定索引处的元素。</li>
</ul>
<p><code>extractvalue</code>’指令的第一个操作数是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-struct">struct</a> 或 [array](<a target="_blank" rel="noopener" href="https://llvm.org/">https://llvm.org/</a> docs/LangRef.html#t-array) 类型。 其他操作数是常量索引，用于指定以与<code>getelementptr</code>指令中的索引类似的方式提取哪个值。</p>
<p>与<code>getelementptr</code> 索引的主要区别是：</p>
<ul>
<li>由于被索引的值不是指针，所以第一个索引被省略并假定为零。</li>
<li>必须至少指定一个索引。</li>
<li>不仅结构索引而且数组索引也必须在范围内。</li>
</ul>
<p><strong>Semantics:</strong></p>
<p>结果是索引操作数指定的聚合中位置处的值。</p>
<pre class="language-none"><code class="language-none">#Example:
&lt;result&gt; &#x3D; extractvalue &#123;i32, float&#125; %agg, 0    ; yields i32</code></pre>
<h4 id="insertvalue">insertvalue</h4>
<p><code>insertvalue</code>’指令将一个值插入到 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-aggregate">aggregate</a> 值的成员字段中。</p>
<pre class="language-none"><code class="language-none">#Syntax:
&lt;result&gt; &#x3D; insertvalue &lt;aggregate type&gt; &lt;val&gt;, &lt;ty&gt; &lt;elt&gt;, &lt;idx&gt;&#123;, &lt;idx&gt;&#125;*    ; yields &lt;aggregate type&gt;</code></pre>
<p><strong>Arguments:</strong></p>
<ul>
<li><code>&lt;aggregate type&gt; &lt;val&gt;</code>聚合类型，数组或结构体。</li>
<li><code>&lt;ty&gt; &lt;elt&gt;</code>要插入的数据，</li>
<li><code>&lt;idx&gt;&#123;, &lt;idx&gt;&#125;*</code>常量索引值，提取指定索引处的元素。</li>
</ul>
<p><code>insertvalue</code>’指令的第一个操作数是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-struct">struct</a> 或 [array](<a target="_blank" rel="noopener" href="https://llvm.org/">https://llvm.org/</a> docs/LangRef.html#t-array) 类型。 第二个操作数是要插入的一等值。 以下操作数是常量索引，指示插入值的位置，其方式与<code>extractvalue</code>指令中的索引类似。 要插入的值必须与索引标识的值具有相同的类型。</p>
<p><strong>Semantics:</strong></p>
<p>The result is an aggregate of the same type as <code>val</code>. Its value is that of <code>val</code> except that the value at the position specified by the indices is that of <code>elt</code>.</p>
<p>结果是与 <code>val</code> 类型相同的聚合。 它的值是<code>val</code>的值，只是索引指定位置的值是<code>elt</code>的值。</p>
<pre class="language-none"><code class="language-none">#Example:
%agg1 &#x3D; insertvalue &#123;i32, float&#125; undef, i32 1, 0              ; yields &#123;i32 1, float undef&#125;
%agg2 &#x3D; insertvalue &#123;i32, float&#125; %agg1, float %val, 1         ; yields &#123;i32 1, float %val&#125;
%agg3 &#x3D; insertvalue &#123;i32, &#123;float&#125;&#125; undef, float %val, 1, 0    ; yields &#123;i32 undef, &#123;float %val&#125;&#125;</code></pre>
<h3 id="内存访问和寻址操作-Memory-Access-and-Addressing-Operations">内存访问和寻址操作(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1959">Memory Access and Addressing Operations</a>)</h3>
<h4 id="alloca">alloca</h4>
<p><code>alloca</code>指令在当前执行函数的栈帧上分配内存</p>
<ul>
<li><code>&lt;type&gt;</code>指令返回的指针类型，可以是任何类型。</li>
<li><code>&lt;ty&gt; &lt;NumElements&gt;</code>要分配的内存数量，分配的内存大小就是该数量*单个类型空间，如果没有指定，默认情况下该值为1。</li>
<li><code>align &lt;alignment&gt;</code>内存对齐值。如果指定了对齐值，对齐值不能大于1 &lt;&lt; 29，且保证分配的值结果至少与该边界对齐；如果没有指定或者对齐值为零，目标可以选择在任何与类型兼容的范围内对齐分配。</li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; alloca [inalloca] &lt;type&gt; [, &lt;ty&gt; &lt;NumElements&gt;] [, align &lt;alignment&gt;] [, addrspace(&lt;num&gt;)]     ; yields type addrspace(num)*:result
#Example
%ptr &#x3D; alloca i32                             ; yields i32*:ptr
%ptr &#x3D; alloca i32, i32 4                      ; yields i32*:ptr
%ptr &#x3D; alloca i32, i32 4, align 1024          ; yields i32*:ptr
%ptr &#x3D; alloca i32, align 1024                 ; yields i32*:ptr</code></pre>
<h4 id="load">load</h4>
<p><code>load</code>指令用于从内存中读取。</p>
<ul>
<li><code>&lt;result&gt;</code>是一个变量，变量的值是从内存中加载出来的值。</li>
<li><code>load &lt;ty&gt;</code>加载类型，也就是前面变量的类型。</li>
<li><code>&lt;ty&gt;* &lt;pointer&gt;</code>是一个指针，指向要加载的内存，指针的类型必须是不包含不透明结构(opaque structural type)的first class type类型。</li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax:
&lt;result&gt; &#x3D; load [volatile] &lt;ty&gt;, &lt;ty&gt;* &lt;pointer&gt;[, align &lt;alignment&gt;][, !nontemporal !&lt;nontemp_node&gt;][, !invariant.load !&lt;empty_node&gt;][, !invariant.group !&lt;empty_node&gt;][, !nonnull !&lt;empty_node&gt;][, !dereferenceable !&lt;deref_bytes_node&gt;][, !dereferenceable_or_null !&lt;deref_bytes_node&gt;][, !align !&lt;align_node&gt;][, !noundef !&lt;empty_node&gt;]
&lt;result&gt; &#x3D; load atomic [volatile] &lt;ty&gt;, &lt;ty&gt;* &lt;pointer&gt; [syncscope(&quot;&lt;target-scope&gt;&quot;)] &lt;ordering&gt;, align &lt;alignment&gt; [, !invariant.group !&lt;empty_node&gt;]
!&lt;nontemp_node&gt; &#x3D; !&#123; i32 1 &#125;
!&lt;empty_node&gt; &#x3D; !&#123;&#125;
!&lt;deref_bytes_node&gt; &#x3D; !&#123; i64 &lt;dereferenceable_bytes&gt; &#125;
!&lt;align_node&gt; &#x3D; !&#123; i64 &lt;value_alignment&gt; &#125;

#Example
%ptr &#x3D; alloca i32                               ; yields i32*:ptr
store i32 3, i32* %ptr                          ; yields void
%val &#x3D; load i32, i32* %ptr                      ; yields i32:val &#x3D; i32 3</code></pre>
<h4 id="store">store</h4>
<p><code>store</code> 指令用于写入内存。</p>
<p>存储指令有两个参数：要存储的值和存储它的地址。</p>
<ul>
<li><code>&lt;ty&gt; &lt;value&gt;</code>要存入的值，值的类型必须是已知长度的first class type。</li>
<li><code>&lt;ty&gt;* &lt;pointer&gt;</code>是一个指针，指向一块存值的地址。</li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax:
store [volatile] &lt;ty&gt; &lt;value&gt;, &lt;ty&gt;* &lt;pointer&gt;[, align &lt;alignment&gt;][, !nontemporal !&lt;nontemp_node&gt;][, !invariant.group !&lt;empty_node&gt;]        ; yields void
store atomic [volatile] &lt;ty&gt; &lt;value&gt;, &lt;ty&gt;* &lt;pointer&gt; [syncscope(&quot;&lt;target-scope&gt;&quot;)] &lt;ordering&gt;, align &lt;alignment&gt; [, !invariant.group !&lt;empty_node&gt;] ; yields void
!&lt;nontemp_node&gt; &#x3D; !&#123; i32 1 &#125;
!&lt;empty_node&gt; &#x3D; !&#123;&#125;

# Example
%ptr &#x3D; alloca i32                               ; yields i32*:ptr
store i32 3, i32* %ptr                          ; yields void
%val &#x3D; load i32, i32* %ptr                      ; yields i32:val &#x3D; i32 3</code></pre>
<h4 id="fence">fence</h4>
<p><code>fence</code>指令带有一个排序参数，它定义了与它们添加的边同步的内容。 只能给它们<code>acquire</code>, <code>release</code>, <code>acq_rel</code>, <code>seq_cst</code>排序。</p>
<pre class="language-none"><code class="language-none">#Syntax
fence [syncscope(&quot;&lt;target-scope&gt;&quot;)] &lt;ordering&gt;  ; yields void
#Exmaple
fence acquire                                        ; yields void
fence syncscope(&quot;singlethread&quot;) seq_cst              ; yields void
fence syncscope(&quot;agent&quot;) seq_cst                     ; yields void</code></pre>
<h4 id="cmpxchg">cmpxchg</h4>
<p><code>cmpxchg</code>指令用于原子地修改内存。 它在内存中加载一个值并将其与给定值进行比较。 如果它们相等，它会尝试将新值存储到内存中。</p>
<pre class="language-none"><code class="language-none">#Syntax:
cmpxchg [weak] [volatile] &lt;ty&gt;* &lt;pointer&gt;, &lt;ty&gt; &lt;cmp&gt;, &lt;ty&gt; &lt;new&gt; [syncscope(&quot;&lt;target-scope&gt;&quot;)] &lt;success ordering&gt; &lt;failure ordering&gt;[, align &lt;alignment&gt;] ; yields  &#123; ty, i1 &#125;

#Example
entry:
  %orig &#x3D; load atomic i32, i32* %ptr unordered, align 4                      ; yields i32
  br label %loop

loop:
  %cmp &#x3D; phi i32 [ %orig, %entry ], [%value_loaded, %loop]
  %squared &#x3D; mul i32 %cmp, %cmp
  %val_success &#x3D; cmpxchg i32* %ptr, i32 %cmp, i32 %squared acq_rel monotonic ; yields  &#123; i32, i1 &#125;
  %value_loaded &#x3D; extractvalue &#123; i32, i1 &#125; %val_success, 0
  %success &#x3D; extractvalue &#123; i32, i1 &#125; %val_success, 1
  br i1 %success, label %done, label %loop

done:
  ...</code></pre>
<h4 id="atomicrmw">atomicrmw</h4>
<p><code>atomicrmw</code>指令用于原子地修改内存。</p>
<pre class="language-none"><code class="language-none">#Syntax:
atomicrmw [volatile] &lt;operation&gt; &lt;ty&gt;* &lt;pointer&gt;, &lt;ty&gt; &lt;value&gt; [syncscope(&quot;&lt;target-scope&gt;&quot;)] &lt;ordering&gt;[, align &lt;alignment&gt;]  ; yields ty</code></pre>
<p><code>atomicrmw</code>指令有三个参数：要应用的操作、要修改其值的地址、操作的参数。</p>
<ul>
<li>xchg: <code>*ptr = val</code></li>
<li>add: <code>*ptr = *ptr + val</code></li>
<li>sub: <code>*ptr = *ptr - val</code></li>
<li>and: <code>*ptr = *ptr &amp; val</code></li>
<li>nand: <code>*ptr = ~(*ptr &amp; val)</code></li>
<li>or: <code>*ptr = *ptr | val</code></li>
<li>xor: <code>*ptr = *ptr ^ val</code></li>
<li>max: <code>*ptr = *ptr &gt; val ? *ptr : val</code> (using a signed comparison)</li>
<li>min: <code>*ptr = *ptr &lt; val ? *ptr : val</code> (using a signed comparison)</li>
<li>umax: <code>*ptr = *ptr &gt; val ? *ptr : val</code> (using an unsigned comparison)</li>
<li>umin: <code>*ptr = *ptr &lt; val ? *ptr : val</code> (using an unsigned comparison)</li>
<li>fadd: <code>*ptr = *ptr + val</code> (using floating point arithmetic)</li>
<li>fsub: <code>*ptr = *ptr - val</code> (using floating point arithmetic)</li>
</ul>
<pre class="language-none"><code class="language-none">#Example:
%old &#x3D; atomicrmw add i32* %ptr, i32 1 acquire                        ; yields i32</code></pre>
<h4 id="getelementptr">getelementptr</h4>
<p><code>getelementptr</code>指令用于获取 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-aggregate">aggregate</a> 数据结构的子元素的地址。 它只执行地址计算，不访问内存。 该指令还可用于计算此类地址的向量。</p>
<pre class="language-none"><code class="language-none">
&lt;result&gt; &#x3D; getelementptr &lt;ty&gt;, &lt;ty&gt;* &lt;ptrval&gt;&#123;, [inrange] &lt;ty&gt; &lt;idx&gt;&#125;*
&lt;result&gt; &#x3D; getelementptr inbounds &lt;ty&gt;, &lt;ty&gt;* &lt;ptrval&gt;&#123;, [inrange] &lt;ty&gt; &lt;idx&gt;&#125;*
&lt;result&gt; &#x3D; getelementptr &lt;ty&gt;, &lt;ptr vector&gt; &lt;ptrval&gt;, [inrange] &lt;vector index type&gt; &lt;idx&gt;</code></pre>
<ul>
<li>第一个<code>&lt;ty&gt;</code>是第一个索引<code>&lt;idx&gt;</code>使用的基本类型</li>
<li>第二个<code>&lt;ty&gt;*</code>表示其后的基地址<code>ptrval</code>的类型。</li>
<li><code>&lt;ty&gt; &lt;idx&gt;</code>是第一组索引的类型和值， 可以出现多次，其后出现就是第二组、第三组等等索引的类型和值。</li>
</ul>
<pre class="language-none"><code class="language-none">#Example:
; yields [12 x i8]*:aptr
%aptr &#x3D; getelementptr &#123;i32, [12 x i8]&#125;, &#123;i32, [12 x i8]&#125;* %saptr, i64 0, i32 1
; yields i8*:vptr
%vptr &#x3D; getelementptr &#123;i32, &lt;2 x i8&gt;&#125;, &#123;i32, &lt;2 x i8&gt;&#125;* %svptr, i64 0, i32 1, i32 1
; yields i8*:eptr
%eptr &#x3D; getelementptr [12 x i8], [12 x i8]* %aptr, i64 0, i32 1
; yields i32*:iptr
%iptr &#x3D; getelementptr [10 x i32], [10 x i32]* @arr, i16 0, i16 0</code></pre>
<h3 id="其他操作-Other-Operations">其他操作(<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id2082">Other Operations</a>)</h3>
<h4 id="icmp-整数比较">icmp 整数比较</h4>
<p><code>icmp</code> 指令根据其两个整数、整数向量、指针或指针向量操作数的比较返回一个布尔值或一个布尔值向量。</p>
<pre class="language-none"><code class="language-none">#Syntax:
&lt;result&gt; &#x3D; icmp &lt;cond&gt; &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;   ; yields i1 or &lt;N x i1&gt;:result</code></pre>
<p><strong>Arguments:</strong></p>
<p>“icmp”指令需要三个操作数。 第一个操作数是指示要执行的比较类型的关键字：</p>
<ol>
<li><code>eq</code>: equal</li>
<li><code>ne</code>: not equal</li>
<li><code>ugt</code>: unsigned greater than</li>
<li><code>uge</code>: unsigned greater or equal</li>
<li><code>ult</code>: unsigned less than</li>
<li><code>ule</code>: unsigned less or equal</li>
<li><code>sgt</code>: signed greater than</li>
<li><code>sge</code>: signed greater or equal</li>
<li><code>slt</code>: signed less than</li>
<li><code>sle</code>: signed less or equal</li>
</ol>
<p>The remaining two arguments must be <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-integer">integer</a> or <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-pointer">pointer</a> or integer <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-vector">vector</a> typed. They must also be identical types.</p>
<ol>
<li><code>eq</code>: yields <code>true</code> if the operands are equal, <code>false</code> otherwise. No sign interpretation is necessary or performed.</li>
<li><code>ne</code>: yields <code>true</code> if the operands are unequal, <code>false</code> otherwise. No sign interpretation is necessary or performed.</li>
<li><code>ugt</code>: interprets the operands as unsigned values and yields <code>true</code> if <code>op1</code> is greater than <code>op2</code>.</li>
<li><code>uge</code>: interprets the operands as unsigned values and yields <code>true</code> if <code>op1</code> is greater than or equal to <code>op2</code>.</li>
<li><code>ult</code>: interprets the operands as unsigned values and yields <code>true</code> if <code>op1</code> is less than <code>op2</code>.</li>
<li><code>ule</code>: interprets the operands as unsigned values and yields <code>true</code> if <code>op1</code> is less than or equal to <code>op2</code>.</li>
<li><code>sgt</code>: interprets the operands as signed values and yields <code>true</code> if <code>op1</code> is greater than <code>op2</code>.</li>
<li><code>sge</code>: interprets the operands as signed values and yields <code>true</code> if <code>op1</code> is greater than or equal to <code>op2</code>.</li>
<li><code>slt</code>: interprets the operands as signed values and yields <code>true</code> if <code>op1</code> is less than <code>op2</code>.</li>
<li><code>sle</code>: interprets the operands as signed values and yields <code>true</code> if <code>op1</code> is less than or equal to <code>op2</code>.</li>
</ol>
<pre class="language-none"><code class="language-none">#Example
&lt;result&gt; &#x3D; icmp eq i32 4, 5          ; yields: result&#x3D;false
&lt;result&gt; &#x3D; icmp ne float* %X, %X     ; yields: result&#x3D;false
&lt;result&gt; &#x3D; icmp ult i16  4, 5        ; yields: result&#x3D;true
&lt;result&gt; &#x3D; icmp sgt i16  4, 5        ; yields: result&#x3D;false
&lt;result&gt; &#x3D; icmp ule i16 -4, 5        ; yields: result&#x3D;false
&lt;result&gt; &#x3D; icmp sge i16  4, 5        ; yields: result&#x3D;false</code></pre>
<h4 id="fcmp-浮点数比较">fcmp 浮点数比较</h4>
<ul>
<li>
<p><code>fcmp</code>指令根据其操作数的比较返回一个布尔值或布尔值向量。</p>
</li>
<li>
<p>如果操作数是浮点标量，则结果类型为布尔值 (i1)。</p>
</li>
<li>
<p>如果操作数是浮点向量，则结果类型是布尔向量，其元素数量与被比较的操作数相同。</p>
</li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax:
&lt;result&gt; &#x3D; fcmp [fast-math flags]* &lt;cond&gt; &lt;ty&gt; &lt;op1&gt;, &lt;op2&gt;     ; yields i1 or &lt;N x i1&gt;:result</code></pre>
<p><strong>Arguments:</strong></p>
<p><code>fcmp</code>’指令需要三个操作数。 第一个操作数是指示要执行的比较类型的关键字：</p>
<ol>
<li>
<p><code>false</code>：不比较，总是返回false</p>
</li>
<li>
<p><code>oeq</code>：有序且相等</p>
</li>
<li>
<p><code>ogt</code>：有序且大于</p>
</li>
<li>
<p><code>oge</code>：有序且大于等于</p>
</li>
<li>
<p><code>olt</code>：有序且小于</p>
</li>
<li>
<p><code>ole</code>：有序且小于或等于</p>
</li>
<li>
<p><code>one</code>：有序且不相等</p>
</li>
<li>
<p><code>ord</code>：有序(非NASN） yields <code>true</code> if both operands are not a QNAN.</p>
</li>
<li>
<p><code>ueq</code>：无序或相等</p>
</li>
<li>
<p><code>ugt</code>：无序或大于</p>
</li>
<li>
<p><code>uge</code>：无序或大于等于</p>
</li>
<li>
<p><code>ult</code>：无序或小于</p>
</li>
<li>
<p><code>ule</code>：无序或小于等于</p>
</li>
<li>
<p><code>une</code>：无序或不相等</p>
</li>
<li>
<p><code>uno</code>：无序（都是nans）   yields <code>true</code> if either operand is a QNAN.</p>
</li>
<li>
<p><code>true</code>：不比较，总是返回true</p>
</li>
</ol>
<p><em>Ordered</em> 表示两个操作数都不是 QNAN，而 <em>unordered</em> 表示任何一个操作数都可能是 QNAN。</p>
<p>每个 <code>val1</code> 和 <code>val2</code> 参数必须是 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-floating">floating-point</a> 类型或 [vector](<a target="_blank" rel="noopener" href="https://llvm">https://llvm</a> .org/docs/LangRef.html#t-vector) 的浮点类型。 它们必须具有相同的类型。</p>
<p><strong>Semantics:</strong></p>
<p>The ‘<code>fcmp</code>’ instruction compares <code>op1</code> and <code>op2</code> according to the condition code given as <code>cond</code>. If the operands are vectors, then the vectors are compared element by element. Each comparison performed always yields an <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-integer">i1</a> result, as follows:</p>
<ol>
<li><code>false</code>: always yields <code>false</code>, regardless of operands.</li>
<li><code>oeq</code>: yields <code>true</code> if both operands are not a QNAN and <code>op1</code> is equal to <code>op2</code>.</li>
<li><code>ogt</code>: yields <code>true</code> if both operands are not a QNAN and <code>op1</code> is greater than <code>op2</code>.</li>
<li><code>oge</code>: yields <code>true</code> if both operands are not a QNAN and <code>op1</code> is greater than or equal to <code>op2</code>.</li>
<li><code>olt</code>: yields <code>true</code> if both operands are not a QNAN and <code>op1</code> is less than <code>op2</code>.</li>
<li><code>ole</code>: yields <code>true</code> if both operands are not a QNAN and <code>op1</code> is less than or equal to <code>op2</code>.</li>
<li><code>one</code>: yields <code>true</code> if both operands are not a QNAN and <code>op1</code> is not equal to <code>op2</code>.</li>
<li><code>ord</code>: yields <code>true</code> if both operands are not a QNAN.</li>
<li><code>ueq</code>: yields <code>true</code> if either operand is a QNAN or <code>op1</code> is equal to <code>op2</code>.</li>
<li><code>ugt</code>: yields <code>true</code> if either operand is a QNAN or <code>op1</code> is greater than <code>op2</code>.</li>
<li><code>uge</code>: yields <code>true</code> if either operand is a QNAN or <code>op1</code> is greater than or equal to <code>op2</code>.</li>
<li><code>ult</code>: yields <code>true</code> if either operand is a QNAN or <code>op1</code> is less than <code>op2</code>.</li>
<li><code>ule</code>: yields <code>true</code> if either operand is a QNAN or <code>op1</code> is less than or equal to <code>op2</code>.</li>
<li><code>une</code>: yields <code>true</code> if either operand is a QNAN or <code>op1</code> is not equal to <code>op2</code>.</li>
<li><code>uno</code>: yields <code>true</code> if either operand is a QNAN.</li>
<li><code>true</code>: always yields <code>true</code>, regardless of operands.</li>
</ol>
<p><code>fcmp</code> 指令还可以选择采用任意数量的 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#fastmath">fast-math 标志</a>，它们是启用其他不安全浮点优化的优化提示。</p>
<p>任何一组快速数学标志在“fcmp”指令上都是合法的，但唯一对其语义有任何影响的标志是那些允许对输入参数的值进行假设的标志； 即<code>nnan</code>、<code>ninf</code>和<code>reassoc</code>。 有关详细信息，请参阅 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#fastmath">Fast-Math 标志</a>。</p>
<pre class="language-none"><code class="language-none"># Example:
&lt;result&gt; &#x3D; fcmp oeq float 4.0, 5.0    ; yields: result&#x3D;false
&lt;result&gt; &#x3D; fcmp one float 4.0, 5.0    ; yields: result&#x3D;true
&lt;result&gt; &#x3D; fcmp olt float 4.0, 5.0    ; yields: result&#x3D;true
&lt;result&gt; &#x3D; fcmp ueq double 1.0, 2.0   ; yields: result&#x3D;false</code></pre>
<h4 id="phi">phi</h4>
<p><code>phi</code> 指令用于实现 SSA 图中表示函数的 φ 节点。</p>
<p>在运行时，<code>phi</code>指令在逻辑上采用与在当前块之前执行的前驱基本块相对应的对指定的值。</p>
<pre class="language-none"><code class="language-none"># Syntax:
&lt;result&gt; &#x3D; phi [fast-math-flags] &lt;ty&gt; [ &lt;val0&gt;, &lt;label0&gt;], ...</code></pre>
<p><strong>Arguments:</strong></p>
<p>传入值的类型由第一个类型字段指定。 在此之后，<code>phi</code>指令将一对列表作为参数，其中一对用于当前块的每个前驱基本块。 只有 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#t-firstclass">first class</a> 类型的值可以用作 PHI 节点的值参数。 只有标签可以用作标签参数。</p>
<p>在基本块的开始和 PHI 指令之间不能有非 phi 指令：即 PHI 指令必须在基本块中的第一个。</p>
<p>就 SSA 形式而言，每个传入值的使用都被认为发生在从相应的前驱块到当前块的边上（但在同一边上定义了“invoke”指令的返回值之后。</p>
<pre class="language-none"><code class="language-none"># Example:
Loop:       ; Infinite loop that counts from 0 on up...
  %indvar &#x3D; phi i32 [ 0, %LoopHeader ], [ %nextindvar, %Loop ]
  %nextindvar &#x3D; add i32 %indvar, 1
  br label %Loop</code></pre>
<h4 id="select-条件值选择">select 条件值选择</h4>
<p><code>select</code>指令用于根据条件选择一个值，无需 IR 级分支。</p>
<ul>
<li>
<p>如果条件是 i1 并且计算结果为 1，则指令返回第一个值参数； 否则，它返回第二个值参数。</p>
</li>
<li>
<p>如果条件是 i1 的向量，则值参数必须是相同大小的向量，并且选择是逐个元素完成的。</p>
</li>
<li>
<p>如果条件是 i1 并且值参数是相同大小的向量，则选择整个向量。</p>
</li>
</ul>
<pre class="language-none"><code class="language-none">#Syntax
&lt;result&gt; &#x3D; select [fast-math flags] selty &lt;cond&gt;, &lt;ty&gt; &lt;val1&gt;, &lt;ty&gt; &lt;val2&gt;             ; yields ty selty is either i1 or &#123;&lt;N x i1&gt;&#125;

#Example:
%X &#x3D; select i1 true, i8 17, i8 42          ; yields i8:17</code></pre>
<h4 id="freeze">freeze</h4>
<p><code>freeze</code> 指令用于停止 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#undefvalues">undef</a> 和 [poison](<a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef">https://llvm.org/docs/LangRef</a>. html#poisonvalues) 值。</p>
<pre class="language-none"><code class="language-none">#Syntax:
&lt;result&gt; &#x3D; freeze ty &lt;val&gt;    ; yields ty:result</code></pre>
<p><strong>Semantics:</strong></p>
<p>如果参数是 <code>undef</code> 或 <code>poison</code>，则 <code>freeze</code>’返回一个任意但固定的类型为 ``ty<code>' 的值。 否则，此指令为空操作并返回输入参数。 同一条</code>freeze<code>指令返回的值的所有使用都保证始终遵守相同的值，而不同的</code>freeze`指令可能会产生不同的值。</p>
<p>虽然 <code>undef</code> 和 <code>poison</code> 指针可以被冻结，但结果是一个不可解引用的指针。 有关详细信息，请参阅 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#pointeraliasing">指针别名规则</a> 部分。 如果聚合值或向量被冻结，则操作数按元素冻结。 不考虑聚合的填充，因为如果不将其存储到内存中并以不同的类型加载它，它是不可见的。</p>
<pre class="language-none"><code class="language-none"># Example:
%w &#x3D; i32 undef
%x &#x3D; freeze i32 %w
%y &#x3D; add i32 %w, %w         ; undef
%z &#x3D; add i32 %x, %x         ; even number because all uses of %x observe
                            ; the same value
%x2 &#x3D; freeze i32 %w
%cmp &#x3D; icmp eq i32 %x, %x2  ; can be true or false

; example with vectors
%v &#x3D; &lt;2 x i32&gt; &lt;i32 undef, i32 poison&gt;
%a &#x3D; extractelement &lt;2 x i32&gt; %v, i32 0    ; undef
%b &#x3D; extractelement &lt;2 x i32&gt; %v, i32 1    ; poison
%add &#x3D; add i32 %a, %a                      ; undef

%v.fr &#x3D; freeze &lt;2 x i32&gt; %v                ; element-wise freeze
%d &#x3D; extractelement &lt;2 x i32&gt; %v.fr, i32 0 ; not undef
%add.f &#x3D; add i32 %d, %d                    ; even number

; branching on frozen value
%poison &#x3D; add nsw i1 %k, undef   ; poison
%c &#x3D; freeze i1 %poison
br i1 %c, label %foo, label %bar ; non-deterministic branch to %foo or %bar</code></pre>
<h4 id="call-简单函数调用">call 简单函数调用</h4>
<p><code>call</code>指令代表一个简单的函数调用。</p>
<pre class="language-none"><code class="language-none"># Syntax:
&lt;result&gt; &#x3D; [tail | musttail | notail ] call [fast-math flags] [cconv] [ret attrs] [addrspace(&lt;num&gt;)]
           &lt;ty&gt;|&lt;fnty&gt; &lt;fnptrval&gt;(&lt;function args&gt;) [fn attrs] [ operand bundles ]</code></pre>
<p><strong><a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id2116">Arguments:</a></strong></p>
<p><a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id2116">https://llvm.org/docs/LangRef.html#id2116</a></p>
<p><strong>Semantics:</strong></p>
<p><code>call</code>指令用于使控制流转移到指定函数，其传入参数绑定到指定值。 在被调用函数中执行<code>ret</code>指令时，控制流继续执行函数调用之后的指令，并且函数的返回值绑定到结果参数。</p>
<pre class="language-none"><code class="language-none"># Example:
%retval &#x3D; call i32 @test(i32 %argc)
call i32 (i8*, ...)* @printf(i8* %msg, i32 12, i8 42)        ; yields i32
%X &#x3D; tail call i32 @foo()                                    ; yields i32
%Y &#x3D; tail call fastcc i32 @foo()  ; yields i32
call void %foo(i8 signext 97)

%struct.A &#x3D; type &#123; i32, i8 &#125;
%r &#x3D; call %struct.A @foo()                        ; yields &#123; i32, i8 &#125;
%gr &#x3D; extractvalue %struct.A %r, 0                ; yields i32
%gr1 &#x3D; extractvalue %struct.A %r, 1               ; yields i8
%Z &#x3D; call void @foo() noreturn                    ; indicates that %foo never returns normally
%ZZ &#x3D; call zeroext i32 @bar()                     ; Return value is %zero extended</code></pre>
<h4 id="va-arg-可变参数">va_arg 可变参数</h4>
<p><code>va_arg</code>指令用于访问通过函数调用的<code>variable argumen</code>区域传递的参数。 它用于在 C 中实现 <code>va_arg</code> 宏。</p>
<pre class="language-none"><code class="language-none"># Syntax:
&lt;resultval&gt; &#x3D; va_arg &lt;va_list*&gt; &lt;arglist&gt;, &lt;argty&gt;</code></pre>
<p><strong>Example:</strong></p>
<p>See the <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#int-varargs">variable argument processing</a> section.</p>
<h4 id="landingpad">landingpad</h4>
<p><a target="_blank" rel="noopener" href="https://llvm.org/docs/ExceptionHandling.html#overview">LLVM 的异常处理系统</a> 使用<code>landingpad</code>指令来指定一个基本块是一个着陆场——一个异常着陆的地方， 并且对应于在 <code>try</code>/<code>catch</code> 序列的 <code>catch</code> 部分中找到的代码。 它定义了 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#personalityfn">personality 函数</a> 在重新进入该函数时提供的值。 <code>resultval</code> 的类型为 <code>resultty</code>。</p>
<pre class="language-none"><code class="language-none"># Syntax:
&lt;resultval&gt; &#x3D; landingpad &lt;resultty&gt; &lt;clause&gt;+
&lt;resultval&gt; &#x3D; landingpad &lt;resultty&gt; cleanup &lt;clause&gt;*

&lt;clause&gt; :&#x3D; catch &lt;type&gt; &lt;value&gt;
&lt;clause&gt; :&#x3D; filter &lt;array constant type&gt; &lt;array constant&gt;</code></pre>
<pre class="language-none"><code class="language-none"># Example:
;; A landing pad which can catch an integer.
%res &#x3D; landingpad &#123; i8*, i32 &#125;
         catch i8** @_ZTIi
;; A landing pad that is a cleanup.
%res &#x3D; landingpad &#123; i8*, i32 &#125;
         cleanup
;; A landing pad which can catch an integer and can only throw a double.
%res &#x3D; landingpad &#123; i8*, i32 &#125;
         catch i8** @_ZTIi
         filter [1 x i8**] [i8** @_ZTId]</code></pre>
<h4 id="catchpad">catchpad</h4>
<p><a target="_blank" rel="noopener" href="https://llvm.org/docs/ExceptionHandling.html#overview">LLVM 的异常处理系统</a> 使用<code>catchpad</code>指令来指定一个基本块开始一个 catch 处理程序- 个性例程试图转移控制以捕获异常的一种。</p>
<pre class="language-none"><code class="language-none">#Syntax:
&lt;resultval&gt; &#x3D; catchpad within &lt;catchswitch&gt; [&lt;args&gt;*]</code></pre>
<pre class="language-none"><code class="language-none">#Example:
dispatch:
  %cs &#x3D; catchswitch within none [label %handler0] unwind to caller
  ;; A catch block which can catch an integer.
handler0:
  %tok &#x3D; catchpad within %cs [i8** @_ZTIi]</code></pre>
<h4 id="cleanuppad">cleanuppad</h4>
<p>LLVM 的异常处理系统使用<code>cleanuppad</code>指令来指定基本块是清理块- 个性例程试图转移控制以运行清理操作的一种。</p>
<pre class="language-none"><code class="language-none"># Syntax:
&lt;resultval&gt; &#x3D; cleanuppad within &lt;parent&gt; [&lt;args&gt;*]</code></pre>
<pre class="language-none"><code class="language-none"># Example:
%tok &#x3D; cleanuppad within %cs []</code></pre>
<h3 id="Poison-Values"><a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#id1607">Poison Values</a></h3>
<p>A poison value 错误操作的结果。.</p>
<p>为了促进推测执行，许多指令在提供非法操作数时不会立即调用未定义行为，而是返回<code>poison value </code>。</p>
<p>字符串 <code>poison</code> 可以在任何需要常量的地方使用，并且带有 <code>nsw</code> 标志的 <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-add">add</a> 等操作可以产生poison value。</p>
<p>Most instructions return ‘<code>poison</code>’ when one of their arguments is ‘<code>poison</code>’. A notable exception is the <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-select">select instruction</a>. Propagation of poison can be stopped with the <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-freeze">freeze instruction</a>.</p>
<p>It is correct to replace a poison value with an <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#undefvalues">undef value</a> or any value of the type.</p>
<p>This means that immediate undefined behavior occurs if a poison value is used as an instruction operand that has any values that trigger undefined behavior. Notably this includes (but is not limited to):</p>
<ul>
<li>The pointer operand of a <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-load">load</a>, <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-store">store</a> or any other pointer dereferencing instruction (independent of address space).</li>
<li>The divisor operand of a <code>udiv</code>, <code>sdiv</code>, <code>urem</code> or <code>srem</code> instruction.</li>
<li>The condition operand of a <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-br">br</a> instruction.</li>
<li>The callee operand of a <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-call">call</a> or <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-invoke">invoke</a> instruction.</li>
<li>The parameter operand of a <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-call">call</a> or <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-invoke">invoke</a> instruction, when the function or invoking call site has a <code>noundef</code> attribute in the corresponding position.</li>
<li>The operand of a <a target="_blank" rel="noopener" href="https://llvm.org/docs/LangRef.html#i-ret">ret</a> instruction if the function or invoking call site has a noundef attribute in the return value position.</li>
</ul>
<p>Here are some examples:</p>
<pre class="language-none"><code class="language-none">entry:
  %poison &#x3D; sub nuw i32 0, 1           ; Results in a poison value.
  %poison2 &#x3D; sub i32 poison, 1         ; Also results in a poison value.
  %still_poison &#x3D; and i32 %poison, 0   ; 0, but also poison.
  %poison_yet_again &#x3D; getelementptr i32, i32* @h, i32 %still_poison
  store i32 0, i32* %poison_yet_again  ; Undefined behavior due to
                                       ; store to poison.

  store i32 %poison, i32* @g           ; Poison value stored to memory.
  %poison3 &#x3D; load i32, i32* @g         ; Poison value loaded back from memory.

  %narrowaddr &#x3D; bitcast i32* @g to i16*
  %wideaddr &#x3D; bitcast i32* @g to i64*
  %poison4 &#x3D; load i16, i16* %narrowaddr ; Returns a poison value.
  %poison5 &#x3D; load i64, i64* %wideaddr   ; Returns a poison value.

  %cmp &#x3D; icmp slt i32 %poison, 0       ; Returns a poison value.
  br i1 %cmp, label %end, label %end   ; undefined behavior

end:</code></pre>

</div>
  </div>
  
  
    
    <div class="footer">
      
      
      
        <div class="copyright">
          <blockquote>
            
              
                <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

              
            
              
                <p>本文永久链接是：<a href="https://www.sizaif.com/posts/32795611/">https://www.sizaif.com/posts/32795611/</a></p>
              
            
          </blockquote>
        </div>
      
      
    </div>
  
  
    


  <div class="article-meta" id="bottom">
    <div class="new-meta-box">
      
        
          
<div class="new-meta-item author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <a itemprop="url" class="author" href="/page/about/" rel="nofollow">
    <img itemprop="image" src="/img/avatar.webp" class="lazyload" data-srcset="/img/avatar.webp" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="This is a picture without description">
    <p itemprop="name">sizaif</p>
  </a>
</div>

        
      
        
          <div class="new-meta-item date" itemprop="dateModified" datetime="2022-05-03T22:18:16+08:00">
  <a class="notlink" href="/" onclick="return false;" title="Click me!">
    <i class="fad fa-edit EMERALD fa-fw" aria-hidden="true"></i>
    <p>更新于：2022年5月3日</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/fuzzing/" rel="nofollow"><i class="fad fa-hashtag CARROT fa-fw" aria-hidden="true"></i><p>fuzzing</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/LLVM/" rel="nofollow"><i class="fad fa-hashtag CARROT fa-fw" aria-hidden="true"></i><p>LLVM</p></a></div>
  <span hidden itemprop="keywords">fuzzing LLVM</span>


        
      
        
          
  <div class="new-meta-item browse leancloud">
    <a class="notlink" href="/" onclick="return false;" title="Click me!">
      
      <div id="lc-pv" data-title="LLVM 学习(二) -LLVM IR 语法理论学习" data-path="/posts/32795611/">
        <i class="fad fa-eye GREENSEA fa-fw" aria-hidden="true"></i>
        <span id="number"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
        次浏览
      </div>
    </a>
  </div>


        
      
        
          

        
      
    </div>
    
    
    
  </div>


  
  

  
    <div class="prev-next">
      
        <a class="prev" href="/posts/77c87ed3/">
          <p class="title"><i class="fas fa-chevron-left" aria-hidden="true"></i>AFL(american Fuzzy Lop)学习三</p>
          <p class="content">AFL(american fuzzy lop)学习三

@sizaif
@2022-04-11

fork Server
为了提高性能，afl-fuzz 使用“fork server”，其中模糊...</p>
        </a>
      
      
        <a class="next" href="/posts/4bf8181c/">
          <p class="title">AFL(american Fuzzy Lop)学习一-补充QEMU模式<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
          <p class="content">QEMU模式测试

@2022-04-10
@sizaif

编译QEMU
参考README.qemu
$./build_qemu_support.sh

# Cannot use 'pytho...</p>
        </a>
      
    </div>
  
  
  
  
</article>


  

  
  <article class="post white-box reveal shadow" id="comments">
    <span hidden>
      <meta itemprop="discussionUrl" content="/posts/32795611/#comments">
    </span>
    <p ct><i class="fad fa-comments PINK"></i> 评论吧</p>
    
    
    <div id="layoutHelper-comments"></div>

  </article>
  





</div>
<aside id="l_side" itemscope itemtype="http://schema.org/WPSideBar">
  
  
    
    

<section class="widget blogger shadow desktop mobile">
  <div class="content">
    
      
        <a class="avatar flat-box circle" href="/page/about/">
          <img no-lazy src="/img/avatar.webp" alt="This is a picture without description">
        </a>
      
    
    
      <div class="text">
        
        
          <p>春江潮水连海平,海上明月共潮生</p>

        
        
      </div>
    
    
      <div class="social-wrapper">
        
          
            <a href="https://blog.csdn.net/sizaif" class="social fad fa-fa-bandcamp flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
              
            </a>
          
        
          
        
          
            <a href="https://github.com/sizaif/" class="social fad fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer">
              
            </a>
          
        
      </div>
    
  </div>
</section>

  

  
    
    



  <section class="widget toc-wrapper shadow desktop mobile" id="toc-div">
    
  <header>
    
      <i class="fad fa-list DEEPORANGE fa-fw" aria-hidden="true"></i><span class="name">本文目录</span>
    
  </header>


    <div class="content">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#LLVM-IR-%E8%AF%AD%E6%B3%95"><span class="toc-text">LLVM IR 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E7%BB%93%E6%9E%84"><span class="toc-text">模块结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E6%8E%A5%E7%B1%BB%E5%9E%8B-Linkage-Types"><span class="toc-text">链接类型(Linkage Types)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E7%BA%A6%E5%AE%9A-Calling-Conventions"><span class="toc-text">调用约定(Calling Conventions)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E8%A7%81%E6%A0%BC%E5%BC%8F-Visibility-Styles"><span class="toc-text">可见格式(Visibility Styles)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DLL%E5%AD%98%E5%82%A8%E7%B1%BB-DLL-Storage-Classes"><span class="toc-text">DLL存储类(DLL Storage Classes)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F-Global-Variables"><span class="toc-text">全局变量(Global Variables)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0-Functions"><span class="toc-text">函数(Functions)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Metadata-Metadata"><span class="toc-text">Metadata(Metadata)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Named-Metadata-Named-Metadata"><span class="toc-text">Named Metadata(Named Metadata)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4%E5%90%AB%E4%B9%89-Terminator-Instructions"><span class="toc-text">控制指令含义(Terminator Instructions)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ret-%E8%BF%94%E5%9B%9E"><span class="toc-text">ret  返回</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#br-%E5%88%86%E6%94%AF"><span class="toc-text">br 分支 </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#switch-%E5%A4%9A%E6%9D%A1%E4%BB%B6%E5%88%86%E6%94%AF"><span class="toc-text">switch  多条件分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#indirectbr-%E8%BD%AC%E7%A7%BB%E5%88%B0%E6%8C%87%E5%AE%9A%E5%9C%B0%E5%9D%80"><span class="toc-text">indirectbr 转移到指定地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#invoke-%E6%99%AE%E9%80%9A-%E5%B8%A6%E5%BC%82%E5%B8%B8%E8%B0%83%E7%94%A8"><span class="toc-text">invoke 普通&#x2F;带异常调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#callbr-%E8%B0%83%E7%94%A8%E5%88%86%E6%94%AF"><span class="toc-text">callbr 调用分支</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#resume-%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8"><span class="toc-text">resume 抛出异常</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#catchswitch-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">catchswitch 异常处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#catchret-%E5%A4%84%E7%90%86%E8%BF%94%E5%9B%9E"><span class="toc-text">catchret 处理返回</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cleanupret"><span class="toc-text">cleanupret</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#unreachable-%E4%B8%8D%E5%8F%AF%E5%88%B0%E8%BE%BE"><span class="toc-text">unreachable 不可到达</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E5%85%83%E6%93%8D%E4%BD%9C-Unary-Operations"><span class="toc-text">一元操作 (Unary Operations)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#fneg-%E6%B1%82%E9%80%86"><span class="toc-text">fneg 求逆</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4-Binary-Operations"><span class="toc-text">二进制操作指令(Binary Operations)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#add-%E5%8A%A0"><span class="toc-text">add   加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fadd-%E6%B5%AE%E7%82%B9%E5%8A%A0"><span class="toc-text">fadd  浮点加</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sub-%E5%87%8F"><span class="toc-text">sub   减</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fsub-%E6%B5%AE%E7%82%B9%E5%87%8F"><span class="toc-text">fsub  浮点减</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mul-%E4%B9%98"><span class="toc-text">mul   乘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fmul-%E6%B5%AE%E7%82%B9%E4%B9%98"><span class="toc-text">fmul  浮点乘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#udiv-%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B4%E6%95%B0%E9%99%A4"><span class="toc-text">udiv  无符号整数除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sdiv-%E5%B8%A6%E7%AC%A6%E5%8F%B7%E6%95%B4%E6%95%B0%E9%99%A4"><span class="toc-text">sdiv  带符号整数除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fdiv-%E6%B5%AE%E7%82%B9%E9%99%A4"><span class="toc-text">fdiv  浮点除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#urem-%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B4%E6%95%B0%E6%B1%82%E4%BD%99"><span class="toc-text">urem  无符号整数求余</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#srem-%E5%B8%A6%E7%AC%A6%E5%8F%B7%E6%95%B4%E6%95%B0%E6%B1%82%E4%BD%99"><span class="toc-text">srem  带符号整数求余</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#frem-%E6%B5%AE%E7%82%B9%E6%95%B0%E6%B1%82%E4%BD%99"><span class="toc-text">frem  浮点数求余</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8D%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%93%8D%E4%BD%9C%E6%8C%87%E4%BB%A4-Bitwise-Binary-Operations"><span class="toc-text">位二进制操作指令 (Bitwise Binary Operations)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#shl-%E9%80%BB%E8%BE%91%E5%B7%A6%E7%A7%BB"><span class="toc-text">shl 逻辑左移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lshr-%E9%80%BB%E8%BE%91%E5%8F%B3%E7%A7%BB"><span class="toc-text">lshr  逻辑右移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ashr-%E7%AE%97%E6%95%B0%E5%8F%B3%E7%A7%BB"><span class="toc-text">ashr  算数右移</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#and-%E4%B8%8E"><span class="toc-text">and   与</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#or-%E6%88%96"><span class="toc-text">or   或</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xor-%E5%BC%82%E6%88%96"><span class="toc-text">xor   异或</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E9%87%8F%E8%BF%90%E7%AE%97-Vector-Operations"><span class="toc-text">向量运算(Vector Operations)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#extractelement"><span class="toc-text">extractelement</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#insertelement"><span class="toc-text">insertelement</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#shufflevector"><span class="toc-text">shufflevector</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E6%93%8D%E4%BD%9C-Aggregate-Operations"><span class="toc-text">聚合操作(Aggregate Operations)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#extractvalue"><span class="toc-text">extractvalue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#insertvalue"><span class="toc-text">insertvalue</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E8%AE%BF%E9%97%AE%E5%92%8C%E5%AF%BB%E5%9D%80%E6%93%8D%E4%BD%9C-Memory-Access-and-Addressing-Operations"><span class="toc-text">内存访问和寻址操作(Memory Access and Addressing Operations)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#alloca"><span class="toc-text">alloca</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#load"><span class="toc-text">load</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#store"><span class="toc-text">store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fence"><span class="toc-text">fence</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cmpxchg"><span class="toc-text">cmpxchg</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#atomicrmw"><span class="toc-text">atomicrmw</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#getelementptr"><span class="toc-text">getelementptr</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C-Other-Operations"><span class="toc-text">其他操作(Other Operations)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#icmp-%E6%95%B4%E6%95%B0%E6%AF%94%E8%BE%83"><span class="toc-text">icmp 整数比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fcmp-%E6%B5%AE%E7%82%B9%E6%95%B0%E6%AF%94%E8%BE%83"><span class="toc-text">fcmp 浮点数比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#phi"><span class="toc-text">phi</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#select-%E6%9D%A1%E4%BB%B6%E5%80%BC%E9%80%89%E6%8B%A9"><span class="toc-text">select 条件值选择</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#freeze"><span class="toc-text">freeze</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#call-%E7%AE%80%E5%8D%95%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8"><span class="toc-text">call 简单函数调用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#va-arg-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0"><span class="toc-text">va_arg 可变参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#landingpad"><span class="toc-text">landingpad</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#catchpad"><span class="toc-text">catchpad</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cleanuppad"><span class="toc-text">cleanuppad</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Poison-Values"><span class="toc-text">Poison Values</span></a></li></ol></li></ol>
    </div>
  </section>


  


  
  
  
</aside>



          


<script>
  window.pdata={}
  pdata.ispage=true;
  pdata.postTitle="LLVM 学习(二) -LLVM IR 语法理论学习";
  pdata.commentPath="";
  pdata.commentPlaceholder="";
  //  see: /layout/_partial/scripts/_ctrl/coverCtrl.ejs
  
    // header
    var l_header=document.getElementById("l_header");
    
    l_header.classList.add("show");
    
    
      // cover
      var cover_wrapper=document.querySelector('#l_cover .cover-wrapper');
      var scroll_down=document.getElementById('scroll-down');
      cover_wrapper.id="none";
      cover_wrapper.style.display="none";
      scroll_down.style.display="none";
    
  
</script>

        </div>
        
  
  <footer class="footer clearfix" itemscope itemtype="http://schema.org/WPFooter">
    <br><br>
    
      
        
          <div><p><span id="lc-sv">本站总访问量为 <span id="number"><i class="fad fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span> 次</span> <span id="lc-uv">访客数为 <span id="number"><i class="fad fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span> 人</span></p>
</div>
        
      
    
      
        
          <div><div class="footerMax490">鲁 ICP 备 <a href="https://beian.miit.gov.cn/" target="_blank" rel="nofollow" style="cursor:wait">20018157</a> 号-1</div></div>
        
      
    
      
        
          <div><div class="footerMax490">Copyright 2021 - 2022 sizaif. All Rights Reserved</div></div>
        
      
    
    
    
    
  </footer>


        <a id="s-top" class="fal fa-arrow-up fa-fw" href="/" onclick="return false;" title="top"></a>
      </div>
       
              <div class="deng-box2">
                <div class="deng">
                  <div class="xian">

                  </div>
                  <div class="deng-a">
                    <div class="deng-b">
                      <div class="deng-t">年</div>
                    </div>
                  </div>
                  <div class="shui shui-a">
                    <div class="shui-c">

                    </div>
                    <div class="shui-b"></div>
                  </div>
                </div>
              </div>
              <div class="deng-box3">
                <div class="deng">
                  <div class="xian">

                  </div>
                  <div class="deng-a">
                    <div class="deng-b">
                      <div class="deng-t">虎</div>
                    </div>
                  </div>
                  <div class="shui shui-a">
                    <div class="shui-c"></div>
                    <div class="shui-b">

                    </div>
                  </div>
                </div>
              </div>
              <div class="deng-box1">
                <div class="deng">
                  <div class="xian">

                  </div>
                  <div class="deng-a">
                    <div class="deng-b">
                      <div class="deng-t">吉</div>
                    </div>
                  </div>
                  <div class="shui shui-a">
                    <div class="shui-c"></div>
                    <div class="shui-b"></div>
                  </div>
                </div>
              </div>
              <div class="deng-box">
                <div class="deng">
                  <div class="xian">

                  </div>
                  <div class="deng-a">
                    <div class="deng-b">
                      <div class="deng-t">大</div>
                    </div>
                  </div>
                  <div class="shui shui-a">
                    <div class="shui-c">

                    </div>
                    <div class="shui-b"></div>
                  </div>
                </div>
              </div>
              
    </div>
    <div>
      <script>
  /************这个文件存放不需要重载的全局变量和全局函数*********/
  window.volantis = {}; // volantis 全局变量
  volantis.dom = {}; // 页面Dom see: /source/js/app.js etc.
  /******************** volantis.EventListener ********************************/
  // 事件监听器 see: /source/js/app.js
  volantis.EventListener = {}
  // 这里存放pjax切换页面时将被移除的事件监听器
  volantis.EventListener.list = []
  //构造方法
  function volantisEventListener(type, f, ele) {
    this.type = type
    this.f = f
    this.ele = ele
  }
  // 移除事件监听器
  volantis.EventListener.remove = () => {
    volantis.EventListener.list.forEach(function (i) {
      i.ele.removeEventListener(i.type, i.f, false)
    })
    volantis.EventListener.list = []
  }
  /******************** volantis.dom.$ ********************************/
  // 注：这里没有选择器，也没有forEach一次只处理一个dom，这里重新封装主题常用的dom方法，返回的是dom对象，对象包含了以下方法，同时保留dom的原生API
  function volantisDom(ele) {
    if (!ele) ele = document.createElement("div")
    this.ele = ele;
    // ==============================================================
    this.ele.find = (c) => {
      let q = this.ele.querySelector(c)
      if (q)
        return new volantisDom(q)
    }
    // ==============================================================
    this.ele.hasClass = (c) => {
      return this.ele.className.match(new RegExp('(\\s|^)' + c + '(\\s|$)'));
    }
    this.ele.addClass = (c) => {
      this.ele.classList.add(c);
      return this.ele
    }
    this.ele.removeClass = (c) => {
      this.ele.classList.remove(c);
      return this.ele
    }
    this.ele.toggleClass = (c) => {
      if (this.ele.hasClass(c)) {
        this.ele.removeClass(c)
      } else {
        this.ele.addClass(c)
      }
      return this.ele
    }
    // ==============================================================
    // 参数 r 为 true 表示pjax切换页面时事件监听器将被移除，false不移除
    this.ele.on = (c, f, r = 1) => {
      this.ele.addEventListener(c, f, false)
      if (r) {
        volantis.EventListener.list.push(new volantisEventListener(c, f, this.ele))
      }
      return this.ele
    }
    this.ele.click = (f, r) => {
      this.ele.on("click", f, r)
      return this.ele
    }
    this.ele.scroll = (f, r) => {
      this.ele.on("scroll", f, r)
      return this.ele
    }
    // ==============================================================
    this.ele.html = (c) => {
      // if(c=== undefined){
      //   return this.ele.innerHTML
      // }else{
      this.ele.innerHTML = c
      return this.ele
      // }
    }
    // ==============================================================
    this.ele.hide = (c) => {
      this.ele.style.display = "none"
      return this.ele
    }
    this.ele.show = (c) => {
      this.ele.style.display = "block"
      return this.ele
    }
    // ==============================================================
    return this.ele
  }
  volantis.dom.$ = (ele) => {
    return !!ele ? new volantisDom(ele) : null;
  }
  /******************** volantis.dom ********************************/
  // 页面选择器 将dom对象缓存起来 see: /source/js/app.js etc.
  volantis.dom.bodyAnchor = volantis.dom.$(document.getElementById("safearea")); // 页面主体
  volantis.dom.topBtn = volantis.dom.$(document.getElementById('s-top')); // 向上
  volantis.dom.wrapper = volantis.dom.$(document.getElementById('wrapper')); // 整个导航栏
  volantis.dom.coverAnchor = volantis.dom.$(document.querySelector('#l_cover .cover-wrapper')); // 1个
  volantis.dom.switcher = volantis.dom.$(document.querySelector('#l_header .switcher .s-search')); // 搜索按钮   移动端 1个
  volantis.dom.header = volantis.dom.$(document.getElementById('l_header')); // 移动端导航栏
  volantis.dom.search = volantis.dom.$(document.querySelector('#l_header .m_search')); // 搜索框 桌面端 移动端 1个
  volantis.dom.mPhoneList = volantis.dom.$(document.querySelectorAll('#l_header .m-phone .list-v')); //  手机端 子菜单 多个
  /******************** RunItem ********************************/
  function RunItem() {
    this.list = []; // 存放回调函数
    this.start = () => {
      for (var i = 0; i < this.list.length; i++) {
        this.list[i].run();
      }
    };
    this.push = (fn, name, setRequestAnimationFrame = true) => {
      let myfn = fn
      if (setRequestAnimationFrame) {
        myfn = ()=>{
          volantis.requestAnimationFrame(fn)
        }
      }
      var f = new Item(myfn, name);
      this.list.push(f);
    };
    this.remove = (name) =>{
      for (let index = 0; index < this.list.length; index++) {
        const e = this.list[index];
        if (e.name == name) {
          this.list.splice(index,1);
        }
      }
    }
    // 构造一个可以run的对象
    function Item(fn, name) {
      // 函数名称
      this.name = name || fn.name;
      // run方法
      this.run = () => {
        try {
          fn()
        } catch (error) {
          console.log(error);
        }
      };
    }
  }
  /******************** Pjax ********************************/
  // /layout/_plugins/pjax/index.ejs
  // volantis.pjax.send(callBack[,"callBackName"]) 传入pjax:send回调函数
  // volantis.pjax.push(callBack[,"callBackName"]) 传入pjax:complete回调函数
  // volantis.pjax.error(callBack[,"callBackName"]) 传入pjax:error回调函数
  volantis.pjax = {};
  volantis.pjax.method = {
    complete: new RunItem(),
    error: new RunItem(),
    send: new RunItem(),
  };
  volantis.pjax = {
    ...volantis.pjax,
    push: volantis.pjax.method.complete.push,
    error: volantis.pjax.method.error.push,
    send: volantis.pjax.method.send.push,
  };
  /********************  Dark Mode  ********************************/
  // /layout/_partial/scripts/darkmode.ejs
  // volantis.dark.mode 当前模式 dark or light
  // volantis.dark.toggle() 暗黑模式触发器
  // volantis.dark.push(callBack[,"callBackName"]) 传入触发器回调函数
  volantis.dark = {};
  volantis.dark.method = {
    toggle: new RunItem(),
  };
  volantis.dark = {
    ...volantis.dark,
    push: volantis.dark.method.toggle.push,
  };
  /********************  Message  ********************************/
  // /layout/_plugins/message/script.ejs
  // volantis.message
  /********************  isMobile  ********************************/
  // /source/js/app.js
  // volantis.isMobile
  // volantis.isMobileOld
  /********************脚本动态加载函数********************************/
  // volantis.js(src, cb)  cb 可以传入onload回调函数 或者 JSON对象 例如: volantis.js("src", ()=>{}) 或 volantis.js("src", {defer:true,onload:()=>{}})
  // volantis.css(src)

  // 返回Promise对象，如下方法同步加载资源，这利于处理文件资源之间的依赖关系，例如：APlayer 需要在 MetingJS 之前加载
  // (async () => {
  //     await volantis.js("...theme.plugins.aplayer.js.aplayer...")
  //     await volantis.js("...theme.plugins.aplayer.js.meting...")
  // })();

  // 已经加入了setTimeout
  volantis.js = (src, cb) => {
    return new Promise(resolve => {
      setTimeout(function () {
        var HEAD = document.getElementsByTagName("body")[0] || document.documentElement;
        var script = document.createElement("script");
        script.setAttribute("type", "text/javascript");
        if (cb) {
          if (JSON.stringify(cb)) {
            for (let p in cb) {
              if (p == "onload") {
                script[p] = () => {
                  cb[p]()
                  resolve()
                }
              } else {
                script[p] = cb[p]
                script.onload = resolve
              }
            }
          } else {
            script.onload = () => {
              cb()
              resolve()
            };
          }
        } else {
          script.onload = resolve
        }
        script.setAttribute("src", src);
        HEAD.appendChild(script);
      });
    });
  }
  volantis.css = (src) => {
    return new Promise(resolve => {
      setTimeout(function () {
        var link = document.createElement('link');
        link.rel = "stylesheet";
        link.href = src;
        link.onload = resolve;
        document.getElementsByTagName("head")[0].appendChild(link);
      });
    });
  }
  /********************按需加载的插件********************************/
  // volantis.import.jQuery().then(()=>{})
  volantis.import = {
    jQuery: () => {
      if (typeof jQuery == "undefined") {
        return volantis.js("https://cdn.jsdelivr.net/npm/jquery@3.5/dist/jquery.min.js")
      } else {
        return new Promise(resolve => {
          resolve()
        });
      }
    }
  }
  /********************** requestAnimationFrame ********************************/
  // 1、requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒60帧。
  // 2、在隐藏或不可见的元素中，requestAnimationFrame 将不会进行重绘或回流，这当然就意味着更少的的 cpu，gpu 和内存使用量。
  volantis.requestAnimationFrame = (fn)=>{
    if (!window.requestAnimationFrame) {
      window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;
    }
    window.requestAnimationFrame(fn)
  }
  /************************ layoutHelper *****************************************/
  volantis.layoutHelper = (helper, html, opt)=>{
    opt = Object.assign({clean:false, pjax:true}, opt)
    function myhelper(helper, html, clean) {
      volantis.tempDiv = document.createElement("div");
      volantis.tempDiv.innerHTML = html;
      let layoutHelper = document.querySelector("#layoutHelper-"+helper)
      if (layoutHelper) {
        if (clean) {
          layoutHelper.innerHTML = ""
        }
        layoutHelper.append(volantis.tempDiv);
      }
    }
    myhelper(helper, html, opt.clean)
    if (opt.pjax) {
      volantis.pjax.push(()=>{
        myhelper(helper, html, opt.clean)
      },"layoutHelper-"+helper)
    }
  }
  /****************************** 滚动事件处理 ****************************************/
  volantis.scroll = {
    engine: new RunItem(),
    unengine: new RunItem(),
  };
  volantis.scroll = {
    ...volantis.scroll,
    push: volantis.scroll.engine.push,
  };
  // 滚动条距离顶部的距离
  volantis.scroll.getScrollTop = () =>{
    let scrollPos;
    if (window.pageYOffset) {
      scrollPos = window.pageYOffset;
    } else if (document.compatMode && document.compatMode != 'BackCompat') {
      scrollPos = document.documentElement.scrollTop;
    } else if (document.body) {
      scrollPos = document.body.scrollTop;
    }
    return scrollPos;
  }
  // 使用 requestAnimationFrame 处理滚动事件
  // `volantis.scroll.del` 中存储了一个数值, 该数值检测一定时间间隔内滚动条滚动的位移, 数值的检测频率是浏览器的刷新频率. 数值为正数时, 表示向下滚动. 数值为负数时, 表示向上滚动.
  volantis.scroll.handleScrollEvents = () => {
    volantis.scroll.lastScrollTop = volantis.scroll.getScrollTop()
    function loop() {
      const scrollTop = volantis.scroll.getScrollTop();
      if (volantis.scroll.lastScrollTop !== scrollTop) {
        volantis.scroll.del = scrollTop - volantis.scroll.lastScrollTop;
        volantis.scroll.lastScrollTop = scrollTop;
        // if (volantis.scroll.del > 0) {
        //   console.log("向下滚动");
        // } else {
        //   console.log("向上滚动");
        // }
        volantis.scroll.engine.start();
      }else{
        volantis.scroll.unengine.start();
      }
      volantis.requestAnimationFrame(loop)
    }
    volantis.requestAnimationFrame(loop)
  }
  volantis.scroll.handleScrollEvents()
  // 触发页面滚动至目标元素位置
  volantis.scroll.to = (ele, option = {}) =>{
    // 默认配置
    opt = {
      top: ele.getBoundingClientRect().top + document.documentElement.scrollTop,
      behavior: "smooth"
    }
    // 定义配置
    if ("top" in option) {
      opt.top = option.top
    }
    if ("behavior" in option) {
      opt.behavior = option.behavior
    }
    if ("addTop" in option) {
      opt.top += option.addTop
    }
    if (!("observerDic" in option)) {
      option.observerDic = 25
    }
    // 滚动
    window.scrollTo(opt);
    // 监视器
    // 监视并矫正元素滚动到指定位置 
    // 目前用于处理 toc 部分 lazyload 引起的 cls 导致的定位失败问题
    if (option.observer) {
      volantis.scroll.unengine.push(()=>{
        let me = ele.getBoundingClientRect().top
        if(!(me >= -option.observerDic && me <= option.observerDic)){
          volantis.scroll.to(ele, option)
        }else{
          volantis.scroll.unengine.remove("unengineObserver")
        }
      },"unengineObserver")
    }
  }
  /******************************************************************************/
  /******************************************************************************/
</script>
<script>
  top.location!=self.location&&(top.location=self.location);
  
  volantis.css("https://cdn.jsdelivr.net/gh/inkss/fontawesome@5/css/all.min.css");
  
  
  volantis.css("https://cdn.jsdelivr.net/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css");
  
  
</script>







  <script>
  volantis.message = (title, message, option = {}, done = null) => {
    if (typeof iziToast === "undefined") {
      volantis.css('/css/message.css?time=1667802749504')
      volantis.js('/js/message.js?time=1667802749504', () => {
        tozashMessage(title, message, option, done);
      });
    } else {
      tozashMessage(title, message, option, done);
    }

    function tozashMessage(title, message, option, done) {
      const {
        icon,
        time,
        position,
        transitionIn,
        transitionOut,
        messageColor,
        titleColor,
        backgroundColor,
        zindex,
        displayMode
      } = option;
      iziToast.show({
        layout: '2',
        icon: 'Fontawesome',
        closeOnEscape: 'true',
        displayMode: displayMode || 'replace',
        transitionIn: transitionIn || 'bounceInLeft',
        transitionOut: transitionOut || 'fadeOutRight',
        messageColor: messageColor || 'var(--color-text)',
        titleColor: titleColor || 'var(--color-text)',
        backgroundColor: backgroundColor || 'var(--color-card)',
        zindex: zindex || '2147483647',
        icon: icon || 'fad fa-info-circle light-blue',
        timeout: time || '5000',
        position: position || 'topRight',
        title: title,
        message: message,
        onClosed: () => {
          if(done) done();
        },
      });
    }
  };

  volantis.question = (title, message, option = {}, success = null, cancel = null, done = null) => {
    if (typeof iziToast === "undefined") {
      volantis.css('/css/message.css?time=1667802749504')
      volantis.js('/js/message.js?time=1667802749504', () => {
        tozashQuestion(title, message, option, success, cancel, done);
      });
    } else {
      tozashQuestion(title, message, option, success, cancel, done);
    }

    function tozashQuestion(title, message, option, success, cancel, done) {
      const {
        icon,
        time,
        position,
        transitionIn,
        transitionOut,
        messageColor,
        titleColor,
        backgroundColor,
        zindex
      } = option;
      iziToast.question({ 
        id: 'question',
        icon: 'Fontawesome',
        close: false,
        overlay: true,
        displayMode: 'once',
        position: 'center',
        messageColor: messageColor || 'var(--color-text)',
        titleColor: titleColor || 'var(--color-text)',
        backgroundColor: backgroundColor || 'var(--color-card)',
        zindex: zindex || '2147483647',
        icon: icon || 'fad fa-question-circle light-blue',
        timeout: time || '20000',
        title: title,
        message: message,
        buttons: [
          ['<button><b>是</b></button>', (instance, toast) => {
            instance.hide({ transitionOut: transitionOut || 'fadeOut' }, toast, 'button');
            if(success) success(instance, toast)
          }],
          ['<button><b>否</b></button>', (instance, toast) => {
            instance.hide({ transitionOut: transitionOut || 'fadeOut' }, toast, 'button');
            if(cancel) cancel(instance, toast)
          }]
        ],
        onClosed: (instance, toast, closedBy) => {
          if(done) done(instance, toast, closedBy);
        }
      });
    }
  }

  volantis.hideMessage = (done = null) => {
    const toast = document.querySelector('.iziToast');
    if (!toast) {
      if(done) done()
      return;
    }
    
    if (typeof iziToast === "undefined") {
      volantis.css('/css/message.css?time=1667802749504')
      volantis.js('/js/message.js?time=1667802749504', () => {
        hideMessage(done);
      });
    } else {
      hideMessage(done);
    }

    function hideMessage(done) {
      iziToast.hide({}, toast);
      if(done) done();
    }
  }

  volantis.messageCopyright = {
    enable: 'true' === 'true' ? true : false,
    title: '知识共享许可协议',
    message: '请遵守 CC BY-NC-SA 4.0 协议。',
    icon: 'far fa-copyright light-blue'
  }

  volantis.messageRightMenu = {
    enable: 'true' === 'true' ? true : false,
  }

  if(volantis.messageCopyright.enable) {
    document.body.oncopy = function(){
      volantis.message(volantis.messageCopyright.title, volantis.messageCopyright.message, {
        icon: volantis.messageCopyright.icon
      });
    }; 
  }
</script>




  
  
  
  <div id="rightmenu-wrapper">
    <ul class="list-v rightmenu" id="rightmenu-content">
      <li class="navigation menuNavigation-Content">
        <a class="nav icon-only fix-cursor-default" onclick="history.back()"><i class="fal PETERRIVE fa-arrow-left fa-fw"></i></a>
        <a class="nav icon-only fix-cursor-default" onclick="history.forward()"><i class="fal PETERRIVE fa-arrow-right fa-fw"></i></a>
        <a class="nav icon-only fix-cursor-default" onclick="window.location.reload()"><i class="fal PETERRIVE fa-redo fa-fw"></i></a>
        <a class="nav icon-only fix-cursor-default" href="/"><i class="fal PETERRIVE fa-home fa-fw"></i></a>
      </li>
      <li class="option menuOption-Content">
        <span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyText">
          
          <i class="fal PETERRIVE fa-copy fa-fw"></i> 复制文本
        </span>
        <span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyPaste">
          
          <i class="fal PETERRIVE fa-paste fa-fw mR12"></i> 粘贴文本
        </span>
        <span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copySelect">
          
          <i class="fal PETERRIVE fa-object-ungroup fa-fw mR12"></i> 全选文本
        </span>
        <span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyCut">
          
          <i class="fal PETERRIVE fa-cut fa-fw mR12"></i> 剪切文本
        </span>
        <span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="openTab">
          
          <i class="fal PETERRIVE fa-external-link-square-alt fa-fw mR12"></i> 在新标签页打开
        </span>
        <span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copySrc">
          
          <i class="fal PETERRIVE fa-image fa-fw mR12"></i> 复制图片地址
        </span>
        <span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyImg">
          
          <i class="fal PETERRIVE fa-images fa-fw mR12"></i> 复制图片文件
        </span>
      </li>
      
        
      
        
      
        
          <hr class="menuLoad-Content">
        
      
        
          
    <li class="menuLoad-Content">
      <a class="vlts-menu fix-cursor-default" href="/page/messages/" id="pagemessages">
        <i class="fal fa-comment EMERALD fa-fw"></i> 留言板
      </a>
    </li>
  
        
      
        
          
    <li class="menuLoad-Content">
      <a class="vlts-menu fix-cursor-default" href="/page/history/" id="pagehistory">
        <i class="fal fa-history PETERRIVE fa-fw"></i> 时间轴
      </a>
    </li>
  
        
      
        
          <hr class="menuLoad-Content">
        
      
        
          <li class="option menuOption-Content">
            <span class="vlts-menu opt fix-cursor-default" id="printHtml">
              <i class="fal fa-print TURQUOISE fa-fw"></i> 打印页面
            </span>
          </li>
        
      
        
          <hr class="menuLoad-Content">
        
      
        
          <li class="option menuOption-Content">
            <span class="vlts-menu opt fix-cursor-default" id="readingModel">
              <i class="fal fa-book-open fa-fw"></i> 阅读模式
            </span>
          </li>
        
      
        
          <li class="option menuOption-Content">
            <span class="vlts-menu opt fix-cursor-default toggle-mode-btn" id="menuDarkBtn">
              <i class="fal fa-moon WISTERIA fa-fw"></i> 暗黑模式
            </span>
          </li>
        
      
        
          <div id="menuMusic">
            <li class="music name menuOption-Content">
              <p class="nav music-title fix-cursor-default"></p>
            </li>
            <li class="music ctrl">
              <a class="nav icon-only backward fix-cursor-default" onclick="volantis.rightMenu.aplayerBackward()"><i class="fal PETERRIVE fa-step-backward fa-fw"></i></a>
              <a class="nav icon-only toggle fix-cursor-default" onclick="volantis.rightMenu.aplayerToggle()"><i class="fal PETERRIVE fa-play fa-fw"></i></a>
              <a class="nav icon-only forward fix-cursor-default" onclick="volantis.rightMenu.aplayerForward()"><i class="fal PETERRIVE fa-step-forward fa-fw"></i></a>
            </li>
            <li class="music volume">
              <div class="nav volume">
                <div class="aplayer-volume-bar-wrap">
                  <div class="aplayer-volume-bar fix-cursor-pointer">
                    <div class="aplayer-volume"></div>
                    <i class="left fal PETERRIVE fa-volume-off fa-fw"></i>
                    <i class="right fal PETERRIVE fa-volume-up fa-fw"></i>
                  </div>
                </div>
              </div>
            </li>
          </div>
        
      
    </ul>
  </div>
  <script>
    if(volantis['isMobile'] !== 1 || document.documentElement.clientWidth > 500) {
    volantis.rightMenu = {};
    volantis.rightMenu.faicon = 'fal PETERRIVE' || 'fa';
    
      volantis.rightMenu.music = true;
      volantis.rightMenu.aplayerBackward = () => {
        event.stopPropagation();
        if (MainAPlayer.aplayerBackward) {
          MainAPlayer.aplayerBackward();
        }
      }
      volantis.rightMenu.aplayerToggle = () => {
        event.stopPropagation();
        if (MainAPlayer.aplayerToggle) {
          MainAPlayer.aplayerToggle();
        }
      }
      volantis.rightMenu.aplayerForward = () => {
        event.stopPropagation();
        if (MainAPlayer.aplayerForward) {
          MainAPlayer.aplayerForward();
        }
      }
    
    
      volantis.rightMenu.defaultStyles = true;
    
    
    
      volantis.rightMenu.customPicUrl = true;
      volantis.rightMenu.picOld = '';
      volantis.rightMenu.picNew = '';
    
    
    
    volantis.js('/js/rightMenu.js?time=1667802749504');
    }
  </script>





  <script>
const rootElement = document.documentElement;
const darkModeStorageKey = "color-scheme";
const rootElementDarkModeAttributeName = "color-scheme";
const setLS = (k, v) => {
    localStorage.setItem(k, v);
};
const removeLS = (k) => {
    localStorage.removeItem(k);
};
const getLS = (k) => {
    return localStorage.getItem(k);
};
const getModeFromCSSMediaQuery = () => {
  return window.matchMedia("(prefers-color-scheme: dark)").matches
    ? "dark"
    : "light";
};
const resetRootDarkModeAttributeAndLS = () => {
  rootElement.removeAttribute(rootElementDarkModeAttributeName);
  removeLS(darkModeStorageKey);
};
const validColorModeKeys = {
  dark: true,
  light: true,
};
const applyCustomDarkModeSettings = (mode) => {
  const currentSetting = mode || getLS(darkModeStorageKey);
  getCustomDarkMode();
  if (currentSetting === getModeFromCSSMediaQuery()) {
    resetRootDarkModeAttributeAndLS();
  } else if (validColorModeKeys[currentSetting]) {
    rootElement.setAttribute(rootElementDarkModeAttributeName, currentSetting);
  } else {
    resetRootDarkModeAttributeAndLS();
  }
};
const invertDarkModeObj = {
  dark: "light",
  light: "dark",
};
/**
 * get target mode
 */
 const getCustomDarkMode = () => {
  let currentSetting = getLS(darkModeStorageKey);
  if (validColorModeKeys[currentSetting]) {
    currentSetting = invertDarkModeObj[currentSetting];
  } else if (currentSetting === null) {
    currentSetting = invertDarkModeObj[getModeFromCSSMediaQuery()];
  } else {
    return;
  }
  if(currentSetting=="dark"){
    volantis.dark.mode="light";
  }else{
    volantis.dark.mode="dark";
  }
  // console.log(volantis.dark.mode)
};
const toggleCustomDarkMode = () => {
  let currentSetting = getLS(darkModeStorageKey);
  if (validColorModeKeys[currentSetting]) {
    currentSetting = invertDarkModeObj[currentSetting];
  } else if (currentSetting === null) {
    currentSetting = invertDarkModeObj[getModeFromCSSMediaQuery()];
  } else {
    return;
  }
  setLS(darkModeStorageKey, currentSetting);
  return currentSetting;
};
/**
 * 暗黑模式触发器
 */
volantis.dark.toggle=()=>{
  const mode = toggleCustomDarkMode();
  applyCustomDarkModeSettings(mode);
  // 使用 volantis.dark.push 方法传入volantis.dark.toggle回调函数 参见layout/_partial/scripts/global.ejs
  volantis.dark.method.toggle.start();
}
/**
 * bind event for toggle button
 */

function bindToggleButton() {
  var btn= document.querySelectorAll("#wrapper .toggle-mode-btn,#rightmenu-wrapper .toggle-mode-btn")
  btn.forEach(function (e) {
    volantis.dom.$(e).on('click',volantis.dark.toggle);
  })
}
applyCustomDarkModeSettings();
document.addEventListener("DOMContentLoaded", ()=>{
  volantis.requestAnimationFrame(bindToggleButton)
});
volantis.pjax.push(bindToggleButton);
</script>




<script>
  function loadIssuesJS() {
    
    
      const friends_api = document.getElementById('friends-api');
      if (friends_api != undefined && typeof FriendsJS === 'undefined') {
        volantis.js("/js/plugins/friends.js?time=1667802749504")
      }
    
    
      const contributors_api = document.getElementById('contributors-api');
      if (contributors_api != undefined && typeof ContributorsJS === 'undefined') {
        volantis.js("/js/plugins/contributors.js?time=1667802749504")
      }
    
  };
  loadIssuesJS()
  volantis.pjax.push(()=>{
    loadIssuesJS();
  })

</script>




  <script defer="defer" src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.1.0/dist/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 0
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    lazyLoadInstance.update();
  });
  document.addEventListener('pjax:complete', function () {
    lazyLoadInstance.update();
  });
</script>




  

<script>
  window.FPConfig = {
	delay: 0,
	ignoreKeywords: ["#"],
	maxRPS: 6,
	hoverDelay: 0
  };
</script>
<script defer="defer" src="https://cdn.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"></script>







  <script>
  volantis.APlayerController = {}; // 音乐播放控制 - All
  volantis.APlayerController.id = '8110970572';  // 设定全局音乐播放ID
  volantis.APlayerController.volume = '0.7';
  volantis.css("https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css");
  (async () => {
    // APlayer 需要在  MetingJS 之前加载
    await volantis.js("https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@master/js/APlayer.mini.js")
    await volantis.js("https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js")
  
    // 右键 music 需要在 APlayer  MetingJS 之后加载
    await volantis.js('/js/aplayer.js?time=1667802749507')
    volantis.APlayerController.music = true;
  
  })();

  function SetAPlayerPlugin(){
    let Metings = document.querySelectorAll('meting-js');
    if (Metings.length === 0) {
      volantis.APlayerController.status = undefined;
      
      if(typeof MainAPlayer === 'undefined'){
        MainAPlayer = {};
        MainAPlayer.Aplayer = {};
      }
      
      return;
    };
    if (Metings[0].aplayer && Metings[0].aplayer.on) {
      // improve the accessibility https://web.dev/button-name/
      document.querySelectorAll(".aplayer-icon-menu").forEach(e=>{
        e.setAttribute("aria-label","Aplayer Menu")
      })
      // message see: /layout/_plugins/message/script.ejs
      
        try {
          setTimeout(() => {
            Metings.forEach((item, index) => {
              const aplayerItem = item.aplayer; if(!aplayerItem) return;
              const rightMenuAplayer = item.meta.id === volantis.APlayerController.id && volantis.APlayerController.music;
              if(rightMenuAplayer) MainAPlayer.checkAPlayer();
              if(aplayerItem.events.events.play.every(item => {return item.name !== 'messagePlay'})) {
                aplayerItem.on('play', function messagePlay() {
                  let index = aplayerItem.list.index;
                  let title = aplayerItem.list.audios[index].title;
                  let artist = aplayerItem.list.audios[index].artist;
                  setTimeout(() => {
                    volantis.message('音乐通知', title + ' - ' + artist, {
                      icon: 'fas fa-play',
                      transitionIn: 'flipInX',
                      transitionOut: 'flipOutX'
                    });
                  }, 100)
                  if(rightMenuAplayer && volantis.APlayerController) volantis.APlayerController.status = 'play';
                });
              }
              if(aplayerItem.events.events.pause.every(item => {return item.name !== 'messagePause'})) {
                aplayerItem.on('pause', function messagePause() {
                  let index = aplayerItem.list.index;
                  let title = aplayerItem.list.audios[index].title;
                  let artist = aplayerItem.list.audios[index].artist;
                  setTimeout(() => {
                    // 歌曲播放结束也会触发 pause 事件，为了避免错误提示，等待一会儿
                    if(aplayerItem.paused) {
                      volantis.message('音乐通知', title + ' - ' + artist, {
                        icon: 'fas fa-pause',
                        transitionIn: 'flipInX',
                        transitionOut: 'flipOutX'
                      });
                    }
                  }, 100)
                  if(rightMenuAplayer && volantis.APlayerController) volantis.APlayerController.status = 'pause';
                });
              }
            });
          }, 500)
        } catch (error) { console.error(error); }
      
    }else{
      volantis.requestAnimationFrame(SetAPlayerPlugin)
    }
  }

  document.addEventListener("DOMContentLoaded", ()=>{
    SetAPlayerPlugin();
  });
  volantis.pjax.push(SetAPlayerPlugin);
</script>




  <script>
  volantis.layoutHelper("comments",`<div id="waline"><i class="fas fa-cog fa-spin fa-fw fa-2x"></i></div>`)
  function pjax_waline() {
    if(!document.querySelector("#waline"))return;
    let pagePlaceholder = pdata.commentPlaceholder || "快来一起灌水把~";
    let path = pdata.commentPath;
    if (path.length == 0) {
      let defaultPath = '';
      path = defaultPath || decodeURI(window.location.pathname);
    }
    new Waline(Object.assign({"js":"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js","path":null,"placeholder":"快来一起灌水把~","imageHosting":"https://7bu.top/api/upload","meta":["nick","mail","link"],"requiredFields":["nick","mail"],"serverURL":"https://my-blog-comments-7h9bif6tw-sizaif.vercel.app/","avatar":"robohash","avatarCDN":"https://sdn.geekzu.org/avatar/","pageSize":10,"lang":"zh-CN","visitor":false}, {
     el: '#waline',
     path: path,
     placeholder: pagePlaceholder,
     uploadImage: function(file) {
      const formData = new FormData();
      formData.append('image', file);
      const token = "0f10884e1e0a0831d1c6a272977cf5ce";
      return fetch('https://7bu.top/api/upload', {
      	method: 'POST',
      	body: formData,
        headers: {'Authorization': token}
      }).then(resp => resp.json()).then(resp => resp.data.url);
   },
  }));
  }
  volantis.js('https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js').then(pjax_waline)
  volantis.pjax.push(pjax_waline);
</script>






<script src="https://cdn.jsdelivr.net/gh/sizaif/blog-cdn@main/js/app.js?time=1667802749504.js"></script>




  <script>
  const SearchServiceDataPathRoot = ("/" || "/").endsWith("/")
    ? "/" || "/"
    : "//" || "/";
  const SearchServiceDataPath = SearchServiceDataPathRoot + "content.json";

  function loadSearchScript() {
    // see: layout/_partial/scripts/_ctrl/cdnCtrl.ejs
    return volantis.js("/js/search/hexo.js?time=1667802749504");
  }

  function loadSearchService() {
    loadSearchScript();
    document.querySelectorAll(".input.u-search-input").forEach((e) => {
      e.removeEventListener("focus", loadSearchService, false);
    });
  }

  // 打开并搜索 字符串 s
  function OpenSearch(s) {
    loadSearchScript().then(() => {
      SearchService.setQueryText(s);
      SearchService.search();
    });
  }

  // 访问含有 ?s=xxx  的链接时打开搜索 // 与搜索引擎 structured data 相关: /scripts/helpers/structured-data/lib/config.js
  if (window.location.search && /^\?s=/g.test(window.location.search)) {
    let queryText = decodeURI(window.location.search)
      .replace(/\ /g, "-")
      .replace(/^\?s=/g, "");
    OpenSearch(queryText);
  }

  // 搜索输入框获取焦点时加载搜索
  document.querySelectorAll(".input.u-search-input").forEach((e) => {
    e.addEventListener("focus", loadSearchService, false);
  });
</script>






  
<script src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@2/js/comment_typing.js"></script>




  
  
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js"></script>


  
<script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script>


  
<script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>



  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism.css">


  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css">


<script>

  function pjax_prismjs_copyCode(){
    if (!document.querySelector("pre")) {
      return;
    }
    let pres = document.querySelectorAll("pre")
    pres.forEach(pre=>{
      var wrapper = document.createElement('div');
      wrapper.classList.add('code-toolbar');
      pre.parentNode.insertBefore(wrapper, pre);
      wrapper.appendChild(pre);
    })
    VolantisApp.copyCode(".code-toolbar pre")
  }
  volantis.requestAnimationFrame(pjax_prismjs_copyCode)
  volantis.pjax.push(pjax_prismjs_copyCode)

</script>




  <script defer="defer">

  const LCCounter = {
    app_id: 'GcD7lTc7sb10bct0tpUjQmNy-MdYXbMMI',
    app_key: 'raRdC0LRDER0gV9zBR5K6h1C',
    custom_api_server: 'app-router.leancloud.cn',

    // 查询存储的记录
    getRecord(Counter, url, title) {
      return new Promise(function (resolve, reject) {
        Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({url})))
          .then(resp => resp.json())
          .then(({results, code, error}) => {
            if (code === 401) {
              throw error;
            }
            if (results && results.length > 0) {
              var record = results[0];
              resolve(record);
            } else {
              Counter('post', '/classes/Counter', {url, title: title, times: 0})
                .then(resp => resp.json())
                .then((record, error) => {
                  if (error) {
                    throw error;
                  }
                  resolve(record);
                }).catch(error => {
                console.error('Failed to create', error);
                reject(error);
              });
            }
          }).catch((error) => {
          console.error('LeanCloud Counter Error:', error);
          reject(error);
        });
      })
    },

    // 发起自增请求
    increment(Counter, incrArr) {
      return new Promise(function (resolve, reject) {
        Counter('post', '/batch', {
          "requests": incrArr
        }).then((res) => {
          res = res.json();
          if (res.error) {
            throw res.error;
          }
          resolve(res);
        }).catch((error) => {
          console.error('Failed to save visitor count', error);
          reject(error);
        });
      });
    },

    // 构建自增请求体
    buildIncrement(objectId) {
      return {
        "method": "PUT",
        "path": `/1.1/classes/Counter/${ objectId }`,
        "body": {
          "times": {
            '__op': 'Increment',
            'amount': 1
          }
        }
      }
    },

    // 校验是否为有效的 UV
    validUV() {
      var key = 'LeanCloudUVTimestamp';
      var flag = localStorage.getItem(key);
      if (flag) {
        // 距离标记小于 24 小时则不计为 UV
        if (new Date().getTime() - parseInt(flag) <= 86400000) {
          return false;
        }
      }
      localStorage.setItem(key, new Date().getTime().toString());
      return true;
    },

    addCount(Counter) {
      var enableIncr = '' === 'true' && window.location.hostname !== 'localhost';
      enableIncr = true;
      var getterArr = [];
      var incrArr = [];
      // 请求 PV 并自增
      var pvCtn = document.querySelector('#lc-sv');
      if (pvCtn || enableIncr) {
        var pvGetter = this.getRecord(Counter, 'https://www.sizaif.com' + '/#lc-sv', 'Visits').then((record) => {
          incrArr.push(this.buildIncrement(record.objectId))
          var eles = document.querySelectorAll('#lc-sv #number');
          if (eles.length > 0) {
            eles.forEach((el,index,array)=>{
              el.innerText = record.times + 1;
              if (pvCtn) {
                pvCtn.style.display = 'inline';
              }
            })
          }
        });
        getterArr.push(pvGetter);
      }

      // 请求 UV 并自增
      var uvCtn = document.querySelector('#lc-uv');
      if (uvCtn || enableIncr) {
        var uvGetter = this.getRecord(Counter, 'https://www.sizaif.com' + '/#lc-uv', 'Visitors').then((record) => {
          var vuv = this.validUV();
          vuv && incrArr.push(this.buildIncrement(record.objectId))
          var eles = document.querySelectorAll('#lc-uv #number');
          if (eles.length > 0) {
            eles.forEach((el,index,array)=>{
              el.innerText = record.times + (vuv ? 1 : 0);
              if (uvCtn) {
                uvCtn.style.display = 'inline';
              }
            })
          }
        });
        getterArr.push(uvGetter);
      }

      // 请求文章的浏览数，如果是当前页面就自增
      var allPV = document.querySelectorAll('#lc-pv');
      if (allPV.length > 0 || enableIncr) {
        for (i = 0; i < allPV.length; i++) {
          let pv = allPV[i];
          let title = pv.getAttribute('data-title');
          var url = 'https://www.sizaif.com' + pv.getAttribute('data-path');
          if (url) {
            var viewGetter = this.getRecord(Counter, url, title).then((record) => {
              // 是当前页面就自增
              let curPath = window.location.pathname;
              if (curPath.includes('index.html')) {
                curPath = curPath.substring(0, curPath.lastIndexOf('index.html'));
              }
              if (pv.getAttribute('data-path') == curPath) {
                incrArr.push(this.buildIncrement(record.objectId));
              }
              if (pv) {
                var ele = pv.querySelector('#lc-pv #number');
                if (ele) {
                  if (pv.getAttribute('data-path') == curPath) {
                    ele.innerText = (record.times || 0) + 1;
                  } else {
                    ele.innerText = record.times || 0;
                  }
                  pv.style.display = 'inline';
                }
              }
            });
            getterArr.push(viewGetter);
          }
        }
      }

      // 如果启动计数自增，批量发起自增请求
      if (enableIncr) {
        Promise.all(getterArr).then(() => {
          incrArr.length > 0 && this.increment(Counter, incrArr);
        })
      }

    },


    fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${ api_server }/1.1${ url }`, {
          method,
          headers: {
            'X-LC-Id': this.app_id,
            'X-LC-Key': this.app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      this.addCount(Counter);
    },

    refreshCounter() {
      var api_server = this.app_id.slice(-9) !== '-MdYXbMMI' ? this.custom_api_server : `https://${ this.app_id.slice(0, 8).toLowerCase() }.api.lncldglobal.com`;
      if (api_server) {
        this.fetchData(api_server);
      } else {
        fetch('https://app-router.leancloud.cn/2/route?appId=' + this.app_id)
          .then(resp => resp.json())
          .then(({api_server}) => {
            this.fetchData('https://' + api_server);
          });
      }
    }

  };

  LCCounter.refreshCounter();

  document.addEventListener('pjax:complete', function () {
    LCCounter.refreshCounter();
  });
</script>




  


<script>
	setTimeout(function() {
	  volantis.js("https://www.googletagmanager.com/gtag/js?id=G-N8KQ2P8GC7");
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'G-N8KQ2P8GC7');
	}, 1000);
	// 关于谷歌统计对 SPA 页面的处理：
	// 当应用以动态方式加载内容并更新地址栏中的网址时，也应该更新通过 gtag.js 存储的网页网址。
	// https://developers.google.cn/analytics/devguides/collection/gtagjs/single-page-applications?hl=zh-cn
	volantis.pjax.push(()=>{
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('config', 'G-N8KQ2P8GC7', {'page_path': document.location.pathname});
	},'google_analytics')
</script>




<script>
var _hmt = _hmt || [];
(function() {
  setTimeout(function() {
    volantis.js("https://hm.baidu.com/hm.js?edae7b205e9ea0265b67911e1e800db7")
  }, 1000);
})();
// 关于百度统计对 SPA 页面的处理：
// 方案一：百度统计>管理>单页应用设置中，打开开启按钮即可对SPA进行统计。 https://tongji.baidu.com/web/help/article?id=324
// 方案二：取消注释下列代码。 https://tongji.baidu.com/web/help/article?id=235
volantis.pjax.push(()=>{_hmt.push(['_trackPageview', document.location.pathname]);},'baidu_analytics')
</script>


		








<pjax>

</pjax>

<script>
  function listennSidebarTOC() {
    const navItems = document.querySelectorAll(".toc li");
    if (!navItems.length) return;
    const sections = [...navItems].map((element) => {
      const link = element.querySelector(".toc-link");
      const target = document.getElementById(
        decodeURI(link.getAttribute("href")).replace("#", "")
      );
      // 解除 a 标签 href 的 锚点定位, a 标签 href 的 锚点定位 会随机启用?? 产生错位???
      link.setAttribute("onclick","return false;")
      link.setAttribute("toc-action","toc-"+decodeURI(link.getAttribute("href")).replace("#", ""))
      link.setAttribute("href","/")
      // 配置 点击 触发新的锚点定位
      link.addEventListener("click", (event) => {
        event.preventDefault();
         // 这里的 addTop 是通过错位使得 toc 自动展开.
        volantis.scroll.to(target,{addTop: 5, observer:true})
      });
      return target;
    });

    function activateNavByIndex(target) {
      if (target.classList.contains("active-current")) return;

      document.querySelectorAll(".toc .active").forEach((element) => {
        element.classList.remove("active", "active-current");
      });
      target.classList.add("active", "active-current");
      let parent = target.parentNode;
      while (!parent.matches(".toc")) {
        if (parent.matches("li")) parent.classList.add("active");
        parent = parent.parentNode;
      }
    }

    function findIndex(entries) {
      let index = 0;
      let entry = entries[index];
      if (entry.boundingClientRect.top > 0) {
        index = sections.indexOf(entry.target);
        return index === 0 ? 0 : index - 1;
      }
      for (; index < entries.length; index++) {
        if (entries[index].boundingClientRect.top <= 0) {
          entry = entries[index];
        } else {
          return sections.indexOf(entry.target);
        }
      }
      return sections.indexOf(entry.target);
    }

    function createIntersectionObserver(marginTop) {
      marginTop = Math.floor(marginTop + 10000);
      let intersectionObserver = new IntersectionObserver(
        (entries, observe) => {
          let scrollHeight = document.documentElement.scrollHeight;
          if (scrollHeight > marginTop) {
            observe.disconnect();
            createIntersectionObserver(scrollHeight);
            return;
          }
          let index = findIndex(entries);
          activateNavByIndex(navItems[index]);
        }, {
          rootMargin: marginTop + "px 0px -100% 0px",
          threshold: 0,
        }
      );
      sections.forEach((element) => {
        element && intersectionObserver.observe(element);
      });
    }

    createIntersectionObserver(document.documentElement.scrollHeight);
  }

  document.addEventListener("DOMContentLoaded", ()=>{
    volantis.requestAnimationFrame(listennSidebarTOC)
  });
  document.addEventListener("pjax:success", ()=>{
    volantis.requestAnimationFrame(listennSidebarTOC)
  });
</script>


  <script type="application/ld+json">[{"@context":"http://schema.org","@type":"Organization","name":"Sizaif's Blog","url":"https://www.sizaif.com/","logo":{"@type":"ImageObject","url":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},{"@context":"http://schema.org","@type":"Person","name":"sizaif","image":{"@type":"ImageObject","url":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png"},"url":"https://www.sizaif.com/","sameAs":["https://github.com/volantis-x"],"description":"春江潮水连海平,海上明月共潮生."},{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://www.sizaif.com/","name":"Sizaif's Blog"}},{"@type":"ListItem","position":2,"item":{"@id":"https://www.sizaif.com//navigation/categories/Master/","name":"Master"}},{"@type":"ListItem","position":2,"item":{"@id":"https://www.sizaif.com//navigation/categories/Master/LLVM/","name":"LLVM"}},{"@type":"ListItem","position":3,"item":{"@id":"https://www.sizaif.com/posts/32795611/","name":"LLVM 学习(二) -LLVM IR 语法理论学习"}}]},{"@context":"http://schema.org","@type":"BlogPosting","headline":"LLVM 学习(二) -LLVM IR 语法理论学习","description":"","datePublished":"2022-04-19T02:32:46.000Z","dateModified":"2022-05-03T14:18:16.099Z","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.sizaif.com/posts/32795611/"},"author":{"@type":"Person","name":"sizaif","image":{"@type":"ImageObject","url":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png"},"url":"https://www.sizaif.com/"},"publisher":{"@type":"Organization","name":"Sizaif's Blog","logo":{"@type":"ImageObject","url":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png","width":192,"height":192}},"url":"https://www.sizaif.com/posts/32795611/","wordCount":0,"articleSection":"Master","keywords":"fuzzing,LLVM","image":{"@type":"ImageObject","url":"https://cdn.jsdelivr.net/gh/volantis-x/cdn-org/blog/favicon/android-chrome-192x192.png","width":192,"height":192}}]</script>


<script>
  function pjax_ArticleBkg() {
    const _bkg = document.querySelector('.cus-article-bkg');
    const _globalBkg = document.getElementById('BKG');
    
    if(document.body.offsetWidth <= 500) {
      _globalBkg.style.display = 'none';
      if(_bkg) _bkg.style.display = 'none';
    } else {
      _globalBkg.style.display = _bkg ? 'none' : '';  // block
    }
  }

  function pjax_setGlobalBkg() {
    if(document.body.offsetWidth <= 500) {
      const _globalBkg = document.getElementById('BKG');
      _globalBkg.style.display = 'none';
    }
  }

  document.addEventListener("DOMContentLoaded", function () {
    pjax_ArticleBkg();
  });

  volantis.pjax.send(pjax_setGlobalBkg);
  volantis.pjax.push(pjax_ArticleBkg);
</script>
  








      
        



<script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script>


<script>
    var pjax;
    document.addEventListener('DOMContentLoaded', function () {
      pjax = new Pjax({
        elements: 'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox]):not([onclick="return false;"]):not([target="_blank"]):not([target="view_window"])',
        selectors: [
          "title",
          
          "#pjax-container",
          "#pjax-header-nav-list",
          "pjax", // <pjax></pjax> 标签
          "script[data-pjax], .pjax-reload script" // script标签添加data-pjax 或 script标签外层添加.pjax-reload 的script代码段重载
        ],
        cacheBust: false,   // url 地址追加时间戳，用以避免浏览器缓存
        timeout: 5000
      });
    });

    document.addEventListener('pjax:send', function (e) {
      //window.stop(); // 相当于点击了浏览器的停止按钮

      try {
        var currentUrl = window.location.pathname;
        var targetUrl = e.triggerElement.href;
        var banUrl = ["/artitalk/", "/page/shuoshuo/"];
        if (banUrl[0] != "") {
          banUrl.forEach(item => {
            if(currentUrl.indexOf(item) != -1 || targetUrl.indexOf(item) != -1) {
              window.location.href = targetUrl;
            }
          });
        }
      } catch (error) {}

      // 使用 volantis.pjax.send 方法传入pjax:send回调函数 参见layout/_partial/scripts/global.ejs
      volantis.pjax.method.send.start();
    });

    document.addEventListener('pjax:complete', function () {
      // 使用 volantis.pjax.push 方法传入重载函数 参见layout/_partial/scripts/global.ejs
      volantis.pjax.method.complete.start();
    });

    document.addEventListener('pjax:error', function (e) {
      // 使用 volantis.pjax.error 方法传入pjax:error回调函数 参见layout/_partial/scripts/global.ejs
      volantis.pjax.method.error.start();
      window.location.href = e.triggerElement.href;
    });
</script>

      
      <div id="BKG" class="content-in"></div>
    </div>
  
  
  
  </body>
</html>
